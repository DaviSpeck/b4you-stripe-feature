"use strict";(self.webpackChunksixbase_backoffice=self.webpackChunksixbase_backoffice||[]).push([[9885],{9885:(e,n,a)=>{a.r(n),a.d(n,{default:()=>k});var r=a(89379),o=a(9950),c=a(30639),s=a(13467),l=a(35203),t=a(45530),i=a(98664),d=a(29251),p=a(12449),u=a(34964),h=(a(94300),a(44414));const m={position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0},x=e=>(e||"").replace(/\D/g,""),g=e=>{const n=x(e);return 11!==n.length?e||"":n.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4")},j=e=>{const n=x(e);return 14!==n.length?e||"":n.replace(/(\d{2})(\d{3})(\d{3})(\d{4})(\d{2})/,"$1.$2.$3/$4-$5")},v=e=>e?e.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase()):"-",b=e=>[e.first_name,e.last_name].filter(Boolean).join(" "),_=e=>{var n;return null!==(n=e.email)&&void 0!==n?n:"-"},y=e=>e.is_company?"PJ":"PF",f=e=>e?e.pending_approval?"pending":"boolean"===typeof e.rejected&&e.rejected?"rejected":e.approved?"approved":"rejected":"pending",w=e=>{const n=(null===e||void 0===e?void 0:e.reviewed_by_name)||(null===e||void 0===e?void 0:e.approved_by_name)||(null===e||void 0===e?void 0:e.rejected_by_name)||(null===e||void 0===e?void 0:e.moderator_name),a=(null===e||void 0===e?void 0:e.reviewed_at)||(null===e||void 0===e?void 0:e.updated_at),r=a?new Date(a).toLocaleString():null;return n||r?" por ".concat(null!==n&&void 0!==n?n:"\u2014").concat(r?" em ".concat(r):""):null},k=()=>{var e,n,a,x,k,C,S,N;const{skin:P}=(0,s.h)(),[O,E]=(0,o.useState)([]),[A,R]=(0,o.useState)(0),[$,F]=(0,o.useState)(10),[D,T]=(0,o.useState)(""),[z,B]=(0,o.useState)(!1),[L,I]=(0,o.useState)("pending"),[J,U]=(0,o.useState)(!1),[Z,H]=(0,o.useState)(null),[M,Q]=(0,o.useState)({calendar:[new Date(Date.now()-7776e6),new Date]}),W=(0,o.useCallback)(()=>U(e=>!e),[]),Y=(0,o.useCallback)(e=>{H(e),U(!0)},[]),q=(0,o.useCallback)(async()=>{if(Z)try{await t.F.put("/users/user_bank_accounts/".concat(Z.id,"/approve")),p.oR.success("Conta banc\xe1ria aprovada com sucesso!",m),U(!1),K(0)}catch(e){console.error(e),p.oR.error("Erro ao aprovar a conta banc\xe1ria.",m)}},[Z]),G=(0,o.useCallback)(async()=>{if(Z)try{await t.F.put("/users/user_bank_accounts/".concat(Z.id,"/reject")),p.oR.info("Conta banc\xe1ria reprovada.",m),U(!1),K(0)}catch(e){console.error(e),p.oR.error("Erro ao reprovar a conta banc\xe1ria.",m)}},[Z]),K=async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;B(!0);try{const a=new URLSearchParams;a.append("page",e.toString()),a.append("size",(n||$).toString()),D&&a.append("input",D),L&&a.append("status",L),Array.isArray(M.calendar)&&2===M.calendar.length&&M.calendar[0]&&M.calendar[1]&&(a.append("start_date",M.calendar[0].toISOString()),a.append("end_date",M.calendar[1].toISOString()));const{data:r}=await t.F.get("/users/user_bank_accounts/all?".concat(a.toString()));E(r.info.rows||[]),R(r.info.count||0)}catch(a){console.error(a),p.oR.error("Erro ao carregar solicita\xe7\xf5es.",m)}B(!1)},V=(0,o.useRef)(void 0);(0,o.useEffect)(()=>{K(0)},[D,L]),(0,o.useEffect)(()=>{2===M.calendar.length&&K(0)},[M.calendar]);const X=(0,o.useMemo)(()=>[{name:"Nome",selector:e=>b(e),sortable:!0,cell:e=>b(e)},{name:"Email",selector:e=>_(e),cell:e=>_(e)},{name:"Tipo",selector:e=>y(e),width:"90px",cell:e=>y(e)},{name:"Detalhes",center:!0,width:"110px",cell:e=>(0,h.jsx)(l.Ex,{color:"primary",className:"view-details",role:"button",onClick:()=>Y(e),children:(0,h.jsx)(d.A,{size:18})})}],[Y]);return(0,h.jsxs)("section",{id:"pageChangeBankAccount",children:[(0,h.jsx)("h2",{className:"mb-2",children:"Solicita\xe7\xe3o de altera\xe7\xf5es banc\xe1rias"}),(0,h.jsx)(l.fI,{children:(0,h.jsx)(l.fv,{md:12,children:(0,h.jsx)(l.Zp,{children:(0,h.jsx)(l.bw,{children:(0,h.jsx)(l.gE,{className:"filters",children:(0,h.jsxs)(l.fI,{children:[(0,h.jsxs)(l.fv,{md:5,children:[(0,h.jsx)(l.JU,{children:"Busca"}),(0,h.jsx)(l.pd,{placeholder:"Nome ou e-mail",onChange:e=>{let{target:n}=e;window.clearTimeout(V.current),V.current=window.setTimeout(()=>{T(n.value)},500)}})]}),(0,h.jsxs)(l.fv,{md:4,children:[(0,h.jsx)(l.JU,{children:"Status"}),(0,h.jsxs)(l.pd,{type:"select",value:L,onChange:e=>I(e.target.value),children:[(0,h.jsx)("option",{value:"pending",children:"Pendente"}),(0,h.jsx)("option",{value:"approved",children:"Aprovado"}),(0,h.jsx)("option",{value:"rejected",children:"Reprovado"})]})]}),(0,h.jsxs)(l.fv,{md:3,className:"mt-1",children:[(0,h.jsx)(l.JU,{className:"form-label",htmlFor:"range-picker",children:"Per\xedodo"}),(0,h.jsxs)("div",{className:"d-flex align-items-center",children:[(0,h.jsx)(i.A,{size:15,className:"me-1"}),(0,h.jsx)(u.A,{id:"range-picker",value:M.calendar,className:"form-control border-0 shadow-none bg-transparent",onChange:e=>Q(n=>(0,r.A)((0,r.A)({},n),{},{calendar:e})),options:{mode:"range",dateFormat:"d/m/Y"}})]})]})]})})})})})}),(0,h.jsx)(l.Zp,{children:(0,h.jsx)(l.bw,{children:(0,h.jsx)(c.Ay,{columns:X,data:O,progressPending:z,pagination:!0,paginationServer:!0,paginationTotalRows:A,onChangeRowsPerPage:async(e,n)=>{await K(n-1,e),F(e)},onChangePage:e=>{K(e-1)},noDataComponent:"Nenhuma solicita\xe7\xe3o encontrada",paginationComponentOptions:{rowsPerPageText:"Linhas por p\xe1gina:",rangeSeparatorText:"de",noRowsPerPage:!1},theme:"dark"===P?"solarized":"solarizedLight"})})}),(0,h.jsxs)(l.aF,{isOpen:J,toggle:W,size:"lg",centered:!0,children:[(0,h.jsx)(l.rQ,{toggle:W,children:"Detalhes da solicita\xe7\xe3o"}),(0,h.jsx)(l.cw,{children:Z?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:"mb-2",children:[(0,h.jsxs)("p",{className:"mb-0",children:[(0,h.jsx)("strong",{children:"Solicitante:"})," ",b(Z)," (",y(Z),")"]}),(0,h.jsxs)("p",{className:"mb-0",children:[(0,h.jsxs)("strong",{children:[Z.is_company?"CNPJ":"CPF",":"]})," ",Z.is_company?j(Z.cnpj):g(Z.document_number)]}),(0,h.jsxs)("small",{className:"text-muted",children:["Criado em: ",new Date(Z.created_at).toLocaleString()]})]}),(0,h.jsx)("hr",{}),(0,h.jsxs)(l.fI,{children:[(0,h.jsxs)(l.fv,{md:6,children:[(0,h.jsx)("h6",{className:"mb-2",children:"Dados atuais"}),(0,h.jsxs)("ul",{className:"mb-3",children:[(0,h.jsxs)("li",{children:[(0,h.jsx)("b",{children:"Banco:"})," ",Z.is_company?null!==(e=Z.company_bank_code_old)&&void 0!==e?e:Z.bank_code_old:Z.bank_code_old||"-"]}),(0,h.jsxs)("li",{children:[(0,h.jsx)("b",{children:"Ag\xeancia:"})," ",Z.is_company?null!==(n=Z.company_agency_old)&&void 0!==n?n:Z.agency_old:Z.agency_old||"-"]}),(0,h.jsxs)("li",{children:[(0,h.jsx)("b",{children:"Conta:"})," ",Z.is_company&&null!==(a=Z.company_account_number_old)&&void 0!==a?a:Z.account_number_old]}),(0,h.jsxs)("li",{children:[(0,h.jsx)("b",{children:"Tipo:"})," ",v(Z.is_company&&null!==(x=Z.company_account_type_old)&&void 0!==x?x:Z.account_type_old)]})]})]}),(0,h.jsxs)(l.fv,{md:6,children:[(0,h.jsx)("h6",{className:"mb-2",children:"Novo cadastro solicitado"}),(0,h.jsxs)("ul",{className:"mb-3",children:[(0,h.jsxs)("li",{children:[(0,h.jsx)("b",{children:"Banco:"})," ",Z.is_company?null!==(k=Z.company_bank_code)&&void 0!==k?k:Z.bank_code:Z.bank_code||"-"]}),(0,h.jsxs)("li",{children:[(0,h.jsx)("b",{children:"Ag\xeancia:"})," ",Z.is_company?null!==(C=Z.company_agency)&&void 0!==C?C:Z.agency:Z.agency||"-"]}),(0,h.jsxs)("li",{children:[(0,h.jsx)("b",{children:"Conta:"})," ",Z.is_company&&null!==(S=Z.company_account_number)&&void 0!==S?S:Z.account_number]}),(0,h.jsxs)("li",{children:[(0,h.jsx)("b",{children:"Tipo:"})," ",v(Z.is_company&&null!==(N=Z.company_account_type)&&void 0!==N?N:Z.account_type)]})]})]})]}),(()=>{const e=f(Z);return"pending"===e?(0,h.jsx)(l.Ex,{color:"warning",children:"Pendente aprova\xe7\xe3o"}):"approved"===e?(0,h.jsxs)(l.Ex,{color:"success",children:["Aprovado",w(Z)]}):(0,h.jsxs)(l.Ex,{color:"danger",children:["Reprovado",w(Z)]})})()]}):(0,h.jsx)("div",{children:"Carregando\u2026"})}),(0,h.jsx)(l.jl,{children:"pending"===f(Z||void 0)?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(l.$n,{color:"success",onClick:q,children:"Aprovar"}),(0,h.jsx)(l.$n,{color:"danger",outline:!0,onClick:G,children:"Reprovar"})]}):(0,h.jsx)(l.$n,{color:"secondary",onClick:W,children:"Fechar"})})]})]})}},94300:()=>{},98664:(e,n,a)=>{a.d(n,{A:()=>i});var r=a(9950),o=a(5393),c=a.n(o);function s(){return s=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},s.apply(this,arguments)}function l(e,n){if(null==e)return{};var a,r,o=function(e,n){if(null==e)return{};var a,r,o={},c=Object.keys(e);for(r=0;r<c.length;r++)a=c[r],n.indexOf(a)>=0||(o[a]=e[a]);return o}(e,n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)a=c[r],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var t=(0,r.forwardRef)(function(e,n){var a=e.color,o=void 0===a?"currentColor":a,c=e.size,t=void 0===c?24:c,i=l(e,["color","size"]);return r.createElement("svg",s({ref:n,xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:o,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},i),r.createElement("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),r.createElement("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),r.createElement("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),r.createElement("line",{x1:"3",y1:"10",x2:"21",y2:"10"}))});t.propTypes={color:c().string,size:c().oneOfType([c().string,c().number])},t.displayName="Calendar";const i=t}}]);