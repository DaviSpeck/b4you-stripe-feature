"use strict";(self.webpackChunksixbase_backoffice=self.webpackChunksixbase_backoffice||[]).push([[4890],{7609:(e,a,t)=>{t.d(a,{A:()=>s});var r=t(77265),o=t(44414);function s(e){let{size:a=24,className:t="",text:s="Carregando...",showText:n=!1}=e;return(0,o.jsxs)("div",{className:"d-flex flex-column align-items-center ".concat(t),children:[(0,o.jsx)(r.A,{size:a,style:{animation:"spin 1s linear infinite"}}),n&&(0,o.jsx)("span",{className:"mt-2 text-muted",children:s})]})}},25840:(e,a,t)=>{t.d(a,{n:()=>c});t(9950);var r=t(34964),o=t(98664),s=t(35203),n=t(77716),l=t(7609),i=t(44414);const c=e=>{let{title:a,range:t,setRange:c,stats:d,loading:m=!1,valueFormat:u="float"}=e;return(0,i.jsx)(s.Zp,{className:"h-100",children:(0,i.jsxs)(s.bw,{className:"d-flex flex-column gap-1",children:[(0,i.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-50",children:[(0,i.jsx)("h6",{className:"mb-0",children:a}),(0,i.jsxs)("div",{className:"d-flex align-items-center",style:{gap:6},children:[(0,i.jsx)(o.A,{size:14}),(0,i.jsx)(r.A,{className:"form-control form-control-sm bg-transparent border-0 shadow-none",style:{width:"180px"},placeholder:"Selecionar per\xedodo",value:t,onChange:e=>c(e),options:{mode:"range",dateFormat:"d/m/Y",locale:n.Portuguese}})]})]}),(0,i.jsx)(s.XI,{className:"table-sm mb-0",children:(0,i.jsx)("tbody",{children:d.map((e,a)=>{return(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:"pl-0",children:e.label}),(0,i.jsx)("td",{className:"text-right pr-0",style:{color:e.color||"inherit"},children:m?(0,i.jsx)(l.A,{}):(t=e.value,"string"===typeof t?t:"currency"===u?t.toLocaleString("pt-BR",{style:"currency",currency:"BRL",maximumFractionDigits:2}):"integer"===u?t.toLocaleString("pt-BR",{maximumFractionDigits:0}):t.toFixed(1))})]},a);var t})})})]})})}},28285:()=>{},54890:(e,a,t)=>{t.r(a),t.d(a,{default:()=>k});var r=t(89379),o=(t(28285),t(94300),t(11749)),s=t(59051),n=t.n(s),l=t(77716),i=t(9950),c=t(30639),d=t(13467),m=t(98664),u=t(868),h=t(30025),f=t(34964),g=t(96690),p=t(12449),x=t(35203),v=t(45530),y=t(62852),b=t(58790),j=t(25840),w=t(44414);n().locale("pt-br");const _={position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0},N=(0,o.A)(e=>[{name:"Data",cell:e=>null===e||void 0===e?void 0:e.onboarding.created_at},{name:"Email",cell:e=>e.email},{name:"Nome",cell:e=>(0,w.jsx)(g.N_,{to:"/producer/".concat(e.uuid),children:e.full_name})},{name:"Tipo de usu\xe1rio",cell:e=>(0,w.jsx)("b",{children:null===e||void 0===e?void 0:e.onboarding.user_type})},{name:"Instagram",cell:e=>{if(!e.instagram)return"-";const a=e.instagram.replace(/^@/,"");return(0,w.jsx)("a",{href:"https://www.instagram.com/".concat(a),target:"_blank",rel:"noreferrer",children:e.instagram})}},{name:"TikTok",cell:e=>{if(!e.tiktok)return"-";let a=e.tiktok.replace(/^@/,"");return a.startsWith("https://")||(a="https://www.tiktok.com/@".concat(a)),(0,w.jsx)("a",{href:a,target:"_blank",rel:"noreferrer",children:e.tiktok})}},{name:"Documento",cell:e=>e.document_number},{name:"Ver detalhes",cell:a=>(0,w.jsx)(x.Ex,{color:"primary",className:"view-details cursor-pointer",onClick:()=>e({showModalDetails:!0,row:a}),children:(0,w.jsx)(h.A,{size:40})}),center:!0}]),k=()=>{const{skin:e}=(0,d.h)(),[a,t]=(0,i.useState)(""),[o,s]=(0,i.useState)([]),[h,g]=(0,i.useState)(0),[k,M]=(0,i.useState)(10),[S,D]=(0,i.useState)(!1),[C,Y]=(0,i.useState)(!1),[F,A]=(0,i.useState)([]),[E,O]=(0,i.useState)({total:0,creator:0,marca:0,avg:0}),z=(e,a)=>{const[t,r]=(0,i.useState)(e);return(0,i.useEffect)(()=>{const t=setTimeout(()=>r(e),a);return()=>clearTimeout(t)},[e,a]),t},{ModalDetails:T,setModalDetails:R}=(0,y.$x)(),[P,B]=(0,i.useState)({calendar:[n()().startOf("month").toDate(),n()().endOf("month").toDate()]}),[J,I]=(0,i.useState)({signup_reason:"",has_sold:"",revenue:"",user_type:""}),[L,H]=(0,i.useState)([]),[Q,q]=(0,i.useState)(null),[W,$]=(0,i.useState)(!1),[U,V]=(0,i.useState)({card1:!1,card2:!1,card3:!1,card4:!1}),[Z,K]=(0,i.useState)(2),[X,G]=(0,i.useState)([]),[ee,ae]=(0,i.useState)({total:0,creator:0,marca:0,avg:0}),[te,re]=(0,i.useState)(!1),[oe,se]=(0,i.useState)([]),[ne,le]=(0,i.useState)({total:0,creator:0,marca:0,avg:0}),[ie,ce]=(0,i.useState)(!1),[de,me]=(0,i.useState)([]),[ue,he]=(0,i.useState)({total:0,creator:0,marca:0,avg:0}),[fe,ge]=(0,i.useState)(!1),[pe,xe]=(0,i.useState)([]),[ve,ye]=(0,i.useState)({total:0,creator:0,marca:0,avg:0}),[be,je]=(0,i.useState)(!1),[we,_e]=(0,i.useState)(!0),Ne=(0,i.useRef)(null),ke=async(e,a,t)=>{const o=n()(e).startOf("day"),s=n()(a).endOf("day"),l=s.diff(o,"days")+1;try{const e=o.format("YYYY-MM-DD HH:mm:ss"),a={start_date:e,end_date:s.format("YYYY-MM-DD HH:mm:ss"),user_type:t||void 0},{data:n}=await v.F.get("onboarding/daily",{params:a}),i=new Map;(n||[]).forEach(e=>{var a,t,r;i.set(e.date,{creator:Number(null!==(a=e.creator)&&void 0!==a?a:0),marca:Number(null!==(t=e.marca)&&void 0!==t?t:0),total:Number(null!==(r=e.total)&&void 0!==r?r:0)})});const c=[],d=o.clone();for(;d.isSameOrBefore(s,"day");){const e=d.format("YYYY-MM-DD"),a=i.get(e)||{creator:0,marca:0,total:0};c.push((0,r.A)({date:e},a)),d.add(1,"day")}const m=c.reduce((e,a)=>({total:e.total+a.total,creator:e.creator+a.creator,marca:e.marca+a.marca}),{total:0,creator:0,marca:0}),u=l>0?m.total/l:0;return{total:m.total,creator:m.creator,marca:m.marca,avg:u}}catch(i){return console.error("Erro ao calcular estat\xedsticas de onboarding:",i),{total:0,creator:0,marca:0,avg:0}}},Me=(0,i.useCallback)(async()=>{if(null!==X&&void 0!==X&&X.length&&2===X.length){re(!0);try{const e=await ke(X[0],X[1],J.user_type);ae(e),V(e=>(0,r.A)((0,r.A)({},e),{},{card1:!0}))}catch(e){console.error("Erro ao carregar dados do Card 1:",e),ae({total:0,creator:0,marca:0,avg:0})}re(!1)}},[X,J.user_type]),Se=(0,i.useCallback)(async()=>{if(null!==oe&&void 0!==oe&&oe.length&&2===oe.length){ce(!0);try{const e=await ke(oe[0],oe[1],J.user_type);le(e),V(e=>(0,r.A)((0,r.A)({},e),{},{card2:!0}))}catch(e){console.error("Erro ao carregar dados do Card 2:",e),le({total:0,creator:0,marca:0,avg:0})}ce(!1)}},[oe,J.user_type]),De=(0,i.useCallback)(async()=>{if(null!==de&&void 0!==de&&de.length&&2===de.length){ge(!0);try{const e=await ke(de[0],de[1],J.user_type);he(e),V(e=>(0,r.A)((0,r.A)({},e),{},{card3:!0}))}catch(e){console.error("Erro ao carregar dados do Card 3:",e),he({total:0,creator:0,marca:0,avg:0})}ge(!1)}},[de,J.user_type]),Ce=(0,i.useCallback)(async()=>{if(null!==pe&&void 0!==pe&&pe.length&&2===pe.length){je(!0);try{const e=await ke(pe[0],pe[1],J.user_type);ye(e),V(e=>(0,r.A)((0,r.A)({},e),{},{card4:!0}))}catch(e){console.error("Erro ao carregar dados do Card 4:",e),ye({total:0,creator:0,marca:0,avg:0})}je(!1)}},[pe,J.user_type]),Ye=e=>{const a=n()().endOf("day"),t=a.clone().subtract(e-1,"days").startOf("day");Re([t.toDate(),a.toDate()]),B(e=>(0,r.A)((0,r.A)({},e),{},{calendar:[t.toDate(),a.toDate()]}))},Fe=z(P.calendar,350),Ae=z(J.user_type,250),Ee=(0,i.useMemo)(()=>"creator"===Ae?["creator"]:"marca"===Ae?["marca"]:["creator","marca","total"],[Ae]),Oe=(0,i.useCallback)(async()=>{try{const e=await v.F.get("/onboarding/version-combinations",{params:{start_date:n()(P.calendar[0]).format("YYYY-MM-DD"),end_date:n()(P.calendar[1]).format("YYYY-MM-DD")}});H(e.data||[])}catch(e){console.error("Erro ao buscar combina\xe7\xf5es de vers\xf5es:",e)}},[P.calendar]),ze=(0,i.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;D(!0);try{const r={page:e,size:null!==t&&void 0!==t?t:k,input:a,start_date:n()(P.calendar[0]).format("YYYY-MM-DD"),end_date:n()(P.calendar[1]).format("YYYY-MM-DD"),has_sold:J.has_sold,revenue:J.revenue,signup_reason:J.signup_reason,user_type:J.user_type};Q&&(null!==Q.creator_version&&(r.creator_version=Q.creator_version),null!==Q.marca_version&&(r.marca_version=Q.marca_version));const o=await v.F.get("onboarding",{params:r});s(o.data.rows),g(o.data.count)}catch(r){console.error(r)}D(!1)},[a,P.calendar,J,k,Q]),[Te,Re]=(0,i.useState)([P.calendar[0],P.calendar[1]]);(0,i.useEffect)(()=>{Re([P.calendar[0],P.calendar[1]])},[P.calendar]),(0,i.useEffect)(()=>{(async()=>{_e(!0);try{const e=n()(Fe[0]).startOf("day").format("YYYY-MM-DD HH:mm:ss"),a={start_date:e,end_date:n()(Fe[1]).endOf("day").format("YYYY-MM-DD HH:mm:ss"),user_type:Ae||void 0},{data:t}=await v.F.get("onboarding/daily",{params:a}),o=new Map;(t||[]).forEach(e=>{var a,t,r;o.set(e.date,{creator:Number(null!==(a=e.creator)&&void 0!==a?a:0),marca:Number(null!==(t=e.marca)&&void 0!==t?t:0),total:Number(null!==(r=e.total)&&void 0!==r?r:0)})});const s=n()(Fe[0]).startOf("day"),l=n()(Fe[1]).endOf("day"),i=[],c=s.clone();for(;c.isSameOrBefore(l,"day");){const e=c.format("YYYY-MM-DD"),a=o.get(e)||{creator:0,marca:0,total:0};i.push((0,r.A)({date:e},a)),c.add(1,"day")}A(i);const d=i.reduce((e,a)=>({total:e.total+(a.total||0),creator:e.creator+(a.creator||0),marca:e.marca+(a.marca||0)}),{total:0,creator:0,marca:0}),m=n()().endOf("day");let u=(l.isAfter(m)?m:l).diff(s,"days")+1;u<=0&&(u=1);const h=d.total/u;O({total:d.total,creator:d.creator,marca:d.marca,avg:h})}catch(e){console.error("[onboarding/daily] erro: ",e)}finally{_e(!1)}})()},[Fe,Ae]),(0,i.useEffect)(()=>{(0===a.length||a.trim().length>0)&&ze(0)},[a,ze]),(0,i.useEffect)(()=>{Oe()},[Oe]);const Pe=(0,i.useMemo)(()=>J.user_type?"creator"===J.user_type?L.filter(e=>null!==e.creator_version):"marca"===J.user_type?L.filter(e=>null!==e.marca_version):L:L,[L,J.user_type]);(0,i.useEffect)(()=>{ze(0)},[Q]),(0,i.useEffect)(()=>{V({card1:!1,card2:!1,card3:!1,card4:!1})},[X,oe,de,pe,J.user_type]),(0,i.useEffect)(()=>{W&&!U.card1&&Me()},[W,U.card1,Me]),(0,i.useEffect)(()=>{W&&!U.card2&&Se()},[W,U.card2,Se]),(0,i.useEffect)(()=>{W&&!U.card3&&De()},[W,U.card3,De]),(0,i.useEffect)(()=>{W&&Z>=4&&!U.card4&&Ce()},[W,Z,U.card4,Ce]);const Be=e=>{const{name:a,value:t}=e.currentTarget;I(e=>(0,r.A)((0,r.A)({},e),{},{[a]:t})),"user_type"===a&&q(null)};return(0,w.jsxs)("div",{children:[(0,w.jsx)("div",{className:"d-flex justify-content-between align-items-center mb-2",children:(0,w.jsx)("h3",{className:"mb-1",children:"Onboarding"})}),(0,w.jsx)(T,{}),(0,w.jsx)(x.Zp,{children:(0,w.jsxs)(x.bw,{children:[(0,w.jsxs)("div",{className:"d-flex flex-column flex-md-row align-items-start align-items-md-center justify-content-between mb-2 gap-2",children:[(0,w.jsxs)("div",{className:"d-flex align-items-center",children:[(0,w.jsx)(m.A,{size:15,className:"ml-1 mr-1"}),(0,w.jsx)(f.A,{className:"form-control flat-picker bg-transparent border-0 shadow-none",style:{width:"100%",minWidth:200,maxWidth:215},value:Te,onChange:e=>{if(Re(e),e&&2===e.length){const[a,t]=e;let o=n()(a).startOf("day"),s=n()(t).endOf("day");B(e=>(0,r.A)((0,r.A)({},e),{},{calendar:[o.toDate(),s.toDate()]}))}},options:{mode:"range",dateFormat:"d/m/Y",locale:l.Portuguese}})]}),(0,w.jsxs)("div",{className:"d-flex align-items-center",children:[(0,w.jsx)(x.JU,{className:"mb-0 mr-2",style:{whiteSpace:"nowrap"},children:"Tipo de usu\xe1rio"}),(0,w.jsxs)(x.pd,{type:"select",name:"user_type",value:J.user_type,onChange:Be,style:{width:"100%",minWidth:150,maxWidth:200},children:[(0,w.jsx)("option",{value:"",children:"Todos"}),(0,w.jsx)("option",{value:"creator",children:"Creator"}),(0,w.jsx)("option",{value:"marca",children:"Produtor"})]})]})]}),(0,w.jsxs)("div",{className:"d-flex flex-column flex-lg-row align-items-start align-items-lg-center justify-content-between flex-wrap mb-2 gap-2",children:[(0,w.jsxs)("div",{className:"d-flex flex-wrap gap-1",children:[(0,w.jsx)(x.$n,{size:"sm",color:"primary",onClick:()=>Ye(1),children:"Hoje"}),(0,w.jsx)(x.$n,{size:"sm",color:"primary",onClick:()=>Ye(7),children:"7 dias"}),(0,w.jsx)(x.$n,{size:"sm",color:"primary",onClick:()=>Ye(15),children:"15 dias"}),(0,w.jsx)(x.$n,{size:"sm",color:"primary",onClick:()=>Ye(30),children:"30 dias"}),(0,w.jsx)(x.$n,{size:"sm",color:"primary",onClick:()=>Ye(60),children:"60 dias"}),(0,w.jsx)(x.$n,{size:"sm",color:"primary",onClick:()=>Ye(90),children:"90 dias"})]}),(0,w.jsxs)("div",{className:"d-flex flex-wrap gap-3 align-items-center",children:[(0,w.jsxs)("div",{className:"text-center",children:[(0,w.jsx)("div",{className:"text-muted small",children:"Total"}),(0,w.jsx)("div",{className:"h6 mb-0 font-weight-bold text-primary",children:E.total.toLocaleString()})]}),(0,w.jsxs)("div",{className:"text-center",children:[(0,w.jsx)("div",{className:"text-muted small",children:"Creators"}),(0,w.jsx)("div",{className:"h6 mb-0 font-weight-bold text-danger",children:E.creator.toLocaleString()})]}),(0,w.jsxs)("div",{className:"text-center",children:[(0,w.jsx)("div",{className:"text-muted small",children:"Marcas"}),(0,w.jsx)("div",{className:"h6 mb-0 font-weight-bold text-warning",children:E.marca.toLocaleString()})]}),(0,w.jsxs)("div",{className:"text-center",children:[(0,w.jsx)("div",{className:"text-muted small",children:"M\xe9dia Di\xe1ria"}),(0,w.jsx)("div",{className:"h6 mb-0 font-weight-bold text-success",children:E.avg.toFixed(1)})]})]})]}),(0,w.jsx)("div",{style:{width:"100%",overflowX:"auto",minHeight:250},children:(0,w.jsx)(b.A,{data:F,series:Ee,height:"undefined"!==typeof window&&window.innerWidth<768?250:300,valueFormat:"integer",loading:we})})]})}),(0,w.jsxs)(x.Zp,{className:"mt-1 mb-2",style:{willChange:"auto"},children:[(0,w.jsxs)(x.aR,{className:"d-flex justify-content-between align-items-center",children:[(0,w.jsx)("h6",{className:"mb-0 d-flex align-items-center",style:{gap:8},children:"KPIs Personalizados - Onboarding"}),(0,w.jsxs)("button",{type:"button",className:"btn btn-sm btn-outline-primary d-flex align-items-center",onClick:()=>$(e=>!e),style:{gap:6},children:[W?"Ocultar":"Exibir",(0,w.jsx)(u.A,{size:16,style:{transition:"transform 320ms cubic-bezier(0.22, 1, 0.36, 1)",transform:W?"rotate(180deg)":"rotate(0deg)"}})]})]}),(0,w.jsx)("div",{ref:Ne,style:{overflow:"hidden",willChange:"max-height, opacity",transition:"max-height 480ms cubic-bezier(0.22, 1, 0.36, 1), opacity 360ms ease-out",maxHeight:W?9999:0,opacity:W?1:0},children:(0,w.jsx)(x.bw,{children:W&&(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)(x.fI,{className:"align-items-start justify-content-between g-2",style:{rowGap:"1.5rem"},children:[(0,w.jsx)(x.fv,{xl:2===Z?6:3===Z?4:6,lg:2===Z?6:3===Z?4:6,md:2===Z?6:3===Z?4:12,sm:12,children:(0,w.jsx)(j.n,{title:"Per\xedodo 1",range:X,setRange:G,stats:[{label:"Total Onboarding",value:ee.total,color:"#4dd0bc"},{label:"Creators",value:ee.creator,color:"#d04d62"},{label:"Marcas",value:ee.marca,color:"#F59E0B"},{label:"M\xe9dia Di\xe1ria",value:ee.avg}],loading:te,valueFormat:"integer"})}),Z>=2&&(0,w.jsx)(x.fv,{xl:2===Z?6:3===Z?4:6,lg:2===Z?6:3===Z?4:6,md:2===Z?6:3===Z?4:12,sm:12,children:(0,w.jsx)(j.n,{title:"Per\xedodo 2",range:oe,setRange:se,stats:[{label:"Total Onboarding",value:ne.total,color:"#4dd0bc"},{label:"Creators",value:ne.creator,color:"#d04d62"},{label:"Marcas",value:ne.marca,color:"#F59E0B"},{label:"M\xe9dia Di\xe1ria",value:ne.avg}],loading:ie,valueFormat:"integer"})}),Z>=3&&(0,w.jsx)(x.fv,{xl:3===Z?4:6,lg:3===Z?4:6,md:3===Z?4:12,sm:12,children:(0,w.jsx)(j.n,{title:"Per\xedodo 3",range:de,setRange:me,stats:[{label:"Total Onboarding",value:ue.total,color:"#4dd0bc"},{label:"Creators",value:ue.creator,color:"#d04d62"},{label:"Marcas",value:ue.marca,color:"#F59E0B"},{label:"M\xe9dia Di\xe1ria",value:ue.avg}],loading:fe,valueFormat:"integer"})}),Z>=4&&(0,w.jsx)(x.fv,{xl:6,lg:6,md:12,sm:12,children:(0,w.jsx)(j.n,{title:"Per\xedodo 4",range:pe,setRange:xe,stats:[{label:"Total Onboarding",value:ve.total,color:"#4dd0bc"},{label:"Creators",value:ve.creator,color:"#d04d62"},{label:"Marcas",value:ve.marca,color:"#F59E0B"},{label:"M\xe9dia Di\xe1ria",value:ve.avg}],loading:be,valueFormat:"integer"})})]})})})})]}),(0,w.jsxs)(x.Zp,{children:[(0,w.jsx)(x.aR,{children:(0,w.jsxs)("div",{className:"d-flex flex-column gap-2 w-100",children:[(0,w.jsxs)("div",{className:"d-flex flex-column w-100",children:[(0,w.jsx)(x.JU,{className:"mb-1",children:"Filtrar por: Nome e E-mail"}),(0,w.jsx)(x.pd,{onChange:e=>{let{target:a}=e;setTimeout(()=>{t(a.value)},300)},style:{borderRadius:"8px"},placeholder:"Digite para filtrar\u2026"})]}),(0,w.jsx)("div",{className:"d-flex flex-column w-100",children:(0,w.jsxs)("div",{className:"d-flex gap-2 w-100 align-items-end",children:[(0,w.jsxs)("div",{className:"d-flex flex-column",style:{flex:1},children:[(0,w.jsx)(x.JU,{className:"mb-1",children:"Tipo de usu\xe1rio"}),(0,w.jsxs)(x.pd,{type:"select",name:"user_type",value:J.user_type,onChange:Be,style:{borderRadius:"8px"},children:[(0,w.jsx)("option",{value:"",children:"Todos"}),(0,w.jsx)("option",{value:"creator",children:"Creator"}),(0,w.jsx)("option",{value:"marca",children:"Marca"})]})]}),(0,w.jsxs)("div",{className:"d-flex flex-column",style:{flex:1},children:[(0,w.jsx)(x.JU,{className:"mb-1",children:"Vers\xe3o do formul\xe1rio"}),(0,w.jsxs)(x.pd,{type:"select",value:Q?JSON.stringify(Q):"",onChange:e=>{e.target.value?q(JSON.parse(e.target.value)):q(null)},style:{borderRadius:"8px"},children:[(0,w.jsx)("option",{value:"",children:"Todas as vers\xf5es (apenas ativas)"}),Pe.map((e,a)=>(0,w.jsxs)("option",{value:JSON.stringify({creator_version:e.creator_version,marca_version:e.marca_version}),children:[e.label," (",e.count," resposta",1!==e.count?"s":"",")"]},a))]})]}),(0,w.jsx)(x.$n,{color:"primary",style:{borderRadius:"8px",flexShrink:0},onClick:()=>{p.oR.success("Exportando... Essa opera\xe7\xe3o pode demorar",_),Y(!0),v.F.get("onboarding/export",{responseType:"blob",params:{format:"xlsx",has_sold:J.has_sold,revenue:J.revenue,signup_reason:J.signup_reason,user_type:J.user_type,input:a,start_date:n()(P.calendar[0]).format("YYYY-MM-DD"),end_date:n()(P.calendar[1]).format("YYYY-MM-DD")}}).then(e=>{const a=window.URL.createObjectURL(new Blob([e.data])),t=document.createElement("a");t.href=a,t.setAttribute("download","onboarding.xlsx"),document.body.appendChild(t),t.click()}).catch(()=>p.oR.error("Erro ao baixar arquivo",_)).finally(()=>Y(!1))},children:C?"Baixando...":"Exportar"})]})})]})}),(0,w.jsx)(x.bw,{children:(0,w.jsx)(c.Ay,{columns:N(R),data:o,progressPending:S,pagination:!0,paginationServer:!0,paginationTotalRows:h,onChangeRowsPerPage:async(e,a)=>{await ze(a-1,e),M(e)},onChangePage:e=>{ze(e-1)},paginationComponentOptions:{rowsPerPageText:"Linhas por p\xe1gina:",rangeSeparatorText:"de",noRowsPerPage:!1},progressComponent:(0,w.jsx)(x.y$,{}),noDataComponent:(0,w.jsx)(w.Fragment,{children:"Nenhum registro encontrado"}),theme:"dark"===e?"solarized":"solarizedLight",className:"react-dataTable"})})]})]})}},55750:(e,a,t)=>{t.d(a,{Ai:()=>f,Em:()=>u,IP:()=>o,Jy:()=>s,P3:()=>i,PI:()=>l,St:()=>n,Vz:()=>m,hG:()=>c,sr:()=>d,vh:()=>h});var r=t(45530);async function o(e){const{data:a}=await r.F.get("/backoffice/forms",{params:e});return a}async function s(e){const{data:a}=await r.F.get("/backoffice/forms/".concat(e));return a}async function n(e){const{data:a}=await r.F.post("/backoffice/forms",e);return a}async function l(e,a){const{data:t}=await r.F.put("/backoffice/forms/".concat(e),a);return t}async function i(e){await r.F.delete("/backoffice/forms/".concat(e))}async function c(e,a){const{data:t}=await r.F.post("/backoffice/forms/".concat(e,"/questions"),a);return t}async function d(e,a){const{data:t}=await r.F.put("/backoffice/forms/questions/".concat(e),a);return t}async function m(e){await r.F.delete("/backoffice/forms/questions/".concat(e))}async function u(e){const{data:a}=await r.F.post("/backoffice/forms/".concat(e,"/publish"),{});return a}async function h(e,a){await r.F.post("/backoffice/forms/".concat(e,"/reorder"),{orders:a})}async function f(e,a){const t=new URLSearchParams;null!==a&&void 0!==a&&a.page&&t.append("page",a.page.toString()),null!==a&&void 0!==a&&a.limit&&t.append("limit",a.limit.toString()),null!==a&&void 0!==a&&a.search&&t.append("search",a.search),null!==a&&void 0!==a&&a.event_type&&t.append("event_type",a.event_type),null!==a&&void 0!==a&&a.start_date&&t.append("start_date",a.start_date),null!==a&&void 0!==a&&a.end_date&&t.append("end_date",a.end_date);const{data:o}=await r.F.get("/backoffice/forms/".concat(e,"/logs?").concat(t.toString()));return o.data}},58790:(e,a,t)=>{t.d(a,{A:()=>y});var r=t(25102),o=t(16335),s=t(81095),n=t(71876),l=t(97827),i=t(93245),c=t(56473),d=t(60158),m=t(44813),u=t(2847),h=t(59051),f=t.n(h),g=t(9950),p=t(44414);const x={total:"#4dd0bb",creator:"#d04d62",creator_registered:"#8b5cf6",marca:"#F59E0B",ma7:"#8884d8",faturamento:"#4dd0bb",vendas:"#d04d62",cliques:"#F59E0B"},v={total:"Total",creator:"Creators",creator_registered:"Afiliados(qualificados como Creators)",marca:"Marca",ma7:"M\xe9dia m\xf3vel (7 dias)",faturamento:"Faturamento",vendas:"Vendas",cliques:"Cliques"};function y(e){let{data:a,series:t=["total"],height:h=260,valueFormat:y="currency",description:b,markers:j=[],loading:w}=e;const[_,N]=g.useState("undefined"!==typeof window?window.innerWidth:1920);g.useEffect(()=>{if("undefined"===typeof window)return;const e=()=>{N(window.innerWidth)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const k=g.useMemo(()=>new Intl.NumberFormat("pt-BR",{notation:"compact",compactDisplay:"short",maximumFractionDigits:1}),[]),M=g.useMemo(()=>{if(!a||0===a.length)return 0;const e=f()(a[0].date),t=f()(a[a.length-1].date).diff(e,"days");return t>=59?Math.max(1,Math.floor(a.length/6)):t>=30?Math.max(1,Math.floor(a.length/10)):t>=7?Math.max(1,Math.floor(a.length/7)):0},[a]),S=g.useCallback(e=>{if(!a||0===a.length)return f()(e).format("DD/MM");const t=f()(a[0].date),r=f()(a[a.length-1].date).diff(t,"days");if(r>=59){const a=["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],t=f()(e),r=a[t.month()],o=t.format("YY");return"".concat(r,"/").concat(o)}return f()(e).format("DD/MM")},[a]),D=g.useMemo(()=>_<576?{top:20,right:10,bottom:40,left:10}:_<768?{top:24,right:16,bottom:30,left:16}:{top:28,right:32,bottom:12,left:32},[_]),C=_<576;return(0,p.jsx)("div",{style:{width:"100%",height:h,position:"relative",minHeight:200},children:w?(0,p.jsx)("div",{style:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center",opacity:.8},children:(0,p.jsx)("div",{className:"spinner-border text-[#d0d2d7]",role:"status",children:(0,p.jsx)("span",{className:"visually-hidden",children:"Carregando..."})})}):a&&a.length>0?(0,p.jsx)(s.u,{width:"100%",height:"100%",debounce:200,children:(0,p.jsxs)(u.b,{data:a,className:"line-chart",margin:D,children:[(0,p.jsx)(i.d,{strokeDasharray:"3 3"}),(0,p.jsx)(d.W,{dataKey:"date",tickFormatter:S,interval:M,angle:C?-45:0,textAnchor:C?"end":"middle",height:C?60:void 0,tick:{fontSize:C?10:12}}),(0,p.jsx)(m.h,{allowDecimals:!1,tickFormatter:e=>k.format(Number(e||0)),domain:[0,"dataMax"],width:C?40:60,tick:{fontSize:C?10:12}}),(0,p.jsx)(o.m,{labelFormatter:e=>f()(e).format("DD/MM/YYYY"),formatter:(e,a)=>{const t=Number(e||0);let r;return r="integer"===y?new Intl.NumberFormat("pt-BR",{maximumFractionDigits:0}).format(t):new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",maximumFractionDigits:2}).format(t),[r,b?"".concat(a," - ").concat(b):a]},contentStyle:{fontSize:C?"12px":"14px",padding:C?"8px":"12px"}}),(0,p.jsx)(r.s,{wrapperStyle:{fontSize:C?"11px":"14px",paddingTop:C?"10px":"20px"}}),j.map((e,a)=>(0,p.jsx)(l.r,{x:e.date,y:e.value,r:5,fill:e.color||"#6C5CE7",stroke:"none",isFront:!0,ifOverflow:"hidden",children:(0,p.jsx)(n.J,{value:e.label,position:e.labelPosition||"top",offset:e.labelOffset,fill:e.color||"#6C5CE7"})},"mk-".concat(a))),t.map(e=>(0,p.jsx)(c.N,{type:"monotone",dataKey:e,name:v[e],stroke:x[e],dot:!1,strokeWidth:2,isAnimationActive:!1},e))]})}):(0,p.jsx)("div",{style:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center",color:"#999",fontSize:"0.9rem"},children:"Sem dados dispon\xedveis"})})}},62852:(e,a,t)=>{t.d(a,{$x:()=>u,gx:()=>i});var r=t(89379),o=t(9950),s=t(35203),n=t(55750),l=t(44414);const i={creator:{has_experience_as_creator_or_affiliate:"J\xe1 teve experi\xeancia como creators ou afiliados?",nicho:"Com quais nichos voc\xea se identifica?",nicho_other:"Qual?",audience_size:"Qual o tamanho da sua audi\xeancia (seguidores)?",tiktok:"TikTok",instagram:"Instagram",origem:"Como voc\xea descobriu a B4YOU?",origem_other:"Qual?"},marca:{business_model:"Qual o seu modelo de neg\xf3cio?",business_model_other:"Qual?",nicho:"Com quais nichos voc\xea se identifica?",nicho_other:"Qual?",company_size:"Quantos funcion\xe1rios sua empresa possui?",worked_with_affiliates:"J\xe1 trabalhou com creators ou afiliados?",invested_in_affiliates:"Quanto voc\xea j\xe1 investiu em campanhas?",worked_another_platform:"J\xe1 trabalhou com outra plataforma?",platform:"Qual plataforma?",platform_other:"Qual?",origem:"Como voc\xea descobriu a B4YOU?",origem_other:"Qual?",tiktok:"TikTok",instagram:"Instagram",revenue:"Faturamento mensal?"}},c={2:"Creator",3:"Marca"},d=e=>null===e||void 0===e||""===e?"-":Array.isArray(e)?e.join(", "):"boolean"===typeof e?e?"Sim":"N\xe3o":"object"===typeof e?JSON.stringify(e):String(e),m=e=>{let{row:a,showModalDetails:t,setShowModalDetails:r}=e;const{onboarding:m,form:u}=a||{},[h,f]=(0,o.useState)([]),[g,p]=(0,o.useState)(!1);(0,o.useEffect)(()=>{(async()=>{if(null!==u&&void 0!==u&&u.id&&t){p(!0);try{const e=await(0,n.Jy)(u.id);f(e.questions||[])}catch(e){console.error("Erro ao carregar perguntas do formul\xe1rio:",e),f([])}finally{p(!1)}}else f([])})()},[null===u||void 0===u?void 0:u.id,t]);const x=(0,o.useMemo)(()=>i[(null===m||void 0===m?void 0:m.user_type)||""]||{},[null===m||void 0===m?void 0:m.user_type]),v=(0,o.useMemo)(()=>m?h.length>0?h.sort((e,a)=>e.order-a.order).map(e=>({key:e.key,label:e.label,value:d(m[e.key])})):Object.entries(m).filter(e=>{let[a]=e;return"user_type"!==a&&"created_at"!==a&&"date"!==a&&"time"!==a}).map(e=>{let[a,t]=e;return{key:a,label:x[a]||a,value:d(t)}}):[],[h,m,x]);return m?(0,l.jsxs)(s.aF,{isOpen:t,toggle:()=>r(!1),centered:!0,size:"lg",children:[(0,l.jsx)(s.rQ,{toggle:()=>r(!1),children:"Onboarding - ".concat(m.user_type)}),(0,l.jsxs)(s.cw,{children:[u&&(0,l.jsxs)("div",{className:"d-flex align-items-center gap-2 mb-2 mt-1",children:[(0,l.jsx)("strong",{children:"Formul\xe1rio preenchido:"}),(0,l.jsxs)("div",{children:[u.title," \u2014 ",c[u.form_type]," \xb7 v",u.version]})]}),(0,l.jsx)(s.XI,{hover:!0,children:(0,l.jsx)("tbody",{children:g?(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:2,className:"text-center",children:"Carregando perguntas..."})}):0===v.length?(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:2,className:"text-center text-muted",children:"Nenhuma pergunta encontrada"})}):v.map(e=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{scope:"row",children:e.label}),(0,l.jsx)("td",{children:e.value})]},e.key))})})]})]}):null},u=()=>{const[e,a]=(0,o.useState)({showModalDetails:!1,row:{}}),t=(0,o.useCallback)(()=>(0,l.jsx)(m,{row:e.row,showModalDetails:e.showModalDetails,setShowModalDetails:e=>a(a=>(0,r.A)((0,r.A)({},a),{},{showModalDetails:e}))}),[e]);return(0,o.useMemo)(()=>({ModalDetails:t,setModalDetails:a}),[t])}},94300:()=>{}}]);