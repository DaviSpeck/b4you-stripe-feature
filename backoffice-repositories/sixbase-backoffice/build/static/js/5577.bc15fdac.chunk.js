"use strict";(self.webpackChunksixbase_backoffice=self.webpackChunksixbase_backoffice||[]).push([[5577],{5577:(e,s,a)=>{a.r(s),a.d(s,{default:()=>Y});var r=a(89379),t=a(9950),n=a(30639),o=a(35203),i=a(45530),d=a(11749),l=a(59051),c=a.n(l),m=a(56065),h=a(60820),u=a(69490),x=a(98664),p=a(18977),j=a(21333),g=a(12116),v=a(66146),b=a(56728),f=a(96690),N=a(58301),y=a(95875),S=a(78045),w=a(48989),k=a(44414);const C=e=>{let{banner:s,index:a,onDelete:t}=e;const{attributes:n,listeners:i,setNodeRef:d,transform:l,transition:c,isDragging:m}=(0,S.gl)({id:s.uuid}),h={transform:w.Ks.Transform.toString(l),transition:c,opacity:m?.5:1,cursor:m?"grabbing":"move"};return(0,k.jsxs)("tr",(0,r.A)((0,r.A)({ref:d,style:h},n),{},{className:"sortable-row",children:[(0,k.jsx)("td",{style:{width:40},children:(0,k.jsx)(o.$n,(0,r.A)((0,r.A)({color:"light",className:"p-0",style:{cursor:m?"grabbing":"grab",background:"#343d55",border:"none",boxShadow:"none"}},i),{},{children:(0,k.jsx)("i",{className:"bx bx-dots-vertical-rounded",style:{fontSize:20,color:"#6c757d"}})}))}),(0,k.jsx)("td",{children:(0,k.jsx)("span",{className:"badge",color:"primary",style:{backgroundColor:"#343d55",color:"white"},children:a+1})}),(0,k.jsx)("td",{children:(0,k.jsx)("img",{src:s.file,alt:"",style:{maxWidth:200,maxHeight:100}})}),(0,k.jsx)("td",{children:(0,k.jsx)("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",children:s.url||"Sem link"})}),(0,k.jsx)("td",{className:"text-center",children:(0,k.jsx)(o.$n,{color:"danger",onClick:e=>{e.stopPropagation(),t(s)},className:"p-1",size:"sm",children:(0,k.jsx)("i",{className:"bx bx-trash-alt",style:{fontSize:16}})})})]}))},D=e=>{let{selectedType:s,onTypeChange:a,bannerTypeOptions:r,showLabel:t=!0,width:n=150}=e;return(0,k.jsxs)("div",{className:"d-flex align-items-center",children:[t&&(0,k.jsx)("label",{className:"mb-0 me-2",children:"Tipo:"}),(0,k.jsx)(o.pd,{type:"select",value:s,onChange:e=>a(Number(e.target.value)),style:{width:n},children:r.map(e=>(0,k.jsx)("option",{value:e.id,children:e.name},e.id))})]})};var R=a(12449);const A={position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0},I=e=>{let{apiEndpoint:s="market/images/banner",bannerTypeOptions:a=[{id:1,name:"Desktop"},{id:2,name:"Mobile"}],onOrderChange:n}=e;const[d,l]=(0,t.useState)([]),[m,h]=(0,t.useState)([]),[u,x]=(0,t.useState)([]),[p,j]=(0,t.useState)([]),[g,v]=(0,t.useState)(1),[b,f]=(0,t.useState)(!1),[N,S]=(0,t.useState)(!1),[w,I]=(0,t.useState)(!1);(0,t.useEffect)(()=>{P()},[]);const P=()=>{i.F.get(s).then(e=>{h(e.data)}).catch(e=>{var s,a,r,t;console.error("Erro ao carregar banners:",e),500===(null===(s=e.response)||void 0===s?void 0:s.status)&&null!==(a=e.response)&&void 0!==a&&null!==(r=a.data)&&void 0!==r&&null!==(t=r.message)&&void 0!==t&&t.includes("order")&&h([])})},z=async e=>{try{if(!e.uuid)return void R.oR.error("UUID do banner n\xe3o encontrado.",A);await i.F.delete("market/banners/".concat(e.uuid)),h(s=>s.filter(s=>s.uuid!==e.uuid)),R.oR.success("Imagem removida com sucesso!",A)}catch(s){R.oR.error("Erro ao excluir a imagem.",A),console.error("Erro ao deletar banner:",s)}},F=e=>{const s=m.map(s=>{const a=e.find(e=>e.uuid===s.uuid);if(a){const t=e.indexOf(a);return(0,r.A)((0,r.A)({},s),{},{order:t})}return s});h(s),S(!0),n&&n(s)},E=async()=>{try{var e;if(!N)return;f(!0);const s=_();if(0===s.length)return void R.oR.warn("Nenhum banner encontrado para reordenar.",A);const a=s.filter(e=>e.uuid).map((e,s)=>({uuid:e.uuid,order:s}));if(0===a.length)return void R.oR.warn("Nenhum banner v\xe1lido encontrado para reordenar.",A);const r=await i.F.put("market/banners/order",{banners:a});null!==(e=r.data)&&void 0!==e&&e.message?R.oR.info(r.data.message,A):(R.oR.success("Ordem dos banners atualizada com sucesso!",A),P(),S(!1))}catch(r){var s,a;console.error("Erro ao salvar ordem:",r),null!==(s=r.response)&&void 0!==s&&null!==(a=s.data)&&void 0!==a&&a.message?R.oR.error(r.response.data.message,A):R.oR.error("Erro ao salvar ordem dos banners.",A)}finally{f(!1)}},_=e=>{const s=e||g;return m.filter(e=>e.type&&e.type.id===s&&e.uuid).sort((e,s)=>(e.order||0)-(s.order||0))};return(0,k.jsxs)("section",{children:[(0,k.jsx)("div",{className:"d-flex justify-content-between align-items-center",children:(0,k.jsx)("h2",{className:"mb-2",children:"Gerenciar Banners"})}),(0,k.jsx)("div",{className:"mb-2",children:0===m.length&&(0,k.jsxs)("div",{className:"alert alert-info",children:[(0,k.jsx)("strong",{children:"Informa\xe7\xe3o:"})," Nenhum banner encontrado. Adicione novos banners usando o formul\xe1rio abaixo."]})}),(()=>{var e;const s=_(),r=(null===(e=a.find(e=>e.id===g))||void 0===e?void 0:e.name)||"Desktop";return(0,k.jsxs)(o.Zp,{className:"mb-3",children:[(0,k.jsx)(o.aR,{children:(0,k.jsxs)("div",{className:"d-flex justify-content-between align-items-center w-100",children:[(0,k.jsxs)("div",{className:"d-flex align-items-center",children:[(0,k.jsxs)("h5",{className:"mb-0 me-3",children:[r," (",s.length," banners)"]}),(0,k.jsx)(D,{selectedType:g,onTypeChange:v,bannerTypeOptions:a})]}),(0,k.jsx)("div",{className:"d-flex align-items-center gap-2",children:w?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(o.$n,{color:"secondary",onClick:()=>{I(!1),S(!1)},size:"sm",children:[(0,k.jsx)("i",{className:"bx bx-x me-1"}),"Parar de Editar"]}),(0,k.jsx)(o.$n,{color:"success",onClick:E,disabled:!N||b,size:"sm",children:b?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("span",{className:"spinner-border spinner-border-sm me-1",role:"status","aria-hidden":"true"}),"Salvando..."]}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("i",{className:"bx bx-check me-1"}),"Salvar Ordem"]})})]}):(0,k.jsxs)(o.$n,{color:"primary",onClick:()=>I(!0),size:"sm",children:[(0,k.jsx)("i",{className:"bx bx-edit me-1"}),"Editar Ordem"]})})]})}),(0,k.jsx)(o.bw,{children:w?(0,k.jsxs)(y.A,{items:s,onReorder:F,getItemId:e=>e.uuid,renderItem:(e,s)=>(0,k.jsx)(C,{banner:e,index:s,onDelete:z},e.uuid),renderDragOverlay:e=>(0,k.jsx)("div",{className:"p-1 d-flex align-items-center",style:{background:"#161d31",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",borderRadius:4},children:(0,k.jsx)("img",{src:e.file,alt:"",style:{width:120,height:60,objectFit:"cover",marginRight:8}})}),children:[(0,k.jsx)("thead",{children:(0,k.jsxs)("tr",{children:[(0,k.jsx)("th",{style:{width:40}}),(0,k.jsx)("th",{children:"Ordem"}),(0,k.jsx)("th",{children:"Imagem"}),(0,k.jsx)("th",{children:"Link"}),(0,k.jsx)("th",{className:"text-center",children:"A\xe7\xe3o"})]})}),0===s.length&&(0,k.jsx)("tr",{children:(0,k.jsxs)("td",{colSpan:5,className:"text-center text-muted",children:["Nenhum banner ",r.toLowerCase()," encontrado"]})})]}):(0,k.jsx)("div",{className:"row",children:0===s.length?(0,k.jsxs)("div",{className:"col-12 text-center text-muted py-4",children:[(0,k.jsx)("i",{className:"bx bx-image-alt",style:{fontSize:48,opacity:.3}}),(0,k.jsxs)("p",{className:"mt-2 mb-0",children:["Nenhum banner ",r.toLowerCase()," encontrado"]})]}):s.map((e,s)=>(0,k.jsx)("div",{className:"col-md-4 col-lg-3 mb-3",children:(0,k.jsxs)("div",{className:"card h-100",children:[(0,k.jsxs)("div",{className:"position-relative",children:[(0,k.jsx)("img",{src:e.file,className:"card-img-top",alt:"",style:{height:150,objectFit:"cover",cursor:"pointer"},onClick:()=>window.open(e.url,"_blank")}),(0,k.jsx)("div",{className:"position-absolute top-0 start-0 m-2",children:(0,k.jsx)("span",{className:"badge",style:{backgroundColor:"#343d55",color:"white"},children:s+1})})]}),(0,k.jsxs)("div",{className:"card-body p-2",children:[(0,k.jsx)("p",{className:"card-text small text-muted mb-0",children:e.url?(0,k.jsxs)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-decoration-none",children:[(0,k.jsx)("i",{className:"bx bx-link-external me-1"}),"Ver link"]}):(0,k.jsx)("span",{children:"Sem link"})}),(0,k.jsxs)("p",{className:"card-text small text-muted mb-1",children:["Data de adi\xe7\xe3o: ",c()(null===e||void 0===e?void 0:e.created_at).format("DD/MM/YYYY")]})]})]})},e.uuid))})})]})})(),(0,k.jsxs)(o.Zp,{children:[(0,k.jsx)(o.aR,{children:(0,k.jsx)("h5",{children:"Enviar Novos Banners"})}),(0,k.jsxs)(o.bw,{children:[(0,k.jsx)("p",{children:"Tamanho recomendado: 1410 px x 400 px"}),(0,k.jsxs)(o.XI,{children:[(0,k.jsx)("thead",{children:(0,k.jsxs)("tr",{children:[(0,k.jsx)("th",{children:"#"}),(0,k.jsx)("th",{children:"Upload"}),(0,k.jsx)("th",{children:"Tipo"}),(0,k.jsx)("th",{children:"Link"})]})}),(0,k.jsx)("tbody",{children:[...d,{}].map((e,s)=>(0,k.jsxs)("tr",{children:[(0,k.jsx)("th",{scope:"row",children:s+1}),(0,k.jsx)("td",{children:(0,k.jsx)("input",{type:"file",accept:"image/*",onChange:e=>((e,s)=>{var a;const r=null===(a=e.target.files)||void 0===a?void 0:a[0];r&&l(e=>{const a=[...e];return a[s]=r,a})})(e,s),style:{background:"#eee",padding:"10px 12px",borderRadius:4,color:"#1f1f1f",maxWidth:250}})}),(0,k.jsx)("td",{children:(0,k.jsx)(D,{selectedType:Number(p[s]||a[0].id),onTypeChange:e=>{const a=[...p];a[s]=e.toString(),j(a)},bannerTypeOptions:a,showLabel:!1,width:120})}),(0,k.jsx)("td",{children:(0,k.jsx)(o.pd,{type:"text",placeholder:"Url da oferta",onChange:e=>{return(a=x,(e,s)=>{a(a=>{const r=[...a];return r[s]=e.target.value,r})})(e,s);var a}})})]},s))})]}),(0,k.jsx)(o.fI,{children:(0,k.jsx)(o.fv,{className:"d-flex justify-content-end",children:(0,k.jsx)(o.$n,{onClick:async()=>{if(0!==d.length)try{const e=await Promise.all(d.map(e=>i.F.get("market/banners/".concat(e.name)))),s=_(Number(p[0]||a[0].id)).length;await Promise.all(e.map(async(e,r)=>{const t=d[r];await fetch(e.data.url,{method:"PUT",headers:{"Content-Type":"application/octet-stream"},body:t}),await i.F.post("market/banners",{key:e.data.key,url:u[r]||"",id_type:p[r]||a[0].id.toString(),order:s+r})})),R.oR.success("Imagens enviadas com sucesso!",A),P()}catch(e){console.error("[sendImages] Erro ao enviar imagens:",e),R.oR.error("Erro ao enviar imagens.",A)}else R.oR.warn("Nenhuma imagem selecionada.",A)},color:"primary",children:"Salvar Imagens"})})})]})]})]})},P=e=>{var s;let{product:a,index:t}=e;const{attributes:n,listeners:i,setNodeRef:d,transform:l,transition:c,isDragging:m}=(0,S.gl)({id:a.product.uuid}),h={transform:w.Ks.Transform.toString(l),transition:c,opacity:m?.5:1,cursor:m?"grabbing":"move"};return(0,k.jsxs)("tr",(0,r.A)((0,r.A)({ref:d,style:h},n),{},{className:"sortable-row",children:[(0,k.jsx)("td",{style:{width:40},children:(0,k.jsx)(o.$n,(0,r.A)((0,r.A)({color:"light",className:"p-0",style:{cursor:m?"grabbing":"grab",background:"#343d55",border:"none",boxShadow:"none"}},i),{},{children:(0,k.jsx)("i",{className:"bx bx-dots-vertical-rounded",style:{fontSize:20,color:"#6c757d"}})}))}),(0,k.jsx)("td",{children:(0,k.jsx)("span",{className:"badge",style:{backgroundColor:"#343d55",color:"white"},children:t+1})}),(0,k.jsx)("td",{children:(0,k.jsxs)("div",{className:"d-flex align-items-center gap-1",children:[a.product.cover&&a.product.cover.length>0?(0,k.jsx)("img",{src:a.product.cover[0].file,alt:a.product.name,style:{width:32,height:32,objectFit:"cover",borderRadius:4,marginRight:8}}):(0,k.jsx)("div",{style:{width:32,height:32,borderRadius:4,marginRight:8,background:"#2b2e3b"}}),(0,k.jsx)(f.N_,{to:"/producer/".concat((null===(s=a.product.producer)||void 0===s?void 0:s.uuid)||"unknown","/product/").concat(a.product.uuid),style:{color:"#4dd0bb",textDecoration:"none"},onMouseEnter:e=>{e.target.style.textDecoration="underline"},onMouseLeave:e=>{e.target.style.textDecoration="none"},children:a.product.name})]})})]}))};var z=a(13467),F=a(34964);a(94300);const E=[{id:1,label:"Pendente"},{id:2,label:"Aceito"},{id:3,label:"Recusado"}],_=(0,d.A)((e,s,a,r)=>[{name:"ID",cell:e=>e.id,width:"70px"},{name:"Produto",cell:e=>(0,k.jsx)(f.N_,{to:"/producer/".concat(e.users.uuid,"/product/").concat(e.products.uuid),children:e.products.name})},{name:"Produtor",cell:e=>(0,k.jsx)(f.N_,{to:"/producer/".concat(e.users.uuid),children:e.users.full_name})},{name:"Solicitado em",cell:e=>c()(null===e||void 0===e?void 0:e.requested_at).format("DD/MM/YYYY HH:mm:ss")},{name:"A\xe7\xf5es",center:!0,cell:t=>(0,k.jsxs)("div",{className:"w-100 d-flex justify-content-around",children:[(0,k.jsx)(o.$n,{size:"sm",color:"light",onClick:()=>{a(t),s(!0)},children:(0,k.jsx)(m.A,{color:"green",size:14})}),(0,k.jsx)(o.$n,{size:"sm",color:"light",onClick:()=>{a(t),r(!0)},children:(0,k.jsx)(h.A,{color:"red",size:14})}),(0,k.jsx)(o.$n,{size:"sm",color:"light",onClick:()=>e(t.id_product),children:(0,k.jsx)(u.A,{color:"#4DD0BB",size:14})})]})}]),M=(0,d.A)((e,s,a,r)=>[{name:"ID",cell:e=>e.id,width:"70px"},{name:"Produto",cell:e=>(0,k.jsx)(f.N_,{to:"/producer/".concat(e.users.uuid,"/product/").concat(e.products.uuid),children:e.products.name})},{name:"Produtor",cell:e=>(0,k.jsx)(f.N_,{to:"/producer/".concat(e.users.uuid),children:e.users.full_name})},{name:"Status",cell:e=>(0,k.jsx)(o.Ex,{color:e.status.color,children:e.status.label})},{name:"Solicitado em",cell:e=>e.requested_at&&c()(null===e||void 0===e?void 0:e.requested_at).format("DD/MM/YYYY HH:mm:ss")},{name:"Aceito em",cell:e=>e.accepted_at&&c()(null===e||void 0===e?void 0:e.accepted_at).format("DD/MM/YYYY HH:mm:ss")},{name:"Rejeitado em",cell:e=>e.rejected_at&&c()(null===e||void 0===e?void 0:e.rejected_at).format("DD/MM/YYYY HH:mm:ss")}]),Y=()=>{const e=(0,N.zy)(),s=new URLSearchParams(e.search).get("tab")||"1",[a,d]=(0,t.useState)(s),l=e=>{a!==e&&d(e)},{skin:m}=(0,z.h)(),[h,u]=(0,t.useState)([]),[S,w]=(0,t.useState)(0),[C,D]=(0,t.useState)(10),[R,A]=(0,t.useState)(!1),[Y,O]=(0,t.useState)(!1),[T,$]=(0,t.useState)(!1),[L,H]=(0,t.useState)(!1),[U,B]=(0,t.useState)([{}]),[J,Z]=(0,t.useState)(!1),[q,G]=(0,t.useState)(!1),[Q,X]=(0,t.useState)(null),[K,W]=(0,t.useState)(""),[V,ee]=(0,t.useState)(""),[se,ae]=(0,t.useState)(""),[re,te]=(0,t.useState)(null),[ne,oe]=(0,t.useState)(null),[ie,de]=(0,t.useState)([]),[le,ce]=(0,t.useState)(0),[me,he]=(0,t.useState)(0),[ue,xe]=(0,t.useState)(""),[pe,je]=(0,t.useState)(""),[ge,ve]=(0,t.useState)({calendar:[c()().subtract(90,"days").toDate(),c()().toDate()],status:""}),[be,fe]=(0,t.useState)(0),[Ne,ye]=(0,t.useState)(10),[Se,we]=(0,t.useState)(()=>{const e=c()();return{start:c()().startOf("month").format("YYYY-MM-DD"),end:e.format("YYYY-MM-DD")}}),[ke,Ce]=(0,t.useState)(()=>[c()().startOf("month").toDate(),c()().toDate()]),[De,Re]=(0,t.useState)([]),[Ae,Ie]=(0,t.useState)([]),[Pe,ze]=(0,t.useState)(!1),[Fe,Ee]=(0,t.useState)(""),[_e,Me]=(0,t.useState)(!1),[Ye,Oe]=(0,t.useState)(!1),[Te,$e]=(0,t.useState)(null),[Le,He]=(0,t.useState)(1),[Ue,Be]=(0,t.useState)(!1),[Je,Ze]=(0,t.useState)(0),[qe]=(0,t.useState)(10),[Ge,Qe]=(0,t.useState)(0),[Xe,Ke]=(0,t.useState)(!1),[We,Ve]=(0,t.useState)(!1),[es,ss]=(0,t.useState)(!1),[as,rs]=(0,t.useState)([]),ts=async e=>{H(!0),$(!0);try{const s=await i.F.get("market/".concat(e));B(s.data.data),te(s.data.images),oe(s.data.cover)}catch(s){console.log(s)}$(!1)},ns=async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;A(!0);try{const a=new URLSearchParams;a.append("page",e.toString()),a.append("size",(s||C).toString()),pe.trim()&&a.append("input",pe),ge.calendar&&2===ge.calendar.length&&(a.append("start_date",ge.calendar[0].toISOString()),a.append("end_date",ge.calendar[1].toISOString()));const r=await i.F.get("market?".concat(a.toString()));w(r.data.count),u(r.data.rows)}catch(a){console.log(a)}A(!1)},os=async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;A(!0);try{const a=new URLSearchParams;a.append("page",e.toString()),a.append("size",(s||C).toString()),ue.trim()&&a.append("input",ue),ge.calendar&&2===ge.calendar.length&&(a.append("start_date",ge.calendar[0].toISOString()),a.append("end_date",ge.calendar[1].toISOString())),ge.status&&a.append("status",ge.status);const r=await i.F.get("market/all?".concat(a.toString()));ce(r.data.count),de(r.data.rows)}catch(a){console.log(a)}A(!1)},is=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;ze(!0);try{const s=new URLSearchParams;s.append("page",e.toString()),s.append("size",qe.toString()),pe&&s.append("input",pe),ge.calendar&&2===ge.calendar.length&&(s.append("start_date",ge.calendar[0].toISOString()),s.append("end_date",ge.calendar[1].toISOString()));const{data:a}=await i.F.get("market/recommended?".concat(s.toString())),r=a.rows||[];Re(r),Ie(r),Qe(a.count||0)}catch(s){console.log(s)}ze(!1)};(0,t.useEffect)(()=>{ns(0)},[pe]),(0,t.useEffect)(()=>{2===ge.calendar.length&&ns(0)},[ge.calendar]),(0,t.useEffect)(()=>{2===ge.calendar.length&&os(0)},[ge.calendar]),(0,t.useEffect)(()=>{os(0)},[ue]),(0,t.useEffect)(()=>{os(0)},[ge.status]),(0,t.useEffect)(()=>{"3"===a&&is(Je)},[a,Je]),(0,t.useEffect)(()=>{Fe.trim()&&Me(!0);const e=setTimeout(()=>{if(Fe.trim()){const e=De.filter(e=>e.product.name.toLowerCase().includes(Fe.toLowerCase()));Ie(e)}else Ie(De);Me(!1)},300);return()=>clearTimeout(e)},[Fe,De]);return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(o.so,{tabs:!0,children:[(0,k.jsx)(o.CI,{children:(0,k.jsx)(o.k2,{href:"#",active:"1"===a,onClick:()=>{l("1")},children:"Geral"})}),(0,k.jsx)(o.CI,{children:(0,k.jsx)(o.k2,{href:"#",active:"2"===a,onClick:()=>{l("2")},children:"Banner"})}),(0,k.jsx)(o.CI,{children:(0,k.jsx)(o.k2,{href:"#",active:"3"===a,onClick:()=>{l("3")},children:"Recomendados"})})]}),(0,k.jsxs)(o.JS,{activeTab:a,children:[(0,k.jsx)(o.mF,{tabId:"1",children:(0,k.jsxs)("section",{id:"pageHomeLogs",children:[(0,k.jsx)("h2",{className:"mb-2",children:"Requisi\xe7\xf5es para Mercado de Afiliados"}),(0,k.jsx)(o.fI,{children:(0,k.jsx)(o.fv,{md:12,children:(0,k.jsx)(o.Zp,{children:(0,k.jsx)(o.bw,{children:(0,k.jsxs)(o.fI,{children:[(0,k.jsx)(o.fv,{md:6,children:(0,k.jsxs)(o.gE,{className:"filters",children:[(0,k.jsx)(o.JU,{children:"Nome do Produto e afiliados"}),(0,k.jsx)(o.pd,{onChange:e=>{let{target:s}=e;setTimeout(()=>{je(s.value)},1e3)}})]})}),(0,k.jsxs)(o.fv,{md:6,children:[(0,k.jsx)(o.JU,{className:"form-label",for:"range-picker"}),(0,k.jsxs)("div",{className:"d-flex align-items-center",children:[(0,k.jsx)(x.A,{size:15}),(0,k.jsx)(F.A,{value:ge.calendar,id:"range-picker",className:"form-control border-0 shadow-none bg-transparent",onChange:e=>ve(s=>(0,r.A)((0,r.A)({},s),{},{calendar:e})),options:{mode:"range",dateFormat:"d/m/Y"}})]})]})]})})})})}),(0,k.jsx)(o.Zp,{children:(0,k.jsx)(o.bw,{children:(0,k.jsx)(n.Ay,{columns:_(ts,Z,X,G),data:h,progressPending:R,pagination:!0,paginationServer:!0,paginationTotalRows:S,onChangeRowsPerPage:async(e,s)=>{await ns(s-1,e),D(e)},onChangePage:e=>{ns(e-1)},noDataComponent:"N\xe3o existem produtos para aprova\xe7\xe3o no mercado de afiliados no momento",paginationComponentOptions:{rowsPerPageText:"Linhas por p\xe1gina:",rangeSeparatorText:"de",noRowsPerPage:!1},theme:"dark"===m?"solarized":"solarizedLight"})})}),(0,k.jsxs)(o.aF,{isOpen:L,centered:!0,size:"lg",children:[(0,k.jsx)(o.rQ,{toggle:()=>{H(!1)},children:"Hist\xf3rico do produto"}),(0,k.jsx)(o.cw,{children:(0,k.jsx)("div",{children:(0,k.jsx)("div",{className:"details",children:T?(0,k.jsxs)("div",{className:"d-flex justify-content-center align-items-center p-2",children:[(0,k.jsx)("div",{className:"me-2",children:"Carregando hist\xf3rico"}),(0,k.jsx)(o.y$,{})]}):(0,k.jsx)("div",{children:(0,k.jsxs)(o.XI,{responsive:!0,children:[(0,k.jsx)("thead",{children:(0,k.jsxs)("tr",{children:[(0,k.jsx)("th",{children:"#ID"}),(0,k.jsx)("th",{children:"Status"}),(0,k.jsx)("th",{children:"Criado em"}),(0,k.jsx)("th",{children:"Atualizado em"}),(0,k.jsx)("th",{children:"Motivo"}),(0,k.jsx)("th",{children:"Detalhes Internos"})]})}),(0,k.jsx)("tbody",{children:U.map((e,s)=>{var a;return(0,k.jsxs)("tr",{children:[(0,k.jsx)("td",{children:e.id}),(0,k.jsx)("td",{children:null===e||void 0===e||null===(a=e.status)||void 0===a?void 0:a.label}),(0,k.jsx)("td",{children:c()(e.created_at).format("DD/MM/YYYY HH:mm")}),(0,k.jsx)("td",{children:c()(e.updated).format("DD/MM/YYYY HH:mm")}),(0,k.jsx)("td",{children:null===e||void 0===e?void 0:e.reason}),(0,k.jsx)("td",{children:null===e||void 0===e?void 0:e.internal_descriptions})]},s)})})]})})})})}),(0,k.jsx)(o.cw,{children:(0,k.jsx)("div",{children:(0,k.jsx)("div",{className:"details",children:T?(0,k.jsxs)("div",{className:"d-flex justify-content-center align-items-center p-2",children:[(0,k.jsx)("div",{className:"me-2",children:"Carregando imagens"}),(0,k.jsx)(o.y$,{})]}):(0,k.jsxs)("div",{children:[(0,k.jsx)("h4",{children:"Imagens capa vitrine"}),(0,k.jsxs)("div",{id:"carouselExampleControls",className:"carousel slide","data-ride":"carousel",children:[(0,k.jsx)("div",{className:"carousel-inner",children:ne&&ne.length>0?ne.map((e,s)=>(0,k.jsx)("div",{className:"carousel-item ".concat(s===me&&" active"),children:(0,k.jsx)("img",{className:"d-block w-100",src:e.file,alt:"First slide"})},s)):(0,k.jsx)("div",{children:"O produto n\xe3o tem imagens de carrossel."})}),ne&&ne.length>0&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("a",{className:"carousel-control-prev",href:"#carouselExampleControls",role:"button","data-slide":"prev",onClick:()=>{ne[me-1]?he(me-1):he(ne.length-1)},children:[(0,k.jsx)("span",{className:"carousel-control-prev-icon","aria-hidden":"true"}),(0,k.jsx)("span",{className:"sr-only",children:"Previous"})]}),(0,k.jsxs)("a",{className:"carousel-control-next",href:"#carouselExampleControls",role:"button","data-slide":"next",onClick:()=>{ne[me+1]?he(me+1):he(0)},children:[(0,k.jsx)("span",{className:"carousel-control-next-icon","aria-hidden":"true"}),(0,k.jsx)("span",{className:"sr-only",children:"Next"})]})]})]}),(0,k.jsx)("h4",{className:"mt-2",children:"Imagens carrossel"}),(0,k.jsxs)("div",{id:"carouselExampleControls2",className:"carousel slide","data-ride":"carousel",children:[(0,k.jsx)("div",{className:"carousel-inner",children:re&&re.length>0?re.map((e,s)=>(0,k.jsx)("div",{className:"carousel-item ".concat(s===me&&" active"),children:(0,k.jsx)("img",{className:"d-block w-100",src:e.file,alt:"First slide"})},s)):(0,k.jsx)("div",{children:"O produto n\xe3o tem imagens de carrossel."})}),re&&re.length>0&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("a",{className:"carousel-control-prev",href:"#carouselExampleControls2",role:"button","data-slide":"prev",onClick:()=>{re[me-1]?he(me-1):he(re.length-1)},children:[(0,k.jsx)("span",{className:"carousel-control-prev-icon","aria-hidden":"true"}),(0,k.jsx)("span",{className:"sr-only",children:"Previous"})]}),(0,k.jsxs)("a",{className:"carousel-control-next",href:"#carouselExampleControls2",role:"button","data-slide":"next",onClick:()=>{re[me+1]?he(me+1):he(0)},children:[(0,k.jsx)("span",{className:"carousel-control-next-icon","aria-hidden":"true"}),(0,k.jsx)("span",{className:"sr-only",children:"Next"})]})]})]})]})})})})]}),(0,k.jsx)(o.aF,{isOpen:J,centered:!0,size:"md",children:(()=>{var e;return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(o.rQ,{toggle:()=>Z(!J),children:["Deseja",(0,k.jsxs)("b",{className:"uppercase",children:[" aprovar ",null===Q||void 0===Q||null===(e=Q.products)||void 0===e?void 0:e.name]})]}),(0,k.jsxs)(o.cw,{children:[(0,k.jsx)("div",{className:"d-flex",children:(0,k.jsxs)("div",{className:"details",children:[(0,k.jsx)("b",{children:"Esta a\xe7\xe3o n\xe3o \xe9 revers\xedvel!"}),(0,k.jsx)("br",{}),(0,k.jsx)("br",{}),"Ao aprovar este produto para o mercado de afiliados, o mesmo ficar\xe1 vis\xedvel publicamente no mercado da B4you."]})}),(0,k.jsx)("div",{className:"mt-2",children:(0,k.jsx)(o.pd,{onChange:e=>{let{target:s}=e;W(s.value)},placeholder:"Motivo de aprova\xe7\xe3o"})}),(0,k.jsx)("div",{className:"mt-2",children:(0,k.jsx)(o.pd,{onChange:e=>{let{target:s}=e;ee(s.value)},placeholder:"Anota\xe7\xf5es Internas (uso exclusivo suporte)"})}),(0,k.jsx)("div",{className:"mt-2",children:(0,k.jsx)(o.pd,{onChange:e=>{let{target:s}=e;ae(s.value)},placeholder:"Link alternativo para Gerencia (opcional)"})}),(0,k.jsx)("div",{className:"d-flex justify-content-end align-items-end mt-2",children:(0,k.jsx)(o.$n,{color:"primary",onClick:async()=>{if(Q){O(!0);try{await i.F.post("market/approve/".concat(Q.id),{id_producer:Q.users.id,reason:K,internal_descriptions:V,product_name:Q.products.name,id_product:Q.products.id,manager_link:se}),await ns(0),Z(!1)}catch(e){console.log(e)}finally{O(!1)}}},disabled:Y,children:(0,k.jsxs)("div",{children:[(0,k.jsx)("span",{children:"Aceitar "}),Y&&(0,k.jsx)(o.y$,{size:"sm"})]})})})]})]})})()}),(0,k.jsx)(o.aF,{isOpen:q,centered:!0,size:"md",children:(()=>{var e;return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(o.rQ,{toggle:()=>G(!q),children:["Deseja",(0,k.jsxs)("b",{className:"uppercase",children:[" reprovar ",null===Q||void 0===Q||null===(e=Q.products)||void 0===e?void 0:e.name]})]}),(0,k.jsxs)(o.cw,{children:[(0,k.jsx)("div",{className:"d-flex",children:(0,k.jsxs)("div",{className:"details",children:[(0,k.jsx)("b",{children:"Esta a\xe7\xe3o n\xe3o \xe9 revers\xedvel!"}),(0,k.jsx)("br",{}),(0,k.jsx)("br",{}),"Ao reprovar este produto para o mercado de afiliados, o mesmo n\xe3o ficar\xe1 vis\xedvel publicamente no mercado da B4you."]})}),(0,k.jsx)("div",{className:"mt-2",children:(0,k.jsx)(o.pd,{onChange:e=>{let{target:s}=e;W(s.value)},placeholder:"Motivo de reprova\xe7\xe3o"})}),(0,k.jsx)("div",{className:"mt-2",children:(0,k.jsx)(o.pd,{onChange:e=>{let{target:s}=e;ee(s.value)},placeholder:"Anota\xe7\xf5es Internas (uso exclusivo suporte)"})}),(0,k.jsx)("div",{className:"d-flex justify-content-end align-items-end mt-2",children:(0,k.jsx)(o.$n,{color:"danger",onClick:async()=>{if(Q){O(!0);try{await i.F.post("market/reprove/".concat(Q.id),{id_producer:Q.users.id,reason:K,internal_descriptions:V,product_name:Q.products.name,id_product:Q.products.id}),await ns(0),G(!1)}catch(e){console.log(e)}finally{O(!1)}}},disabled:Y,children:(0,k.jsxs)("div",{children:[(0,k.jsx)("span",{children:"Reprovar "}),Y&&(0,k.jsx)(o.y$,{size:"sm"})]})})})]})]})})()}),(0,k.jsx)("h2",{className:"mb-2",children:"Produtos"}),(0,k.jsx)(o.fI,{children:(0,k.jsx)(o.fv,{md:12,children:(0,k.jsx)(o.Zp,{children:(0,k.jsx)(o.bw,{children:(0,k.jsxs)(o.fI,{children:[(0,k.jsx)(o.fv,{md:4,children:(0,k.jsxs)(o.gE,{className:"filters",children:[(0,k.jsx)(o.JU,{children:"Nome do produto"}),(0,k.jsx)(o.pd,{onChange:e=>{let{target:s}=e;setTimeout(()=>{xe(s.value)},1e3)}})]})}),(0,k.jsx)(o.fv,{md:4,children:(0,k.jsxs)(o.gE,{className:"filters",children:[(0,k.jsx)(o.JU,{children:"Status"}),(0,k.jsxs)(o.pd,{type:"select",value:ge.status,onChange:e=>{let{target:s}=e;return ve(e=>(0,r.A)((0,r.A)({},e),{},{status:s.value}))},children:[(0,k.jsx)("option",{value:"",children:"Todos os status"}),E.map(e=>(0,k.jsx)("option",{value:e.id,children:e.label},e.id))]})]})}),(0,k.jsxs)(o.fv,{md:4,children:[(0,k.jsx)(o.JU,{className:"form-label",for:"range-picker-products"}),(0,k.jsxs)("div",{className:"d-flex align-items-center",children:[(0,k.jsx)(x.A,{size:15}),(0,k.jsx)(F.A,{value:ge.calendar,id:"range-picker-products",className:"form-control border-0 shadow-none bg-transparent",onChange:e=>ve(s=>(0,r.A)((0,r.A)({},s),{},{calendar:e})),options:{mode:"range",dateFormat:"d/m/Y"}})]})]})]})})})})}),(0,k.jsx)(o.Zp,{children:(0,k.jsx)(o.bw,{children:(0,k.jsx)(n.Ay,{columns:M(ts,Z,X,G),data:ie,progressPending:R,pagination:!0,paginationServer:!0,paginationTotalRows:le,onChangeRowsPerPage:async(e,s)=>{await os(s-1,e),ye(e)},onChangePage:e=>{os(e-1)},noDataComponent:"N\xe3o existem produtos nessa listagem",paginationComponentOptions:{rowsPerPageText:"Linhas por p\xe1gina:",rangeSeparatorText:"de",noRowsPerPage:!1},theme:"dark"===m?"solarized":"solarizedLight"})})})]})}),(0,k.jsx)(o.mF,{tabId:"2",children:(0,k.jsx)(I,{apiEndpoint:"market/images/banner",bannerTypeOptions:[{id:1,name:"Desktop"},{id:2,name:"Mobile"}]})}),(0,k.jsx)(o.mF,{tabId:"3",children:(0,k.jsxs)("section",{id:"pageHomeRecommended",children:[(0,k.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[(0,k.jsx)("h2",{className:"mb-0",children:"Produtos Recomendados"}),Xe?(0,k.jsxs)("div",{className:"d-flex gap-2",children:[(0,k.jsxs)(o.$n,{color:"secondary",onClick:()=>{Ke(!1),Ve(!1),rs([])},size:"sm",children:[(0,k.jsx)("i",{className:"bx bx-x me-1"}),"Cancelar"]}),(0,k.jsx)(o.$n,{color:"success",onClick:async()=>{try{if(!We)return;ss(!0);const e=as.map(e=>e.product.uuid);await i.F.put("market/recommended/reorder",{uuids:e}),await is(Je),Ve(!1),Ke(!1)}catch(e){console.error("Erro ao salvar ordem:",e)}finally{ss(!1)}},disabled:!We||es,size:"sm",children:es?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("span",{className:"spinner-border spinner-border-sm me-1",role:"status","aria-hidden":"true"}),"Salvando..."]}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("i",{className:"bx bx-check me-1"}),"Confirmar Ordem"]})})]}):(0,k.jsxs)(o.$n,{color:"primary",onClick:async()=>{Ke(!0),await(async()=>{ze(!0);try{const e=new URLSearchParams;e.append("page","0"),e.append("size","1000");const{data:s}=await i.F.get("market/recommended?".concat(e.toString())),a=s.rows||[];rs(a)}catch(e){console.log(e)}ze(!1)})()},size:"sm",children:[(0,k.jsx)("i",{className:"bx bx-edit me-1"}),"Editar com Drag & Drop"]})]}),(0,k.jsx)(o.Zp,{children:(0,k.jsxs)(o.bw,{children:[(0,k.jsx)("div",{className:"mb-2",children:(0,k.jsxs)(o.gE,{children:[(0,k.jsx)(o.JU,{children:"Filtrar por nome do produto"}),(0,k.jsxs)("div",{className:"position-relative",children:[(0,k.jsx)(o.pd,{type:"text",placeholder:"Digite o nome do produto...",value:Fe,onChange:e=>Ee(e.target.value)}),_e&&(0,k.jsx)("div",{className:"position-absolute",style:{right:"10px",top:"50%",transform:"translateY(-50%)"},children:(0,k.jsx)(o.y$,{size:"sm"})})]})]})}),Pe?(0,k.jsx)("div",{className:"d-flex justify-content-center p-2",children:(0,k.jsx)(o.y$,{})}):Xe?(0,k.jsxs)("div",{children:[(0,k.jsx)("div",{className:"alert alert-info mb-3",children:(0,k.jsxs)("small",{children:[(0,k.jsx)("strong",{children:"Modo de Edi\xe7\xe3o:"}),' Arraste os produtos usando os 3 pontinhos para reordenar. Clique em "Confirmar Ordem" para salvar as altera\xe7\xf5es.']})}),(0,k.jsxs)(y.A,{items:as,onReorder:e=>{rs(e),Ve(!0)},getItemId:e=>e.product.uuid,renderItem:(e,s)=>(0,k.jsx)(P,{product:e,index:s},e.product.uuid),renderDragOverlay:e=>(0,k.jsx)("div",{className:"p-2 d-flex align-items-center",style:{background:"#161d31",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",borderRadius:4},children:(0,k.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[e.product.cover&&e.product.cover.length>0?(0,k.jsx)("img",{src:e.product.cover[0].file,alt:e.product.name,style:{width:32,height:32,objectFit:"cover",borderRadius:4}}):(0,k.jsx)("div",{style:{width:32,height:32,borderRadius:4,background:"#2b2e3b"}}),(0,k.jsx)("span",{style:{color:"#4dd0bb"},children:e.product.name})]})}),children:[(0,k.jsx)("thead",{children:(0,k.jsxs)("tr",{children:[(0,k.jsx)("th",{style:{width:40}}),(0,k.jsx)("th",{style:{width:80},children:"Ordem"}),(0,k.jsx)("th",{children:"Produto"})]})}),0===as.length&&(0,k.jsx)("tr",{children:(0,k.jsx)("td",{colSpan:3,className:"text-center text-muted",children:"Nenhum produto recomendado encontrado"})})]})]}):0===Ae.length?(0,k.jsx)("div",{className:"text-center text-muted p-2",children:Fe.trim()?"Nenhum produto encontrado com o termo de busca":"N\xe3o existem produtos recomendados"}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(o.XI,{responsive:!0,children:[(0,k.jsx)("thead",{children:(0,k.jsxs)("tr",{children:[(0,k.jsx)("th",{style:{width:80},children:"Ordem"}),(0,k.jsx)("th",{children:"Produto"}),(0,k.jsx)("th",{style:{width:100},children:"A\xe7\xf5es"})]})}),(0,k.jsx)("tbody",{children:Ae.map((e,s)=>{var a;return(0,k.jsxs)("tr",{children:[(0,k.jsx)("td",{children:(0,k.jsx)("span",{className:"badge",style:{backgroundColor:"#343d55",color:"white"},children:e.position||Je*qe+s+1})}),(0,k.jsx)("td",{children:(0,k.jsxs)("div",{className:"d-flex align-items-center gap-1",children:[e.product.cover&&e.product.cover.length>0?(0,k.jsx)("img",{src:e.product.cover[0].file,alt:e.product.name,style:{width:32,height:32,objectFit:"cover",borderRadius:4,marginRight:8}}):(0,k.jsx)("div",{style:{width:32,height:32,borderRadius:4,marginRight:8,background:"#2b2e3b"}}),(0,k.jsx)(f.N_,{to:"/producer/".concat((null===(a=e.product.producer)||void 0===a?void 0:a.uuid)||"unknown","/product/").concat(e.product.uuid),style:{color:"#4dd0bb",textDecoration:"none"},onMouseEnter:e=>{e.target.style.textDecoration="underline"},onMouseLeave:e=>{e.target.style.textDecoration="none"},children:e.product.name})]})}),(0,k.jsx)("td",{children:(0,k.jsx)(o.Ex,{color:"primary",className:"cursor-pointer",onClick:()=>{return $e(s=e),He(s.position||1),void Oe(!0);var s},children:(0,k.jsx)(p.A,{size:20})})})]},e.product.uuid)})})]}),(0,k.jsxs)("div",{className:"d-flex justify-content-center align-items-center mt-3",children:[(0,k.jsx)(j.A,{size:20,style:{color:0===Je?"#202739":"#121620",cursor:0===Je?"not-allowed":"pointer"},onClick:()=>{Je>0&&Ze(Je-1)}}),(0,k.jsxs)("span",{className:"mx-4",children:["P\xe1gina ",Je+1]}),(()=>{const e=Math.ceil(Ge/qe);return Je+1<e?(0,k.jsx)(g.A,{size:20,style:{color:"#121620",cursor:"pointer"},onClick:()=>Ze(Je+1)}):null})()]})]})]})}),(0,k.jsxs)(o.aF,{isOpen:Ye,centered:!0,size:"md",children:[(0,k.jsx)(o.rQ,{toggle:()=>Oe(!1),children:"Alterar Posi\xe7\xe3o do Produto"}),(0,k.jsx)(o.cw,{children:Te&&(0,k.jsxs)("div",{children:[(0,k.jsxs)("div",{className:"mb-3",children:[(0,k.jsx)("strong",{children:"Produto:"})," ",Te.product.name]}),(0,k.jsxs)("div",{className:"mb-3",children:[(0,k.jsx)("strong",{children:"Posi\xe7\xe3o atual:"})," ",Te.position||1]}),(0,k.jsx)("div",{className:"alert alert-info mb-3",children:(0,k.jsxs)("small",{children:[(0,k.jsx)("strong",{children:"Como funciona:"})," Ao alterar a posi\xe7\xe3o, os outros produtos ser\xe3o automaticamente reorganizados para evitar posi\xe7\xf5es duplicadas."]})}),(0,k.jsxs)(o.gE,{children:[(0,k.jsx)(o.JU,{children:"Nova posi\xe7\xe3o"}),(0,k.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,k.jsx)(o.pd,{type:"number",min:"1",max:Ge,value:Le,onChange:e=>{const s=e.target.value;if(""===s)return void He("");const a=parseInt(s);if(!isNaN(a)){const e=Ge;He(Math.min(Math.max(a,1),e))}},className:"flex-grow-1"}),(0,k.jsxs)("div",{className:"d-flex gap-2 flex-shrink-0",children:[(0,k.jsx)(o.Ex,{color:"primary",className:"cursor-pointer",onClick:()=>{const e="string"===typeof Le?parseInt(Le):Le;if(isNaN(e))He(1);else{const s=Math.min(e+1,Ge);He(s)}},children:(0,k.jsx)(v.A,{size:20})}),(0,k.jsx)(o.Ex,{color:"primary",className:"cursor-pointer",onClick:()=>{const e="string"===typeof Le?parseInt(Le):Le;if(isNaN(e))He(1);else{const s=Math.max(e-1,1);He(s)}},children:(0,k.jsx)(b.A,{size:20})})]})]}),(0,k.jsxs)("small",{className:"text-muted mt-2 d-block",children:["Posi\xe7\xe3o deve estar entre 1 e ",Ge]})]}),(0,k.jsxs)("div",{className:"d-flex justify-content-end gap-2 mt-3",children:[(0,k.jsx)(o.$n,{color:"secondary",onClick:()=>Oe(!1),children:"Cancelar"}),(0,k.jsx)(o.$n,{color:"primary",onClick:async()=>{if(!Te)return;const e="string"===typeof Le?parseInt(Le):Le;if(!e||e<1||e>Ge)alert("Por favor, insira uma posi\xe7\xe3o v\xe1lida entre 1 e ".concat(Ge));else{Be(!0);try{const s=new URLSearchParams;s.append("page","0"),s.append("size","1000");const{data:a}=await i.F.get("market/recommended?".concat(s.toString())),r=(a.rows||[]).sort((e,s)=>(e.position||1)-(s.position||1)).map(e=>e.product.uuid),t=r.findIndex(e=>e===Te.product.uuid);if(-1===t)return void Oe(!1);const n=Math.max(0,Math.min(r.length-1,e-1)),[o]=r.splice(t,1);r.splice(n,0,o),await i.F.put("market/recommended/reorder",{uuids:r}),await is(Je),Oe(!1)}catch(s){console.log(s)}finally{Be(!1)}}},disabled:Ue||""===Le||null===Le,children:Ue?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(o.y$,{size:"sm",className:"me-2"}),"Salvando..."]}):"Salvar"})]})]})})]})]})})]})]})}},94300:()=>{},95875:(e,s,a)=>{a.d(s,{A:()=>d});var r=a(9950),t=a(93718),n=a(78045),o=a(35203),i=a(44414);const d=e=>{let{items:s,onReorder:a,renderItem:d,getItemId:l,renderDragOverlay:c,children:m,className:h=""}=e;const[u,x]=(0,r.useState)(null),p=(0,t.FR)((0,t.MS)(t.AN,{activationConstraint:{distance:8}}),(0,t.MS)(t.uN,{coordinateGetter:n.JR})),j=u?s.find(e=>l(e)===u):null;return(0,i.jsxs)(t.Mp,{sensors:p,collisionDetection:t.fp,onDragStart:e=>{x(String(e.active.id))},onDragEnd:e=>{const{active:r,over:t}=e;if(r.id!==(null===t||void 0===t?void 0:t.id)){const e=s.findIndex(e=>l(e)===r.id),o=s.findIndex(e=>l(e)===(null===t||void 0===t?void 0:t.id));if(-1!==e&&-1!==o){const r=(0,n.be)(s,e,o);a(r)}}x(null)},children:[(0,i.jsx)(n.gB,{items:s.map(l),strategy:n._G,children:(0,i.jsxs)(o.XI,{className:h,children:[m,(0,i.jsx)("tbody",{children:s.map((e,s)=>d(e,s))})]})}),(0,i.jsx)(t.Hd,{children:u&&j&&c?c(j):null})]})}}}]);