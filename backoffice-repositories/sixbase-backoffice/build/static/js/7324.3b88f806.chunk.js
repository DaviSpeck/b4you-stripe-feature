(self.webpackChunksixbase_backoffice=self.webpackChunksixbase_backoffice||[]).push([[7324],{625:(e,s,a)=>{var t={"./af":40060,"./af.js":40060,"./ar":8224,"./ar-dz":54687,"./ar-dz.js":54687,"./ar-kw":77651,"./ar-kw.js":77651,"./ar-ly":92890,"./ar-ly.js":92890,"./ar-ma":23651,"./ar-ma.js":23651,"./ar-ps":32876,"./ar-ps.js":32876,"./ar-sa":77473,"./ar-sa.js":77473,"./ar-tn":22203,"./ar-tn.js":22203,"./ar.js":8224,"./az":88424,"./az.js":88424,"./be":23202,"./be.js":23202,"./bg":50584,"./bg.js":50584,"./bm":45818,"./bm.js":45818,"./bn":49543,"./bn-bd":26426,"./bn-bd.js":26426,"./bn.js":49543,"./bo":92144,"./bo.js":92144,"./br":48379,"./br.js":48379,"./bs":75028,"./bs.js":75028,"./ca":76159,"./ca.js":76159,"./cs":10001,"./cs.js":10001,"./cv":84334,"./cv.js":84334,"./cy":74855,"./cy.js":74855,"./da":64756,"./da.js":64756,"./de":96904,"./de-at":52852,"./de-at.js":52852,"./de-ch":31250,"./de-ch.js":31250,"./de.js":96904,"./dv":22833,"./dv.js":22833,"./el":37210,"./el.js":37210,"./en-au":18307,"./en-au.js":18307,"./en-ca":22721,"./en-ca.js":22721,"./en-gb":2748,"./en-gb.js":2748,"./en-ie":53707,"./en-ie.js":53707,"./en-il":21692,"./en-il.js":21692,"./en-in":49510,"./en-in.js":49510,"./en-nz":85365,"./en-nz.js":85365,"./en-sg":67115,"./en-sg.js":67115,"./eo":40935,"./eo.js":40935,"./es":82299,"./es-do":17441,"./es-do.js":17441,"./es-mx":83505,"./es-mx.js":83505,"./es-us":39e3,"./es-us.js":39e3,"./es.js":82299,"./et":35442,"./et.js":35442,"./eu":19425,"./eu.js":19425,"./fa":88370,"./fa.js":88370,"./fi":21610,"./fi.js":21610,"./fil":15620,"./fil.js":15620,"./fo":10252,"./fo.js":10252,"./fr":32943,"./fr-ca":70836,"./fr-ca.js":70836,"./fr-ch":59379,"./fr-ch.js":59379,"./fr.js":32943,"./fy":84250,"./fy.js":84250,"./ga":15011,"./ga.js":15011,"./gd":57648,"./gd.js":57648,"./gl":42264,"./gl.js":42264,"./gom-deva":22065,"./gom-deva.js":22065,"./gom-latn":78922,"./gom-latn.js":78922,"./gu":68471,"./gu.js":68471,"./he":8948,"./he.js":8948,"./hi":95584,"./hi.js":95584,"./hr":59185,"./hr.js":59185,"./hu":78532,"./hu.js":78532,"./hy-am":84539,"./hy-am.js":84539,"./id":4174,"./id.js":4174,"./is":38015,"./is.js":38015,"./it":50398,"./it-ch":38408,"./it-ch.js":38408,"./it.js":50398,"./ja":98934,"./ja.js":98934,"./jv":62023,"./jv.js":62023,"./ka":15271,"./ka.js":15271,"./kk":66769,"./kk.js":66769,"./km":42315,"./km.js":42315,"./kn":18721,"./kn.js":18721,"./ko":73658,"./ko.js":73658,"./ku":45651,"./ku-kmr":54644,"./ku-kmr.js":54644,"./ku.js":45651,"./ky":16575,"./ky.js":16575,"./lb":52869,"./lb.js":52869,"./lo":11714,"./lo.js":11714,"./lt":39895,"./lt.js":39895,"./lv":51225,"./lv.js":51225,"./me":79033,"./me.js":79033,"./mi":95869,"./mi.js":95869,"./mk":97275,"./mk.js":97275,"./ml":75538,"./ml.js":75538,"./mn":65128,"./mn.js":65128,"./mr":50940,"./mr.js":50940,"./ms":48931,"./ms-my":23658,"./ms-my.js":23658,"./ms.js":48931,"./mt":71418,"./mt.js":71418,"./my":91917,"./my.js":91917,"./nb":51687,"./nb.js":51687,"./ne":80422,"./ne.js":80422,"./nl":61517,"./nl-be":14087,"./nl-be.js":14087,"./nl.js":61517,"./nn":19307,"./nn.js":19307,"./oc-lnc":31747,"./oc-lnc.js":31747,"./pa-in":28326,"./pa-in.js":28326,"./pl":40971,"./pl.js":40971,"./pt":54259,"./pt-br":58792,"./pt-br.js":58792,"./pt.js":54259,"./ro":65824,"./ro.js":65824,"./ru":27362,"./ru.js":27362,"./sd":18372,"./sd.js":18372,"./se":40395,"./se.js":40395,"./si":72775,"./si.js":72775,"./sk":16265,"./sk.js":16265,"./sl":25276,"./sl.js":25276,"./sq":50783,"./sq.js":50783,"./sr":66226,"./sr-cyrl":53405,"./sr-cyrl.js":53405,"./sr.js":66226,"./ss":69601,"./ss.js":69601,"./sv":60286,"./sv.js":60286,"./sw":70205,"./sw.js":70205,"./ta":31204,"./ta.js":31204,"./te":63352,"./te.js":63352,"./tet":25286,"./tet.js":25286,"./tg":93442,"./tg.js":93442,"./th":36099,"./th.js":36099,"./tk":14342,"./tk.js":14342,"./tl-ph":74716,"./tl-ph.js":74716,"./tlh":32135,"./tlh.js":32135,"./tr":83037,"./tr.js":83037,"./tzl":14765,"./tzl.js":14765,"./tzm":5102,"./tzm-latn":27158,"./tzm-latn.js":27158,"./tzm.js":5102,"./ug-cn":39785,"./ug-cn.js":39785,"./uk":61075,"./uk.js":61075,"./ur":42116,"./ur.js":42116,"./uz":91548,"./uz-latn":31428,"./uz-latn.js":31428,"./uz.js":91548,"./vi":22746,"./vi.js":22746,"./x-pseudo":27850,"./x-pseudo.js":27850,"./yo":94547,"./yo.js":94547,"./zh-cn":51539,"./zh-cn.js":51539,"./zh-hk":49691,"./zh-hk.js":49691,"./zh-mo":30262,"./zh-mo.js":30262,"./zh-tw":78275,"./zh-tw.js":78275};function l(e){var s=n(e);return a(s)}function n(e){if(!a.o(t,e)){var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}return t[e]}l.keys=function(){return Object.keys(t)},l.resolve=n,e.exports=l,l.id=625},27780:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>b});var t=a(89379),l=a(9950),n=a(35203),r=a(21333),c=a(12116),i=a(59051),o=a.n(i),d=(a(58792),a(45530)),m=a(13955),j=a(44414);o().locale("pt-br");const h=["Janeiro","Fevereiro","Mar\xe7o","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],u=["Dom","Seg","Ter","Qua","Qui","Sex","S\xe1b"],x=new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}),b=()=>{var e;const s=(0,m.gL)(),a=(0,l.useMemo)(()=>{try{return"COMERCIAL"===String((null===s||void 0===s?void 0:s.role)||"").toUpperCase()}catch(e){return!1}},[s]),[i,b]=(0,l.useState)([]),[p,f]=(0,l.useState)(a&&null!==(e=null===s||void 0===s?void 0:s.id)&&void 0!==e?e:""),[g,v]=(0,l.useState)(o()()),[y,k]=(0,l.useState)(!1),[N,w]=(0,l.useState)([]),[M,z]=(0,l.useState)(0),[C,S]=(0,l.useState)(0),[Y,_]=(0,l.useState)({}),[$,R]=(0,l.useState)(!0),O=["R$ 10.000","R$ 50.000","R$ 500.000","R$ 1.000.000","R$ 5.000.000","R$ 10.000.000"],A=(0,l.useMemo)(()=>({"R$ 10.000":"10K","R$ 50.000":"50K","R$ 500.000":"500K","R$ 1.000.000":"1M","R$ 5.000.000":"5M","R$ 10.000.000":"10M"}),[]);(0,l.useEffect)(()=>w(O),[]),(0,l.useEffect)(()=>{if(a)return;(async()=>{try{var e;const s=await d.F.get("/client-wallet/managers",{headers:{"Cache-Control":"no-cache",Pragma:"no-cache",Expires:"0"}}),a=Array.isArray(null===(e=s.data)||void 0===e?void 0:e.managers)?s.data.managers:[];b(a)}catch(s){console.error("Erro ao buscar gerentes:",s),b([])}})()},[a]);const D=(0,l.useCallback)(async()=>{R(!0);try{const e=N.map(e=>A[e]).filter(Boolean),s=(0,t.A)({start_date:g.clone().startOf("month").format("YYYY-MM-DD"),end_date:g.clone().endOf("month").format("YYYY-MM-DD")},e.length?{milestones:e}:{});p&&(s.manager_id=p);const{data:a}=await d.F.get("/client-wallet/calendar",{params:s});z(a.monthly_birthday_count||0),S(a.monthly_goals_achieved_count||0),_(a.events_by_date||{})}catch(e){console.error("Erro ao buscar dados do calend\xe1rio:",e),z(0),S(0),_({})}finally{setTimeout(()=>R(!1),300)}},[g,N,A,p]);(0,l.useEffect)(()=>{D()},[D]);const F=(0,l.useCallback)(e=>{w(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},[]),E=(0,l.useCallback)(()=>v(e=>e.clone().subtract(1,"month")),[]),I=(0,l.useCallback)(()=>v(e=>e.clone().add(1,"month")),[]),J=(0,l.useCallback)(()=>k(e=>!e),[]),T=(0,l.useCallback)(e=>{v(s=>s.clone().month(e)),k(!1)},[]),U=(0,l.useCallback)(e=>{v(s=>s.clone().year(e))},[]),P=(0,l.useMemo)(()=>g.clone().startOf("month"),[g]),B=(0,l.useMemo)(()=>g.clone().endOf("month"),[g]),L=(0,l.useMemo)(()=>P.clone().startOf("week"),[P]),Q=(0,l.useMemo)(()=>B.clone().endOf("week"),[B]),Z=(0,l.useMemo)(()=>{const e=[],s=L.clone();for(;s.isSameOrBefore(Q,"day");)e.push(s.clone()),s.add(1,"day");return e},[L,Q]),q=(0,l.useCallback)(e=>e.isSame(o()(),"day"),[]),H=(0,l.useCallback)(e=>e.isSame(g,"month"),[g]),K=(0,l.useMemo)(()=>{const e=o()().year();return Array.from({length:8},(s,a)=>e-4+a)},[]),[G,V]=(0,l.useState)(!1),[W,X]=(0,l.useState)([]),[ee,se]=(0,l.useState)(null),[ae,te]=(0,l.useState)("");return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(n.Zp,{className:"mb-2",children:(0,j.jsx)(n.bw,{className:"d-flex flex-wrap align-items-center justify-content-between",children:(0,j.jsxs)("div",{className:"d-flex align-items-center gap-2 flex-wrap",children:[!a&&(0,j.jsxs)("div",{className:"d-flex align-items-center mr-2",children:[(0,j.jsx)(n.JU,{className:"mb-0 mr-1 text-muted",children:"Gerente:"}),(0,j.jsxs)(n.pd,{type:"select",value:p,onChange:e=>f(e.target.value),style:{width:200},children:[(0,j.jsx)("option",{value:"",children:"Todos os gerentes"}),i.map(e=>(0,j.jsx)("option",{value:e.id,children:e.email},e.id))]})]}),(0,j.jsx)("div",{className:"d-flex align-items-center gap-1 flex-wrap",children:O.map(e=>{const s=N.includes(e);return(0,j.jsx)("button",{className:"btn milestone-btn ".concat(s?"active":""),onClick:()=>F(e),children:e.replace("R$ ","").replace(".000.000"," mi").replace(".000"," mil")},e)})})]})})}),(0,j.jsxs)(n.fI,{children:[(0,j.jsx)(n.fv,{md:"6",sm:"12",children:(0,j.jsx)(n.Zp,{className:"mb-2 kpi-card",children:(0,j.jsxs)(n.bw,{children:[(0,j.jsx)("h6",{className:"text-muted mb-1",children:"Aniversariantes"}),(0,j.jsx)("h3",{className:"text-info mb-0",children:M}),(0,j.jsx)("small",{className:"text-muted mt-1 d-block",children:"Produtores com anivers\xe1rio no per\xedodo"})]})})}),(0,j.jsx)(n.fv,{md:"6",sm:"12",children:(0,j.jsx)(n.Zp,{className:"mb-2 kpi-card",children:(0,j.jsxs)(n.bw,{children:[(0,j.jsx)("h6",{className:"text-muted mb-1",children:"Metas batidas"}),(0,j.jsx)("h3",{className:"text-success mb-0",children:C}),(0,j.jsx)("small",{className:"text-muted mt-1 d-block",children:"Produtores que bateram meta no per\xedodo"})]})})})]}),(0,j.jsx)(n.Zp,{className:"mt-2",children:(0,j.jsx)(n.bw,{style:{minHeight:400,position:"relative"},children:$?(0,j.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{height:380},children:(0,j.jsx)(n.y$,{color:"primary"})}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{className:"d-flex align-items-center justify-content-between mb-2",children:[(0,j.jsx)(n.$n,{color:"link",className:"p-0",onClick:E,children:(0,j.jsx)(r.A,{size:18})}),(0,j.jsx)(n.$n,{color:"link",className:"p-0 text-body",onClick:J,children:(0,j.jsxs)("h4",{className:"mb-0",children:[h[g.month()]," ",g.year()]})}),(0,j.jsx)(n.$n,{color:"link",className:"p-0",onClick:I,children:(0,j.jsx)(c.A,{size:18})})]}),(0,j.jsx)(n.fI,{className:"no-gutters mb-1",children:u.map(e=>(0,j.jsx)(n.fv,{className:"text-center",children:(0,j.jsx)("small",{className:"text-muted",children:e})},e))}),(0,j.jsx)("div",{className:"d-flex flex-wrap",children:Z.map(e=>{const s=e.format("YYYY-MM-DD"),a=Y[s]||{birthdays:[],goals:[]},t=!H(e),l=q(e);return(0,j.jsxs)("div",{className:"border rounded ".concat(l?"border-primary shadow-sm":"border-light"),style:{width:"14.2857%",minHeight:95,padding:8},children:[(0,j.jsx)("div",{className:"d-flex justify-content-end ".concat(t?"text-muted":""),children:(0,j.jsx)("small",{className:l?"text-primary font-weight-bold":"",children:e.date()})}),[{type:"birthday",events:a.birthdays},{type:"goal",events:a.goals}].filter(e=>e.events.length>0).map(e=>{const a="".concat(s,"-").concat(e.type),t="birthday"===e.type,l=t?"warning":"success",n=e.events.slice(0,2),r=e.events.length-n.length;let c=t?n.map(e=>e.name.split(" ")[0]).join(", "):n.map(e=>e.milestone_achieved||e.name.split(" ")[0]).join(", ");return r>0&&(c+=" +".concat(r)),(0,j.jsx)("div",{className:"badge badge-light-".concat(l," d-block text-truncate mb-25 px-1"),style:{cursor:"pointer",whiteSpace:"nowrap",overflow:"hidden"},title:e.events.map(e=>e.name).join(", "),onClick:()=>{se(e.type),te(s),X(e.events),V(!0)},children:(0,j.jsxs)("small",{children:[t?"\ud83c\udf82 ":"\ud83c\udfc6 ",c]})},a)})]},s)})})]})})}),(0,j.jsxs)(n.aF,{isOpen:y,toggle:J,centered:!0,children:[(0,j.jsx)(n.rQ,{toggle:J,children:"Selecionar m\xeas e ano"}),(0,j.jsx)(n.cw,{children:(0,j.jsxs)(n.fI,{children:[(0,j.jsxs)(n.fv,{md:"6",children:[(0,j.jsx)(n.JU,{children:"M\xeas"}),(0,j.jsx)(n.pd,{type:"select",value:g.month(),onChange:e=>T(Number(e.target.value)),children:h.map((e,s)=>(0,j.jsx)("option",{value:s,children:e},s))})]}),(0,j.jsxs)(n.fv,{md:"6",children:[(0,j.jsx)(n.JU,{children:"Ano"}),(0,j.jsx)(n.pd,{type:"select",value:g.year(),onChange:e=>U(Number(e.target.value)),children:K.map(e=>(0,j.jsx)("option",{value:e,children:e},e))})]})]})})]}),(0,j.jsxs)(n.aF,{isOpen:G,toggle:()=>V(!1),centered:!0,size:"lg",children:[(0,j.jsx)(n.rQ,{toggle:()=>V(!1),className:"border-0 pb-0",children:(0,j.jsxs)("div",{children:[(0,j.jsx)("h5",{className:"mb-0 fw-semibold",children:"birthday"===ee?"Aniversariantes do dia":"Metas batidas no dia"}),(0,j.jsx)("small",{className:"text-muted",children:o()(ae).format("D [de] MMMM [de] YYYY")})]})}),(0,j.jsx)(n.cw,{style:{maxHeight:"65vh",overflowY:"auto",paddingTop:"0.75rem"},children:W.length>0?W.map((e,s)=>(0,j.jsxs)("div",{className:"p-3 mb-3 rounded border border-dark",children:[(0,j.jsx)("h6",{className:"mb-1",children:e.name}),e.milestone_achieved&&(0,j.jsxs)("small",{className:"text-success",children:["Meta atingida: ",e.milestone_achieved]}),(0,j.jsxs)(n.fI,{className:"mt-1",children:[(0,j.jsxs)(n.fv,{sm:"6",children:[(0,j.jsx)("small",{className:"text-muted d-block",children:"Email"}),e.email]}),(0,j.jsxs)(n.fv,{sm:"6",children:[(0,j.jsx)("small",{className:"text-muted d-block",children:"Gerente"}),e.manager_email]}),(0,j.jsxs)(n.fv,{sm:"6",children:[(0,j.jsx)("small",{className:"text-muted d-block",children:"Faturamento no Per\xedodo"}),(0,j.jsx)("span",{children:x.format(e.revenue)}),(0,j.jsxs)("small",{className:"text-muted d-block mt-1",style:{fontSize:"10px"},children:["Per\xedodo selecionado (",o()(ae).format("MM/YYYY"),")"]})]}),(0,j.jsxs)(n.fv,{sm:"6",children:[(0,j.jsx)("small",{className:"text-muted d-block",children:"Faturamento Total"}),(0,j.jsx)("span",{children:x.format(e.revenue_total)}),(0,j.jsx)("small",{className:"text-muted d-block mt-1",style:{fontSize:"10px"},children:"Acumulado (todos os tempos)"})]})]})]},s)):(0,j.jsx)("div",{className:"text-center text-muted py-3",children:"Nenhum evento encontrado."})})]})]})}}}]);