"use strict";(self.webpackChunksixbase_backoffice=self.webpackChunksixbase_backoffice||[]).push([[6186],{16186:(e,t,n)=>{function r(e){var t,n,r,s=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);s--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new a(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function a(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return a=function(e){this.s=e,this.n=e.next},a.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new a(e)}n.r(t),n.d(t,{default:()=>o});var s=n(9950),i=n(35203),l=n(45530),c=n(44414);const o=e=>{let{apiEndpoint:t="market/images/banner",bannerTypeOptions:n=[{id:1,name:"Desktop"},{id:2,name:"Mobile"}]}=e;const[a,o]=(0,s.useState)([]),[h,d]=(0,s.useState)([]),[u,x]=(0,s.useState)([]),[p,j]=(0,s.useState)([]),m=()=>{l.F.get(t).then(e=>d(e.data)).catch(e=>console.log(e))};return(0,s.useEffect)(()=>{m()},[]),(0,c.jsx)("section",{id:"pageHomeLogs",children:(0,c.jsxs)("div",{children:[(0,c.jsx)("h3",{className:"mb-1",children:"Visualizar imagens"}),(0,c.jsxs)(i.XI,{children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{children:"#"}),(0,c.jsx)("th",{children:"Upload"}),(0,c.jsx)("th",{children:"Tipo"}),(0,c.jsx)("th",{children:"Link"}),(0,c.jsx)("th",{className:"text-center",children:"A\xe7\xe3o"})]})}),(0,c.jsx)("tbody",{children:h.map((e,t)=>(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{scope:"row",children:t+1}),(0,c.jsx)("th",{children:(0,c.jsx)("img",{src:e.file,alt:"",style:{maxWidth:420}})}),(0,c.jsx)("th",{children:e.type.name}),(0,c.jsx)("th",{children:e.url}),(0,c.jsx)("th",{className:"text-center",children:(0,c.jsx)(i.$n,{color:"danger",onClick:()=>(e=>{l.F.delete("market/banners/".concat(e.uuid)).then(()=>d(t=>t.filter(t=>t.uuid!==e.uuid))).catch(e=>console.log(e))})(e),className:"p-1",children:(0,c.jsx)("i",{className:"bx bx-trash-alt",style:{fontSize:21}})})})]},e.uuid))})]}),(0,c.jsx)("h3",{className:"mt-2 mb-1",children:"Enviar novas imagens"}),(0,c.jsx)("p",{children:"Tamanho recomendado: 1410 px x 400 px"}),(0,c.jsxs)(i.XI,{children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{children:"#"}),(0,c.jsx)("th",{children:"Upload"}),(0,c.jsx)("th",{children:"Tipo"}),(0,c.jsx)("th",{children:"Link"})]})}),(0,c.jsx)("tbody",{children:Array.apply(null,{length:a.length+1}).map((e,t)=>(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{scope:"row",children:t+1}),(0,c.jsx)("td",{children:(0,c.jsx)("input",{type:"file",id:"avatar",name:"avatar",accept:"image/*",onChange:e=>((e,t)=>{const n=e.target.files;n&&n.length>0&&(a[t]?o(e=>{const r=[...e];return r[t]=n[0],r}):o(e=>[...e,n[0]]))})(e,t),multiple:!1,style:{background:"#eee",padding:"10px 12px",borderRadius:4,color:"#1f1f1f",maxWidth:250}})}),(0,c.jsx)("td",{children:(0,c.jsx)("select",{name:"type",onChange:e=>((e,t)=>{j(n=>{const r=[...n];return r[t]=e.target.value,r})})(e,t),children:n.map(e=>(0,c.jsx)("option",{value:e.id,children:e.name},e.id))})}),(0,c.jsx)("td",{children:(0,c.jsx)(i.pd,{type:"text",name:"url",placeholder:"Url da oferta",onChange:e=>((e,t)=>{x(n=>{const r=[...n];return r[t]=e.target.value,r})})(e,t)})})]},t))})]}),(0,c.jsx)(i.fI,{children:(0,c.jsx)(i.fv,{className:"d-flex justify-content-end",children:(0,c.jsx)(i.$n,{onClick:async()=>{if(a.length>0){const m=[];var e,t=!1,n=!1;try{for(var s,i=r(a);t=!(s=await i.next()).done;t=!1){const e=s.value;{const t=await l.F.get("market/banners/".concat(e.name));m.push(t.data)}}}catch(j){n=!0,e=j}finally{try{t&&null!=i.return&&await i.return()}finally{if(n)throw e}}var c,o=!1,h=!1;try{for(var d,x=r(m.entries());o=!(d=await x.next()).done;o=!1){const[e,t]=d.value;try{await fetch(t.url,{method:"PUT",headers:{"Content-Type":"application/octet-stream"},body:a[e]}),await l.F.post("market/banners",{key:t.key,url:u[e]||"",id_type:p[e]||"1"})}catch(f){console.log(f)}}}catch(j){h=!0,c=j}finally{try{o&&null!=x.return&&await x.return()}finally{if(h)throw c}}}m()},color:"primary",children:"Salvar Imagens"})})})]})})}}}]);