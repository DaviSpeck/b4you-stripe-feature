/auth/login:
  post:
    tags:
      - Autenticação
    summary: Login do usuário
    description: Autentica um usuário no sistema
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: ./modulos/dashboard/auth/schemas.yaml#/components/schemas/LoginRequest
    responses:
      '200':
        description: Login realizado com sucesso
        content:
          application/json:
            schema:
              $ref: ./modulos/dashboard/auth/schemas.yaml#/components/schemas/LoginResponse
      '401':
        $ref: ./components/common-responses.yaml#/components/responses/UnauthorizedError
      '429':
        $ref: ./components/common-responses.yaml#/components/responses/TooManyRequestsError
      '500':
        $ref: ./components/common-responses.yaml#/components/responses/InternalServerError
/auth/login-merlin:
  post:
    tags:
      - Autenticação
    summary: Login Merlin
    description: Autentica um usuário no sistema Merlin
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: ./modulos/dashboard/auth/schemas.yaml#/components/schemas/LoginMerlinRequest
    responses:
      '200':
        description: Login realizado com sucesso
        content:
          application/json:
            schema:
              $ref: ./modulos/dashboard/auth/schemas.yaml#/components/schemas/LoginMerlinResponse
      '401':
        $ref: ./components/common-responses.yaml#/components/responses/UnauthorizedError
      '429':
        $ref: ./components/common-responses.yaml#/components/responses/TooManyRequestsError
      '500':
        $ref: ./components/common-responses.yaml#/components/responses/InternalServerError
/auth/backoffice:
  get:
    tags:
      - Autenticação
    summary: Gerar autenticação do backoffice
    description: Gera token de autenticação para o backoffice
    responses:
      '200':
        description: Token gerado com sucesso
        content:
          application/json:
            schema:
              $ref: ./modulos/dashboard/auth/schemas.yaml#/components/schemas/BackofficeAuthResponse
      '500':
        $ref: ./components/common-responses.yaml#/components/responses/InternalServerError
/auth/logout:
  get:
    tags:
      - Autenticação
    summary: Logout do usuário
    description: Realiza logout do usuário logado
    security:
      - BearerAuth: []
    responses:
      '200':
        description: Logout realizado com sucesso
        content:
          application/json:
            schema:
              $ref: ./modulos/dashboard/auth/schemas.yaml#/components/schemas/LogoutResponse
      '401':
        $ref: ./components/common-responses.yaml#/components/responses/UnauthorizedError
      '500':
        $ref: ./components/common-responses.yaml#/components/responses/InternalServerError
/auth/me:
  get:
    tags:
      - Autenticação
    summary: Informações do usuário logado
    description: Retorna informações do usuário atualmente logado
    security:
      - BearerAuth: []
    responses:
      '200':
        description: Informações do usuário
        content:
          application/json:
            schema:
              $ref: ./modulos/dashboard/auth/schemas.yaml#/components/schemas/MeResponse
      '401':
        $ref: ./components/common-responses.yaml#/components/responses/UnauthorizedError
      '500':
        $ref: ./components/common-responses.yaml#/components/responses/InternalServerError
/auth/change-password:
  post:
    tags:
      - Autenticação
    summary: Alterar senha do usuário logado
    description: Altera a senha do usuário atualmente logado
    security:
      - BearerAuth: []
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: ./modulos/dashboard/auth/schemas.yaml#/components/schemas/ChangeLoggedUserPasswordRequest
    responses:
      '200':
        description: Senha alterada com sucesso
        content:
          application/json:
            schema:
              $ref: ./modulos/dashboard/auth/schemas.yaml#/components/schemas/ChangePasswordResponse
      '400':
        $ref: ./components/common-responses.yaml#/components/responses/BadRequest
      '401':
        $ref: ./components/common-responses.yaml#/components/responses/UnauthorizedError
      '500':
        $ref: ./components/common-responses.yaml#/components/responses/InternalServerError
/auth/change-account/{account_id}:
  put:
    tags:
      - Autenticação
    summary: Alterar conta do usuário
    description: Altera a conta ativa do usuário logado
    security:
      - BearerAuth: []
    parameters:
      - name: account_id
        in: path
        required: true
        description: ID da conta para alterar
        schema:
          type: integer
          example: 1
    responses:
      '200':
        description: Conta alterada com sucesso
        content:
          application/json:
            schema:
              $ref: ./components/common-schemas.yaml#/components/schemas/SuccessResponse
      '400':
        $ref: ./components/common-responses.yaml#/components/responses/BadRequest
      '401':
        $ref: ./components/common-responses.yaml#/components/responses/UnauthorizedError
      '403':
        $ref: ./components/common-responses.yaml#/components/responses/Forbidden
      '500':
        $ref: ./components/common-responses.yaml#/components/responses/InternalServerError
/auth/validate/token/{token}:
  get:
    tags:
      - Autenticação
    summary: Validar token
    description: Valida se um token é válido
    parameters:
      - name: token
        in: path
        required: true
        description: Token a ser validado
        schema:
          type: string
          example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
    responses:
      '200':
        description: Token validado
        content:
          application/json:
            schema:
              $ref: ./modulos/dashboard/auth/schemas.yaml#/components/schemas/ValidateTokenResponse
      '400':
        $ref: ./components/common-responses.yaml#/components/responses/BadRequest
      '500':
        $ref: ./components/common-responses.yaml#/components/responses/InternalServerError
/auth/forgotpassword:
  post:
    tags:
      - Autenticação
    summary: Esqueci minha senha
    description: Envia email de recuperação de senha
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: ./modulos/dashboard/auth/schemas.yaml#/components/schemas/ForgotPasswordRequest
    responses:
      '200':
        description: Email de recuperação enviado
        content:
          application/json:
            schema:
              $ref: ./modulos/dashboard/auth/schemas.yaml#/components/schemas/ForgotPasswordResponse
      '400':
        $ref: ./components/common-responses.yaml#/components/responses/BadRequest
      '500':
        $ref: ./components/common-responses.yaml#/components/responses/InternalServerError
/auth/change/password:
  post:
    tags:
      - Autenticação
    summary: Alterar senha com token
    description: Altera a senha usando token de recuperação
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: ./modulos/dashboard/auth/schemas.yaml#/components/schemas/ChangePasswordRequest
    responses:
      '200':
        description: Senha alterada com sucesso
        content:
          application/json:
            schema:
              $ref: ./modulos/dashboard/auth/schemas.yaml#/components/schemas/ChangePasswordResponse
      '400':
        $ref: ./components/common-responses.yaml#/components/responses/BadRequest
      '500':
        $ref: ./components/common-responses.yaml#/components/responses/InternalServerError
/auth/student:
  get:
    tags:
      - Autenticação
    summary: Sessão do estudante
    description: Retorna informações da sessão do estudante
    security:
      - BearerAuth: []
    responses:
      '200':
        description: Sessão do estudante
        content:
          application/json:
            schema:
              $ref: ./modulos/dashboard/auth/schemas.yaml#/components/schemas/StudentSessionResponse
      '401':
        $ref: ./components/common-responses.yaml#/components/responses/UnauthorizedError
      '500':
        $ref: ./components/common-responses.yaml#/components/responses/InternalServerError
/balance:
  get:
    tags:
      - Saldo
    summary: Obter saldo do usuário
    description: >-
      Retorna informações detalhadas sobre o saldo do usuário, incluindo saldo disponível, bloqueado, configurações de
      saque e dados bancários
    security:
      - BearerAuth: []
    responses:
      '200':
        description: Saldo obtido com sucesso
        content:
          application/json:
            schema:
              $ref: ./modulos/dashboard/balance/schemas.yaml#/components/schemas/BalanceResponse
            example:
              available_balance: 2500.75
              referral_balance: 150
              blocked_balance: 500.25
              pending_balance: 500.25
              bank_account:
                id: 123
                bank_name: Banco do Brasil
                agency: '1234'
                account: 12345-6
                account_type: checking
                holder_name: João Silva
                document: 123.456.789-00
                pix_key: joao@email.com
                pix_type: email
              withdrawal_settings:
                cost: 2.5
                max_monthly_amount: 10000
                min_amount_per_request: 50
                available_amount: 7500
              withheld_balance: 100
              max_withdrawal_amount: 2000
              blocked: false
      '401':
        description: Não autorizado
        content:
          application/json:
            $ref: ./components/common-responses.yaml#/components/responses/UnauthorizedError
      '500':
        description: Erro interno do servidor
        content:
          application/json:
            $ref: ./components/common-responses.yaml#/components/responses/InternalServerError
/balance/total:
  get:
    tags:
      - Saldo
    summary: Obter total de comissões por tipo
    description: Retorna o total de comissões do usuário separado por tipo (produtor, afiliado, outros) nos últimos 30 dias
    security:
      - BearerAuth: []
    responses:
      '200':
        description: Total de comissões obtido com sucesso
        content:
          application/json:
            schema:
              $ref: ./modulos/dashboard/balance/schemas.yaml#/components/schemas/TotalBalanceResponse
            example:
              producer: 1500
              affiliate: 800
              others: 200
              createdAt: '2024-01-15T10:30:00Z'
      '401':
        description: Não autorizado
        content:
          application/json:
            $ref: ./components/common-responses.yaml#/components/responses/UnauthorizedError
      '500':
        description: Erro interno do servidor
        content:
          application/json:
            $ref: ./components/common-responses.yaml#/components/responses/InternalServerError
/sales/{email}:
  get:
    tags:
      - Vendas
    summary: Obter código do cliente
    description: Envia um código de segurança para o email do cliente
    parameters:
      - name: email
        in: path
        required: true
        description: Email do cliente
        schema:
          type: string
          format: email
          example: cliente@email.com
    responses:
      '200':
        description: Código enviado com sucesso
        content:
          application/json:
            schema:
              $ref: ./modulos/sales/schemas.yaml#/components/schemas/ClientCodeResponse
      '400':
        $ref: ./components/common-responses.yaml#/components/responses/BadRequest
      '500':
        $ref: ./components/common-responses.yaml#/components/responses/InternalServerError
/sales/code/{code}:
  get:
    tags:
      - Vendas
    summary: Verificar código e obter vendas
    description: Verifica o código de segurança e retorna as vendas do cliente
    parameters:
      - name: code
        in: path
        required: true
        description: Código de segurança
        schema:
          type: string
          example: ABC123
    responses:
      '200':
        description: Vendas encontradas com sucesso
        content:
          application/json:
            schema:
              $ref: ./modulos/sales/schemas.yaml#/components/schemas/VerifyCodeResponse
      '400':
        $ref: ./components/common-responses.yaml#/components/responses/BadRequest
      '404':
        $ref: ./components/common-responses.yaml#/components/responses/NotFound
      '500':
        $ref: ./components/common-responses.yaml#/components/responses/InternalServerError
/sales/subscriptions/cancel/{id_student}/{uuid_subscription}:
  post:
    tags:
      - Vendas
    summary: Cancelar assinatura
    description: Cancela uma assinatura específica do estudante
    parameters:
      - name: id_student
        in: path
        required: true
        description: ID do estudante
        schema:
          type: integer
          example: 1
      - name: uuid_subscription
        in: path
        required: true
        description: UUID da assinatura
        schema:
          type: string
          format: uuid
          example: 123e4567-e89b-12d3-a456-426614174000
    responses:
      '200':
        description: Assinatura cancelada com sucesso
        content:
          application/json:
            schema:
              $ref: ./modulos/sales/schemas.yaml#/components/schemas/CancelSubscriptionResponse
      '400':
        $ref: ./components/common-responses.yaml#/components/responses/BadRequest
      '404':
        $ref: ./components/common-responses.yaml#/components/responses/NotFound
      '500':
        $ref: ./components/common-responses.yaml#/components/responses/InternalServerError
/sales/subscriptions/card:
  post:
    tags:
      - Vendas
    summary: Atualizar cartão de crédito
    description: Atualiza os dados do cartão de crédito de uma assinatura
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: ./modulos/sales/schemas.yaml#/components/schemas/UpdateCardRequest
    responses:
      '200':
        description: Cartão atualizado com sucesso
        content:
          application/json:
            schema:
              $ref: ./modulos/sales/schemas.yaml#/components/schemas/UpdateCardResponse
      '400':
        $ref: ./components/common-responses.yaml#/components/responses/BadRequest
      '404':
        $ref: ./components/common-responses.yaml#/components/responses/NotFound
      '500':
        $ref: ./components/common-responses.yaml#/components/responses/InternalServerError
