"use strict";(self.webpackChunksixbase_backoffice=self.webpackChunksixbase_backoffice||[]).push([[9895],{7609:(e,s,a)=>{a.d(s,{A:()=>r});var n=a(77265),i=a(44414);function r(e){let{size:s=24,className:a="",text:r="Carregando...",showText:t=!1}=e;return(0,i.jsxs)("div",{className:"d-flex flex-column align-items-center ".concat(a),children:[(0,i.jsx)(n.A,{size:s,style:{animation:"spin 1s linear infinite"}}),t&&(0,i.jsx)("span",{className:"mt-2 text-muted",children:r})]})}},9895:(e,s,a)=>{a.r(s),a.d(s,{default:()=>P});var n=a(89379),i=a(9950),r=a(30639),t=a(13467),l=a(35203),c=(a(37564),a(94300),a(11749)),d=a(45530),o=a(13955),x=a(44414);function h(e){let{show:s,toggle:a,data:n}=e;const[r,t]=(0,i.useState)(""),c=e=>{r===e?t():t(e)};let d=0,h=0;return(0,x.jsxs)(l.aF,{id:"modalViewStudentProducts",isOpen:s,toggle:a,centered:!0,children:[(0,x.jsxs)(l.rQ,{toggle:a,children:["Vendas de ",n&&n.full_name]}),(0,x.jsxs)(l.cw,{children:[s&&n&&(0,x.jsx)(l.Zp,{children:(0,x.jsx)(l.bw,{children:(0,x.jsxs)("div",{className:"view-ss-container",children:[(0,x.jsxs)("div",{className:"view-ss-item",children:[(0,x.jsx)("span",{children:"Produtor"}),(0,x.jsx)("span",{children:n.full_name})]}),(0,x.jsx)("hr",{}),(0,x.jsxs)("div",{className:"view-ss-item",children:[(0,x.jsx)("span",{children:"Vendas"}),(0,x.jsx)("span",{children:(0,o.cC)((n.producer.forEach(e=>d+=e.report.paid.total.total_sales),d),0)})]}),(0,x.jsx)("hr",{}),(0,x.jsxs)("div",{className:"view-ss-item",children:[(0,x.jsx)("span",{children:"Comiss\xf5es"}),(0,x.jsx)("span",{children:(0,o.cC)((n.producer.forEach(e=>h+=e.report.paid.total.total_commission),h),0)})]})]})})}),s&&n&&n.producer.map(e=>(0,x.jsx)(l.Zp,{children:(0,x.jsx)(l.bw,{children:(0,x.jsxs)("div",{className:"view-ss-container",children:[(0,x.jsxs)("div",{className:"view-ss-item",children:[(0,x.jsx)("span",{children:"Produto"}),(0,x.jsx)("span",{children:e.name})]}),(0,x.jsx)("hr",{}),(0,x.jsxs)(l.nD,{flush:!0,open:r,toggle:c,children:[(0,x.jsxs)(l.As,{children:[(0,x.jsx)(l.u,{targetId:"".concat(e.uuid,"-1"),children:"Vendas"}),(0,x.jsxs)(l.jR,{accordionId:"".concat(e.uuid,"-1"),children:[(0,x.jsxs)("div",{className:"view-ss-item",children:[(0,x.jsx)("span",{children:"Total"}),(0,x.jsx)("span",{children:(0,o.cC)(e.report.paid.total.total_sales,0)})]}),(0,x.jsx)("hr",{}),(0,x.jsxs)("div",{className:"view-ss-item",children:[(0,x.jsx)("span",{children:"Pix"}),(0,x.jsx)("span",{children:(0,o.cC)(e.report.paid.pix.total,0)})]}),(0,x.jsx)("hr",{}),(0,x.jsxs)("div",{className:"view-ss-item",children:[(0,x.jsx)("span",{children:"Cart\xe3o"}),(0,x.jsx)("span",{children:(0,o.cC)(e.report.paid.card.total,0)})]}),(0,x.jsx)("hr",{}),(0,x.jsxs)("div",{className:"view-ss-item",children:[(0,x.jsx)("span",{children:"Boleto"}),(0,x.jsx)("span",{children:(0,o.cC)(e.report.paid.billet.total,0)})]})]})]}),(0,x.jsxs)(l.As,{children:[(0,x.jsx)(l.u,{targetId:"".concat(e.uuid,"-2"),children:"Comiss\xf5es"}),(0,x.jsxs)(l.jR,{accordionId:"".concat(e.uuid,"-2"),children:[(0,x.jsxs)("div",{className:"view-ss-item",children:[(0,x.jsx)("span",{children:"Total"}),(0,x.jsx)("span",{children:(0,o.cC)(e.report.paid.total.total_commission,0)})]}),(0,x.jsx)("hr",{}),(0,x.jsxs)("div",{className:"view-ss-item",children:[(0,x.jsx)("span",{children:"Pix"}),(0,x.jsx)("span",{children:(0,o.cC)(e.report.paid.pix.commission,0)})]}),(0,x.jsx)("hr",{}),(0,x.jsxs)("div",{className:"view-ss-item",children:[(0,x.jsx)("span",{children:"Cart\xe3o"}),(0,x.jsx)("span",{children:(0,o.cC)(e.report.paid.card.commission,0)})]}),(0,x.jsx)("hr",{}),(0,x.jsxs)("div",{className:"view-ss-item",children:[(0,x.jsx)("span",{children:"Boleto"}),(0,x.jsx)("span",{children:(0,o.cC)(e.report.paid.billet.commission,0)})]})]})]}),(0,x.jsxs)(l.As,{children:[(0,x.jsx)(l.u,{targetId:"".concat(e.uuid,"-3"),children:"Reembolsos"}),(0,x.jsxs)(l.jR,{accordionId:"".concat(e.uuid,"-3"),children:[(0,x.jsxs)("div",{className:"view-ss-item",children:[(0,x.jsx)("span",{children:"Total"}),(0,x.jsx)("span",{children:(0,o.cC)(e.report.refunded.total.total_sales,0)})]}),(0,x.jsx)("hr",{}),(0,x.jsxs)("div",{className:"view-ss-item",children:[(0,x.jsx)("span",{children:"Pix"}),(0,x.jsx)("span",{children:(0,o.cC)(e.report.refunded.pix.total,0)})]}),(0,x.jsx)("hr",{}),(0,x.jsxs)("div",{className:"view-ss-item",children:[(0,x.jsx)("span",{children:"Cart\xe3o"}),(0,x.jsx)("span",{children:(0,o.cC)(e.report.refunded.card.total,0)})]}),(0,x.jsx)("hr",{}),(0,x.jsxs)("div",{className:"view-ss-item",children:[(0,x.jsx)("span",{children:"Boleto"}),(0,x.jsx)("span",{children:(0,o.cC)(e.report.refunded.billet.total,0)})]})]})]}),(0,x.jsxs)(l.As,{children:[(0,x.jsx)(l.u,{targetId:"".concat(e.uuid,"-4"),children:"Aprova\xe7\xe3o de cart\xe3o"}),(0,x.jsxs)(l.jR,{accordionId:"".concat(e.uuid,"-4"),children:[(0,x.jsxs)("div",{className:"view-ss-item",children:[(0,x.jsx)("span",{children:"Total"}),(0,x.jsx)("span",{children:(0,o.cC)(e.report.card.total_amount,0)})]}),(0,x.jsx)("hr",{}),(0,x.jsxs)("div",{className:"view-ss-item",children:[(0,x.jsx)("span",{children:"Aprovados"}),(0,x.jsx)("span",{children:(0,o.cC)(e.report.card.paid_amount,0)})]}),(0,x.jsxs)("div",{className:"view-ss-item",children:[(0,x.jsx)("span",{}),(0,x.jsxs)("span",{className:"mt-1",children:[e.report.card.paid_percentage," %"]})]}),(0,x.jsx)("hr",{}),(0,x.jsxs)("div",{className:"view-ss-item",children:[(0,x.jsx)("span",{children:"Negados"}),(0,x.jsx)("span",{children:(0,o.cC)(e.report.card.denied_amount,0)})]}),(0,x.jsxs)("div",{className:"view-ss-item",children:[(0,x.jsx)("span",{}),(0,x.jsxs)("span",{className:"mt-1",children:[e.report.card.denied_percentage," %"]})]})]})]}),(0,x.jsx)("hr",{})]})]})})},e.uuid))]})]})}function m(e){let{show:s,toggle:a,data:n}=e;return(0,x.jsxs)(l.aF,{id:"modalViewStudentProducts",isOpen:s,toggle:a,centered:!0,children:[(0,x.jsxs)(l.rQ,{toggle:a,children:["Coprodu\xe7\xf5es de ",n&&n.full_name]}),(0,x.jsxs)(l.cw,{children:[s&&n&&n.coproductions.map(e=>(0,x.jsx)(l.Zp,{children:(0,x.jsx)(l.bw,{children:(0,x.jsxs)("div",{className:"view-ss-container",children:[(0,x.jsxs)("div",{className:"view-ss-item",children:[(0,x.jsx)("span",{children:"Produto"}),(0,x.jsx)("span",{children:e.product.name})]}),(0,x.jsxs)("div",{className:"view-ss-item mt-1",children:[(0,x.jsx)("span",{children:"UUID"}),(0,x.jsx)("span",{children:e.product.uuid})]}),(0,x.jsx)("hr",{}),(0,x.jsxs)("div",{className:"view-ss-item",children:[(0,x.jsx)("span",{children:"Ativo"}),(0,x.jsx)(l.Ex,{color:2===e.status.id?"success":"danger",children:2===e.status.id?"Sim":"N\xe3o"})]})]})})},e.uuid)),s&&n&&0===n.coproductions.length&&(0,x.jsx)("div",{className:"pt-1 pb-1",children:"Sem coprodu\xe7\xf5es para exibir."})]})]})}function p(e){let{show:s,toggle:a,data:n}=e;return(0,x.jsxs)(l.aF,{id:"modalViewStudentProducts",isOpen:s,toggle:a,centered:!0,children:[(0,x.jsxs)(l.rQ,{toggle:a,children:["Afilia\xe7\xe3o de ",n&&n.full_name]}),(0,x.jsxs)(l.cw,{children:[s&&n&&n.affiliates.map(e=>(0,x.jsx)(l.Zp,{children:(0,x.jsx)(l.bw,{children:(0,x.jsxs)("div",{className:"view-ss-container",children:[(0,x.jsxs)("div",{className:"view-ss-item",children:[(0,x.jsx)("span",{children:"Produto"}),(0,x.jsx)("span",{children:e.product.name})]}),(0,x.jsxs)("div",{className:"view-ss-item  mt-1",children:[(0,x.jsx)("span",{children:"UUID"}),(0,x.jsx)("span",{children:e.product.uuid})]}),(0,x.jsx)("hr",{}),(0,x.jsxs)("div",{className:"view-ss-item",children:[(0,x.jsx)("span",{children:"Commis\xe3o"}),(0,x.jsxs)("span",{children:[e.commission," %"]})]}),(0,x.jsx)("hr",{}),(0,x.jsxs)("div",{className:"view-ss-item",children:[(0,x.jsx)("span",{children:"Ativo"}),(0,x.jsx)(l.Ex,{color:2===e.status.id?"success":"danger",children:2===e.status.id?"Sim":"N\xe3o"})]})]})})},e.uuid)),s&&n&&0===n.affiliates.length&&(0,x.jsx)("div",{className:"pt-1 pb-1",children:"Sem afilia\xe7\xf5es para exibir."})]})]})}var j=a(96690),u=a(58301),v=a(29251),g=a(44763),w=a(59051),f=a.n(w),N=a(98664),b=a(34964),C=a(12449),_=a(26502),S=a(11566),y=a(7609);const A=(0,c.A)((e,s,a,n,i,r,t,c)=>[{name:"Email",cell:e=>e.email},{name:"Nome",cell:e=>e.full_name},{name:"Documento",cell:e=>(0,o.Tq)(e.document_number,"CPF")},{name:"Telefone",cell:e=>(0,o.Xu)(e.whatsapp)},{name:"Criado Em",cell:e=>f()(e.created_at).format("DD/MM/YYYY")},{name:"Status",cell:e=>(0,x.jsx)(l.Ex,{color:e.status.color,className:"view-details",children:e.status.label})},{name:"A\xe7\xf5es",cell:e=>{let{uuid:s}=e;return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(j.N_,{to:"/producer/".concat(s),className:"mr-2",children:(0,x.jsx)(l.Ex,{color:"primary",className:"view-details",children:(0,x.jsx)(v.A,{size:20})})}),!r&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(l.Ex,{color:"warning",className:"view-details","data-tip":"Acessar Painel","data-for":"tooltip-".concat(s),onClick:e=>i(e,s,t),children:(0,x.jsx)(g.A,{size:20})}),(0,x.jsx)(S.A,{id:"tooltip-".concat(s),place:"top",effect:"solid"})]}),r&&(0,x.jsx)("span",{children:"..."})]})}}]);function P(){const{skin:e}=(0,t.h)(),[s,a]=(0,i.useState)([]),[c,o]=(0,i.useState)(0),[j,v]=(0,i.useState)(10),[g,w]=(0,i.useState)(""),[S,P]=(0,i.useState)(!1),[k,Y]=(0,i.useState)(!1),[E,R]=(0,i.useState)(!1),[D,F]=(0,i.useState)(!1),T=(0,u.W6)(),[U,I]=(0,i.useState)(!1),[M,O]=(0,i.useState)(null),[V,z]=(0,i.useState)({follow_up:"",blocked_withdrawal:"",negative_balance:""}),[Z,B]=(0,i.useState)({calendar:[f()().startOf("month").toDate(),f()().toDate()]}),[q,J]=(0,i.useState)(!1),L=async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;P(!0);try{const n=new URLSearchParams;n.append("page",e),n.append("size",s||j);const i=g.trim();i&&n.append("input",i),Object.keys(V).forEach(e=>{n.append(e,V[e])});const r=await d.F.get("/users?".concat(n.toString())),{data:{info:t}}=r;o(t.count),a(t.rows)}catch(n){console.log(n)}P(!1)},Q=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;s&&O(s),Y(!k)},$=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;s&&O(s),R(!E)},H=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;s&&O(s),F(!D)};(0,i.useEffect)(()=>{(0===g.length||g.trim().length>0)&&L(0)},[g]);const W=e=>{z(s=>(0,n.A)((0,n.A)({},s),{},{[e.currentTarget.name]:e.currentTarget.value}))};return(0,x.jsxs)("section",{id:"pageHomeProducers",children:[(0,x.jsx)("h2",{className:"mb-2",children:"Produtores"}),(0,x.jsx)(h,{show:k,toggle:Q,data:M}),(0,x.jsx)(m,{show:E,toggle:$,data:M}),(0,x.jsx)(p,{show:D,toggle:H,data:M}),(0,x.jsxs)(l.aF,{isOpen:U,toggle:()=>{I(!1)},centered:!0,children:[(0,x.jsx)(l.rQ,{toggle:()=>I(!U),children:"Filtrar"}),(0,x.jsxs)(l.cw,{children:[(0,x.jsxs)("div",{className:"mb-1",children:[(0,x.jsx)(l.JU,{className:"mb-1",children:"Alerta"}),(0,x.jsxs)(l.pd,{type:"select",name:"follow_up",onChange:W,defaultValue:V.follow_up,children:[(0,x.jsx)("option",{value:"",children:"N\xe3o"}),(0,x.jsx)("option",{value:"1",children:"Sim"})]})]}),(0,x.jsxs)("div",{className:"mb-1",children:[(0,x.jsx)(l.JU,{className:"mb-1",children:"Saque bloqueado"}),(0,x.jsxs)(l.pd,{type:"select",name:"blocked_withdrawal",onChange:W,defaultValue:V.blocked_withdrawal,children:[(0,x.jsx)("option",{value:"",children:"N\xe3o"}),(0,x.jsx)("option",{value:"1",children:"Sim"})]})]}),(0,x.jsxs)("div",{className:"mb-1",children:[(0,x.jsx)(l.JU,{className:"mb-1",children:"Saldo negativo"}),(0,x.jsxs)(l.pd,{type:"select",name:"negative_balance",onChange:W,defaultValue:V.negative_balance,children:[(0,x.jsx)("option",{value:"",children:"N\xe3o"}),(0,x.jsx)("option",{value:"1",children:"Sim"})]})]}),(0,x.jsx)("div",{className:"d-flex justify-content-end",children:(0,x.jsx)(l.$n,{color:"primary",className:"mt-1 mb-1",onClick:()=>{L(0),I(!1)},children:"Filtrar"})})]})]}),(0,x.jsx)(l.Zp,{children:(0,x.jsx)(l.bw,{children:(0,x.jsxs)(l.gE,{className:"filters",children:[(0,x.jsx)(l.JU,{children:"Nome / E-mail / CPF / CNPJ"}),(0,x.jsxs)("div",{className:"d-flex",children:[(0,x.jsx)(l.pd,{onChange:e=>{let{target:s}=e;setTimeout(()=>{w(s.value)},1e3)}}),(0,x.jsx)(l.$n,{color:"primary",style:{borderRadius:"0px 8px 8px 0px"},onClick:()=>I(!0),children:"Filtrar"})]})]})})}),(0,x.jsx)(l.Zp,{children:(0,x.jsx)(l.aR,{className:"flex-sm-row flex-column justify-content-sm-between justify-content-center align-items-sm-center align-items-start",children:(0,x.jsxs)("div",{className:"d-flex flex-row justify-content-between w-100",children:[(0,x.jsxs)("div",{className:"d-flex align-items-center ml-2",children:[(0,x.jsx)(N.A,{size:15,className:"ml-2"}),(0,x.jsx)(b.A,{className:"form-control flat-picker bg-transparent border-0 shadow-none",value:Z.calendar,style:{width:"205px"},onChange:e=>B(s=>(0,n.A)((0,n.A)({},s),{},{calendar:e})),options:{mode:"range",dateFormat:"d/m/Y"}})]}),(0,x.jsx)("div",{children:(0,x.jsx)(l.$n,{color:"primary",onClick:async()=>{if(f()(Z.calendar[1]).diff(f()(Z.calendar[0]),"d")>31)C.oR.error("Selecione o m\xe1ximo de 31 dias para exportar os produtores",_.o);else{C.oR.success("Exportando... Essa opera\xe7\xe3o pode demorar",_.o),J(!0);try{await d.F.get("users/export?start_date=".concat(f()(Z.calendar[0]).format("YYYY-MM-DD"),"&end_date=").concat(f()(Z.calendar[1]).format("YYYY-MM-DD")),{responseType:"blob"}).then(e=>{const s=window.URL.createObjectURL(new Blob([e.data])),a=document.createElement("a");a.href=s,a.setAttribute("download","".concat(f()(Z.calendar[0]).format("YYYY-MM-DD"),"_").concat(f()(Z.calendar[1]).format("YYYY-MM-DD"),".xlsx")),document.body.appendChild(a),a.click()}).catch(e=>C.oR.error("Erro ao baixar arquivo",_.o)).finally(()=>J(!1))}catch(e){C.oR.error("Erro ao baixar arquivo",_.o)}finally{J(!1)}}},children:q?"Baixando...":"Exportar"})})]})})}),(0,x.jsx)(l.Zp,{children:(0,x.jsx)(l.bw,{children:(0,x.jsx)(r.Ay,{columns:A(Q,$,H,T,async(e,s,a)=>{e.preventDefault(),a(!0);try{const e=await d.F.get("/users/".concat(s,"/generate-access")),{token:a}=e.data;window.open("https://dash.b4you.com.br/acessar?backoffice=".concat(a),"_blank")}catch(n){C.oR.error("Falha ao gerar acesso, por favor, tente novamente mais tarde",_.o)}finally{a(!1)}},q,J,e),data:s,progressPending:S,progressComponent:(0,x.jsx)(y.A,{text:"Carregando...",showText:!0}),pagination:!0,paginationServer:!0,paginationTotalRows:c,onChangeRowsPerPage:async(e,s)=>{await L(s-1,e),v(e)},onChangePage:e=>{L(e-1)},paginationComponentOptions:{rowsPerPageText:"Linhas por p\xe1gina:",rangeSeparatorText:"de",noRowsPerPage:!1},theme:"dark"===e?"solarized":"solarizedLight"})})})]})}},26502:(e,s,a)=>{a.d(s,{o:()=>n});const n={position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}},37564:()=>{},94300:()=>{}}]);