"use strict";(self.webpackChunksixbase_backoffice=self.webpackChunksixbase_backoffice||[]).push([[7622],{87622:(e,a,n)=>{n.r(a),n.d(a,{default:()=>m});var s=n(9950),t=n(30639),o=n(35203),l=n(45530),i=n(11749),c=n(59051),r=n.n(c),d=n(96690),p=n(13467),u=n(44414);const g=(0,i.A)(()=>[{name:"ID",cell:e=>e.id,width:"70px"},{name:"Usu\xe1rio",cell:e=>e.full_name},{name:"A\xe7\xe3o",cell:e=>e.event},{name:"Produtor ou Cliente",cell:e=>(0,u.jsx)(d.N_,{to:"".concat(e.link),children:null===e||void 0===e?void 0:e.producer_name})},{name:"Criado",cell:e=>r()(null===e||void 0===e?void 0:e.created_at).format("DD/MM/YYYY HH:mm:ss")},{name:"IP",cell:e=>e.ip_address},{name:"Info. Adicionais",style:{margin:"0px",padding:"0px"},cell:e=>(0,u.jsx)("div",{dangerouslySetInnerHTML:{__html:e.params},style:{margin:0,padding:0}})}]),m=()=>{const[e,a]=(0,s.useState)([]),[n,i]=(0,s.useState)(0),[c,r]=(0,s.useState)(10),[d,m]=(0,s.useState)(!1),[h,x]=(0,s.useState)([{}]),[v,f]=(0,s.useState)("all"),[j,w]=(0,s.useState)([{}]),[S,y]=(0,s.useState)("all"),[C,P]=(0,s.useState)(""),{skin:_}=(0,p.h)(),b=async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;m(!0);try{const s=new URLSearchParams;s.append("event",v),s.append("id_user",S),s.append("input",C),s.append("page",e),s.append("size",n||c);const t=await l.F.get("logs?".concat(s.toString()));i(t.data.count),a(t.data.rows)}catch(s){console.log(s)}m(!1)};return(0,s.useEffect)(()=>{b(0)},[v,S,C]),(0,s.useEffect)(()=>{(async()=>{m(!0);try{const e=await l.F.get("logs/types");x(e.data.events)}catch(e){console.log(e)}m(!1)})(),(async()=>{m(!0);try{const e=await l.F.get("logs/users");w(e.data)}catch(e){console.log(e)}m(!1)})()},[]),(0,u.jsxs)("section",{id:"pageHomeLogs",children:[(0,u.jsx)("h2",{className:"mb-2",children:"Logs"}),(0,u.jsx)(o.Zp,{children:(0,u.jsxs)(o.aR,{className:"flex-sm-row flex-column align-items-sm-center",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)(o.JU,{children:"E-mail do produtor"}),(0,u.jsx)(o.pd,{onChange:e=>{let{target:a}=e;setTimeout(()=>{P(a.value)},1e3)}})]}),(0,u.jsx)("div",{children:(0,u.jsxs)("select",{as:"select",name:"users",onChange:e=>{e.preventDefault();const a=e.target.value;y(a)},children:[(0,u.jsx)("option",{value:"all",children:"Todos"}),j.map(e=>(0,u.jsx)("option",{value:e.id,children:e.full_name},e.id))]})}),(0,u.jsx)("div",{children:(0,u.jsxs)("select",{as:"select",name:"status",onChange:e=>{e.preventDefault();const a=e.target.value;f(a)},children:[(0,u.jsx)("option",{value:"all",children:"Todos"}),h.map(e=>(0,u.jsx)("option",{value:e.id,children:e.label},e.id))]})})]})}),(0,u.jsx)(o.Zp,{children:(0,u.jsx)(o.bw,{children:(0,u.jsx)(t.Ay,{columns:g(),data:e,progressPending:d,pagination:!0,paginationServer:!0,paginationTotalRows:n,onChangeRowsPerPage:async(e,a)=>{await b(a-1,e),r(e)},onChangePage:e=>{b(e-1)},noDataComponent:"N\xe3o existem produtos para o nome pesquisado",paginationComponentOptions:{rowsPerPageText:"Linhas por p\xe1gina:",rangeSeparatorText:"de",noRowsPerPage:!1},theme:"dark"===_?"solarized":"solarizedLight"})})})]})}}}]);