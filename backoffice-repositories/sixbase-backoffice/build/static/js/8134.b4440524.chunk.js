"use strict";(self.webpackChunksixbase_backoffice=self.webpackChunksixbase_backoffice||[]).push([[8134],{2067:()=>{},26502:(e,s,t)=>{t.d(s,{o:()=>l});const l={position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}},71156:(e,s,t)=>{t.r(s),t.d(s,{default:()=>E});var l=t(89379),r=t(11749),a=t(9950),n=t(30639),o=t(29251),i=t(60272),c=t(41904),d=t(18977),x=t(96690),h=t(58301),m=t(13955),p=t(59051),j=t.n(p),u=t(44414);const v={text:{color:"#000",fontSize:"10px",margin:0,padding:0,display:"block"}};function g(e){let{student:s,sales:t}=e;return(0,u.jsxs)("div",{id:"content-id",style:{marginLeft:"20px",marginTop:"20px"},children:[(0,u.jsxs)("label",{style:v.text,children:["Nome: ",s.full_name]}),(0,u.jsxs)("label",{style:v.text,children:["E-mail: ",s.email]}),(0,u.jsxs)("label",{style:v.text,children:["CPF: ",s.document_number]}),(0,u.jsx)("label",{style:(0,l.A)((0,l.A)({},v.text),{},{marginTop:"20px"}),children:"Compras"}),t.map(e=>(e=>{var s,t,l,r,a,n;return(0,u.jsxs)("div",{style:{marginTop:"20px"},children:[(0,u.jsxs)("label",{style:v.text,children:["ID ",e.uuid]}),(0,u.jsxs)("label",{style:v.text,children:["Status: ",e.status.name]}),(0,u.jsxs)("label",{style:v.text,children:["Transa\xe7\xe3o de pagamento: ",e.payment_transaction]}),(0,u.jsxs)("label",{style:v.text,children:["PSPID: ",e.psp_id]}),e.provider&&" - "!==e.provider&&(0,u.jsxs)("label",{style:v.text,children:["PROVEDOR - ID ",e.provider]}),(0,u.jsxs)("label",{style:v.text,children:["Data: ",j()(e.created_at).format("DD/MM/YYYY HH:mm")]}),(0,u.jsxs)("label",{style:v.text,children:["Produto: ",e.product.name]}),(0,u.jsxs)("label",{style:v.text,children:["Produtor: ",e.producer.full_name]}),(0,u.jsxs)("label",{style:v.text,children:["E-mail de suporte: ",null!==(s=e.product.support_email)&&void 0!==s?s:"N\xe3o informado"]}),(0,u.jsxs)("label",{style:v.text,children:["Whatsapp de Suporte: ",null!==(t=e.product.support_whatsapp)&&void 0!==t?t:"N\xe3o informado"]}),(0,u.jsxs)("label",{style:v.text,children:["Pre\xe7o: ",(0,m.cC)(e.price)]}),e.price!==e.price_total&&(0,u.jsxs)("label",{style:v.text,children:["Pre\xe7o pago: ",(0,m.cC)(e.price_total)]}),(0,u.jsxs)("label",{style:v.text,children:["Tipo: ",e.type]}),(0,u.jsxs)("label",{style:v.text,children:["Tipo do produto: ",e.type_sale]}),(0,u.jsxs)("label",{style:v.text,children:["Pagamento: ",e.payment_type]}),(0,u.jsxs)("label",{style:v.text,children:["M\xe9todo de pagamento: ",(n=e.payment_method,"card"===n?"Cart\xe3o de Cr\xe9dito":"pix"===n?"Pix":"Boleto")]}),("card"===e.payment_method||"\xdanico"===e.payment_method)&&(0,u.jsxs)("label",{style:v.text,children:["Parcelas: ",e.installments]}),(0,u.jsxs)("label",{style:v.text,children:["Pago em:"," ",e.paid_at?j()(e.paid_at).format("DD/MM/YYYY HH:mm"):" - "]}),e.card&&(0,u.jsxs)("label",{style:v.text,children:["\xdaltimos quatro d\xedgitos: ",e.card]}),(0,u.jsxs)("label",{style:v.text,children:["Prazo m\xe1ximo de reembolso:"," ",j()(e.valid_refund_until).format("DD/MM/YYYY HH:mm")]}),(0,u.jsxs)("label",{style:v.text,children:["Venda por afiliado: ",e.id_affiliate?"Sim":"N\xe3o"]}),(null===e||void 0===e?void 0:e.affiliate)&&(0,u.jsxs)("label",{style:v.text,children:["Afiliado: ",e.affiliate.full_name]}),(null===e||void 0===e?void 0:e.tracking_code)&&(0,u.jsxs)("div",{children:[(0,u.jsxs)("label",{style:v.text,children:["C\xf3digo de Rastreio: ",null!==(l=e.tracking_code)&&void 0!==l?l:"N\xe3o informado"]}),(0,u.jsxs)("label",{style:v.text,children:["URL de Rastreio: ",null!==(r=e.tracking_url)&&void 0!==r?r:"N\xe3o informado"]}),(0,u.jsxs)("label",{style:v.text,children:["Empresa de rastreio: ",null!==(a=e.tracking_company)&&void 0!==a?a:"N\xe3o informado"]})]})]},e.uuid)})(e))]})}var y=t(27655),b=t(59019),f=t(35203),N=t(45530),C=t(56561),w=(t(2067),t(12449)),_=t(26502),k=t(69234);const S=e=>{let{show:s,setShow:t,studentUuid:l}=e;const[r,n]=(0,a.useState)(null),[o,i]=(0,a.useState)(!1),c=()=>{i(!0),N.F.get("students/".concat(l,"/notes")).then(e=>n(e.data)),i(!1)};return(0,a.useEffect)(()=>{c()},[]),(0,u.jsx)(u.Fragment,{children:!o&&r&&(0,u.jsxs)(f.aF,{isOpen:s,toggle:()=>{t(!1)},centered:!0,size:"lg",children:[(0,u.jsx)(f.rQ,{toggle:()=>t(!s),children:"Notas"}),(0,u.jsxs)(f.cw,{children:[(0,u.jsxs)("div",{children:[(0,u.jsx)(f.pd,{type:"textarea",name:"text",id:"exampleText",rows:"7"}),(0,u.jsx)("div",{className:"d-flex w-100 justify-content-end",children:(0,u.jsx)(f.$n,{color:"primary",className:"mt-2",onClick:e=>{var s;e.preventDefault(),s=e.currentTarget.parentElement.parentElement.children[0].value,N.F.post("students/".concat(l,"/notes"),{note:s}).then(e=>{c(),w.oR.success("Nota criada com sucesso",_.o)}).catch(e=>{w.oR.error("Falha ao criar nota",_.o)})},children:"Criar nota"})})]}),(0,u.jsx)("div",{className:"mt-3",children:r.map(e=>(0,u.jsx)(f.Zp,{className:"p-2",style:{background:"#171c28",color:"#eee"},children:(0,u.jsxs)(f.bw,{children:[(0,u.jsx)(f.ZB,{children:"Nota"}),(0,u.jsxs)(f.jq,{children:[e.user_backoffice.full_name," - ",e.created_at]}),(0,u.jsx)("p",{className:"mt-2",style:{whiteSpace:"pre-wrap",overflowWrap:"anywhere"},children:String(e.note).replace(/\r\n/g,"\n").replace(/\r/g,"\n").replace(/\\n/g,"\n").replace(/\u00B6+/g,"\n")}),(0,u.jsx)("div",{className:"d-flex w-100 justify-content-end",children:(0,u.jsx)(f.Ex,{color:"danger",className:"view-details",style:{cursor:"pointer"},onClick:()=>{return s=e,void N.F.delete("students/".concat(l,"/notes/").concat(s.id)).then(e=>{w.oR.success("Nota removida com sucesso",_.o),c()}).catch(e=>{w.oR.error("Falha ao remover nota",_.o)});var s},children:(0,u.jsx)(k.A,{size:26})})})]})},e.id))})]}),(0,u.jsx)(f.jl,{children:(0,u.jsx)(f.$n,{color:"primary",outline:!0,onClick:()=>{t(!1)},children:"Fechar"})})]})})};var F=t(13467);const P=(0,r.A)((e,s)=>[{name:"Produto",cell:e=>{var s,t,l;return(0,u.jsx)(x.N_,{to:"/producer/".concat(null===(s=e.producer)||void 0===s?void 0:s.uuid,"/product/").concat(null===(t=e.product)||void 0===t?void 0:t.uuid),children:null===(l=e.product)||void 0===l?void 0:l.name})}},{name:"Valor",cell:e=>(0,m.cC)(e.price)},{name:"Status",cell:e=>{var s,t;return(0,u.jsx)(f.Ex,{color:null===(s=e.status)||void 0===s?void 0:s.color,children:null===(t=e.status)||void 0===t?void 0:t.name})}},{name:"Detalhes",cell:t=>(0,u.jsx)(f.Ex,{color:"primary",style:{cursor:"pointer"},onClick:()=>{s(t),e(!0)},children:(0,u.jsx)(o.A,{size:21})})}]),A={position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0},E=()=>{const{studentUuid:e}=(0,h.g)(),[s,t]=(0,a.useState)(null),[r,m]=(0,a.useState)([]),[p,j]=(0,a.useState)([]),[v,_]=(0,a.useState)("1"),[k,E]=(0,a.useState)(!1),[D,z]=(0,a.useState)(null),[R,T]=(0,a.useState)(!1),[Y,I]=(0,a.useState)(!1),[O,H]=(0,a.useState)(""),[$,M]=(0,a.useState)(!1),[B,V]=(0,a.useState)(""),[q,L]=(0,a.useState)(!1),{skin:Q}=(0,F.h)(),U=()=>{j(!0),N.F.get("/students/".concat(e)).then(e=>{t(e.data.student),m(e.data.sales),V(e.data.sales[0].provider)}).catch(e=>console.log(e)),j(!1)};(0,a.useEffect)(()=>{U()},[]);return(0,u.jsx)(u.Fragment,{children:s&&(0,u.jsxs)("section",{id:"pageStudentInfo",children:[(0,u.jsx)("h2",{children:s.full_name}),(0,u.jsx)(C.A,{student:s,show:k,toggle:()=>E(!k),data:D,getStudentData:U}),(0,u.jsxs)(f.Qp,{className:"mb-1",children:[(0,u.jsx)(f.J5,{children:(0,u.jsx)(x.N_,{to:"/students",children:"Clientes"})}),(0,u.jsx)(f.J5,{active:!0,children:(0,u.jsx)("span",{children:"Cliente"})})]}),r.length>0&&(0,u.jsxs)(f.aF,{isOpen:$,toggle:()=>M(!1),centered:!0,children:[(0,u.jsx)(f.rQ,{toggle:()=>M(!1),children:"Selecione a cobran\xe7a"}),(0,u.jsxs)(f.cw,{className:"d-block align-items-center justify-content-center",children:[(0,u.jsx)(y.Ay,{onChange:e=>{let{value:s}=e;V(s)},defaultValue:r.filter(e=>e.provider).map(e=>({value:e.provider,label:e.provider}))[0],options:r.filter(e=>e.provider).map(e=>({value:e.provider,label:e.provider}))}),s&&r.length>0&&(0,u.jsx)("div",{className:"d-flex justify-content-center mt-2",children:(0,u.jsx)(f.$n,{className:"btn btn-secondary",onClick:()=>(async e=>{const s=document.getElementById("content-id");new b.Ay({format:"a4",unit:"px"}).html(s,{async callback(s){await s.save(e)}})})(B),children:"Gerar PDF"})}),(0,u.jsx)("div",{style:{position:"fixed",left:"-1000rem"},children:(0,u.jsx)(g,{student:s,sales:r})})]})]}),(0,u.jsx)(S,{show:q,setShow:L,studentUuid:e}),(0,u.jsxs)(f.aF,{isOpen:R,toggle:()=>T(!1),centered:!0,children:[(0,u.jsx)(f.rQ,{toggle:()=>T(!1),children:"Enviar e-mail de primeiro acesso"}),(0,u.jsxs)(f.cw,{children:[(0,u.jsxs)(f.Fc,{color:"primary",className:"p-1",children:[(0,u.jsx)("b",{children:"Aten\xe7\xe3o"}),": Voc\xea deseja enviar o e-mail de primeiro acesso?"]}),(0,u.jsx)("p",{children:"Ao apertar o bot\xe3o abaixo o e-mail de primeiro acesso ser\xe1 enviado ao cliente. Voc\xea tem certeza que quer tomar esta a\xe7\xe3o? Aperte o bot\xe3o abaixo para confirmar."})]}),(0,u.jsxs)(f.jl,{children:[(0,u.jsx)(f.$n,{color:"light",onClick:()=>{T(!1)},children:"Fechar"}),(0,u.jsx)(f.$n,{color:"primary",onClick:()=>(j(!0),N.F.post("/students/".concat(e,"/email")).then(e=>{w.oR.success("E-mail enviado com sucesso",A),T(!1)}).catch(e=>{console.log(e),w.oR.error("Falha ao enviar e-mail",A)}),void j(!1)),children:"Enviar e-mail"})]})]}),(0,u.jsx)(f.Zp,{children:(0,u.jsxs)(f.bw,{children:[(0,u.jsx)(f.so,{tabs:!0,children:(0,u.jsx)(f.CI,{children:(0,u.jsx)(f.k2,{href:"#",active:"1"===v,onClick:()=>{var e;v!==(e="1")&&_(e)},children:"Cadastro"})})}),(0,u.jsxs)(f.JS,{className:"py-50",activeTab:v,children:[(0,u.jsxs)(f.mF,{tabId:"1",children:[(0,u.jsxs)(f.XI,{hover:!0,children:[(0,u.jsx)("thead",{children:(0,u.jsx)("tr",{children:(0,u.jsx)("div",{className:"title-table",children:"Geral"})})}),(0,u.jsxs)("tbody",{children:[(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{scope:"row",children:"Notas"}),(0,u.jsx)("td",{children:(0,u.jsx)(f.Ex,{color:"primary",className:"view-details",style:{cursor:"pointer"},onClick:()=>L(!0),children:(0,u.jsx)(o.A,{size:20})})})]}),(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{scope:"row",children:"Nome"}),(0,u.jsx)("td",{children:s.full_name||"N\xe3o informado"})]}),(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{scope:"row",children:"E-mail"}),(0,u.jsx)("td",{children:Y?(0,u.jsxs)("div",{className:"d-flex justify-content-start align-items-center",children:[(0,u.jsx)(f.pd,{style:{width:"300px"},type:"email",value:O,onChange:e=>{e.preventDefault(),H(e.target.value)}}),(0,u.jsxs)("div",{className:"d-flex ml-3 align-items-center",children:[(0,u.jsx)(f.Ex,{style:{cursor:"pointer"},color:"primary",onClick:s=>{s.preventDefault(),N.F.put("/students/".concat(e,"/change-email/support"),{email:O}).then(()=>{t(e=>(0,l.A)((0,l.A)({},e),{},{email:O})),I(!1),w.oR.success("E-mail alterado com sucesso",A)}).catch(e=>{var s,t;w.oR.error((null===e||void 0===e||null===(s=e.response)||void 0===s||null===(t=s.data)||void 0===t?void 0:t.message)||"Falha ao alterar o email",A)})},children:(0,u.jsx)(i.A,{size:30})}),(0,u.jsx)(f.Ex,{className:"ml-2",style:{cursor:"pointer"},color:"danger",onClick:()=>I(!1),children:(0,u.jsx)(c.A,{size:30})})]})]}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("a",{href:"mailto:".concat(s.email),children:s.email}),(0,u.jsx)(f.Ex,{className:"ml-3",style:{cursor:"pointer"},onClick:()=>I(!0),children:(0,u.jsx)(d.A,{size:20})})]})})]}),(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{scope:"row",children:"CPF"}),(0,u.jsx)("td",{children:s.document_number||"N\xe3o informado"})]}),(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{scope:"row",children:"Telefone"}),(0,u.jsx)("td",{children:s.whatsapp||"N\xe3o informado"})]}),(null===s||void 0===s?void 0:s.address)&&(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{scope:"row",children:"Endere\xe7o"}),(0,u.jsx)("td",{children:"".concat(s.address.street,", ").concat(s.address.number).concat(s.address.complement?" - "+s.address.complement:"",", ").concat(s.address.neighborhood,", ").concat(s.address.city," - ").concat(s.address.state,", CEP ").concat(s.address.zipcode)})]})}),(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{scope:"row",children:"Status"}),(0,u.jsx)("td",{children:"Ativo"===s.status?(0,u.jsxs)("span",{style:{color:"#28c76f"},children:[(0,u.jsx)(i.A,{size:20})," Ativo"]}):(0,u.jsxs)("span",{style:{color:"#ea5455"},children:[(0,u.jsx)(c.A,{size:20})," Pendente"]})})]})]})]}),(0,u.jsxs)(f.XI,{hover:!0,children:[(0,u.jsx)("thead",{children:(0,u.jsx)("tr",{children:(0,u.jsx)("div",{className:"title-table",children:"Conta b\xe1ncaria"})})}),(0,u.jsxs)("tbody",{children:[(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{scope:"row",children:"Ag\xeancia"}),(0,u.jsx)("td",{children:s.account_agency||"N\xe3o informado"})]}),(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{scope:"row",children:"N\xfamero"}),(0,u.jsx)("td",{children:s.account_number||"N\xe3o informado"})]}),(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{scope:"row",children:"C\xf3digo"}),(0,u.jsx)("td",{children:s.bank_code||"N\xe3o informado"})]})]})]}),(0,u.jsx)("h2",{className:"p-2 pb-0",style:{color:"#349888"},children:"Compras"}),(0,u.jsx)(n.Ay,{columns:P(E,z),data:r,progressPending:p,paginationComponentOptions:{rowsPerPageText:"Linhas por p\xe1gina:",rangeSeparatorText:"de",noRowsPerPage:!1},progressComponent:(0,u.jsx)(f.y$,{}),noDataComponent:(0,u.jsx)(u.Fragment,{children:"Sem informa\xe7\xf5es do cliente"}),theme:"dark"===Q?"solarized":"solarizedLight"})]}),(0,u.jsx)(f.mF,{tabId:"2",children:"aba 2"})]}),(0,u.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,u.jsx)(f.$n,{color:"primary",className:"mt-3",onClick:()=>T(!0),outline:!0,children:p?"Carregando...":"Enviar e-mail de primeiro acesso"}),r.length>0&&r.filter(e=>e.provider).length>0&&(0,u.jsx)(f.$n,{color:"warning",className:"mt-3",onClick:()=>M(!0),children:"Relat\xf3rio Chargeback"})]})]})})]})})}}}]);