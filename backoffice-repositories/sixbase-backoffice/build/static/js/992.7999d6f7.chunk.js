"use strict";(self.webpackChunksixbase_backoffice=self.webpackChunksixbase_backoffice||[]).push([[992],{25705:(e,t,a)=>{a.d(t,{A:()=>c});var r=a(9950),n=a(5393),o=a.n(n);function s(){return s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},s.apply(this,arguments)}function i(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var l=(0,r.forwardRef)(function(e,t){var a=e.color,n=void 0===a?"currentColor":a,o=e.size,l=void 0===o?24:o,c=i(e,["color","size"]);return r.createElement("svg",s({ref:t,xmlns:"http://www.w3.org/2000/svg",width:l,height:l,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c),r.createElement("polyline",{points:"23 6 13.5 15.5 8.5 10.5 1 18"}),r.createElement("polyline",{points:"17 6 23 6 23 12"}))});l.propTypes={color:o().string,size:o().oneOfType([o().string,o().number])},l.displayName="TrendingUp";const c=l},34714:(e,t,a)=>{a.d(t,{A:()=>c});var r=a(9950),n=a(5393),o=a.n(n);function s(){return s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},s.apply(this,arguments)}function i(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var l=(0,r.forwardRef)(function(e,t){var a=e.color,n=void 0===a?"currentColor":a,o=e.size,l=void 0===o?24:o,c=i(e,["color","size"]);return r.createElement("svg",s({ref:t,xmlns:"http://www.w3.org/2000/svg",width:l,height:l,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c),r.createElement("path",{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),r.createElement("circle",{cx:"8.5",cy:"7",r:"4"}),r.createElement("line",{x1:"20",y1:"8",x2:"20",y2:"14"}),r.createElement("line",{x1:"23",y1:"11",x2:"17",y2:"11"}))});l.propTypes={color:o().string,size:o().oneOfType([o().string,o().number])},l.displayName="UserPlus";const c=l},50992:(e,t,a)=>{a.r(t),a.d(t,{default:()=>_});var r=a(89379),n=(a(94300),a(9950)),o=a(30639),s=a(59051),i=a.n(s),l=a(98664),c=a(25705),d=a(87772),u=a(50708),m=a(34714),p=a(67968),g=a(34964),h=a(96690),x=a(35203),v=a(45530),f=a(13467),y=a(13955),b=a(44414);const w=new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}),j=e=>w.format(e),A=n.memo(e=>{let{loading:t,icon:a,title:r,value:n,percentage:o,onClick:s=null}=e;const i=o>=0,l=i?"success":"danger",c=i?"badge-light-success":"badge-light-danger",d=i?"Aumento":"Queda";return(0,b.jsx)(x.fv,{lg:"4",md:"6",sm:"12",children:(0,b.jsx)(x.Zp,{className:"mb-2",style:{minHeight:"150px",cursor:s?"pointer":"default"},onClick:s,children:(0,b.jsx)(x.bw,{className:"d-flex flex-column justify-content-between",children:t?(0,b.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"120px"},children:(0,b.jsx)("div",{className:"spinner-border text-primary"})}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"d-flex align-items-center mb-1",children:[(0,b.jsx)(a,{size:20,className:"text-".concat(l," mr-1")}),(0,b.jsx)("h6",{className:"text-muted mb-0",children:r})]}),(0,b.jsx)("h3",{className:"mb-0 text-".concat(l),children:j(Math.abs(n))}),(0,b.jsxs)("div",{className:"d-flex align-items-center mt-1",children:[(0,b.jsxs)("span",{className:"badge ".concat(c),children:[o.toFixed(2),"%"]}),(0,b.jsxs)("small",{className:"text-muted ml-1",children:["Total faturado da carteira - Crescimento em faturamento vs per\xedodo anterior (",d,")"]})]})]})})})})}),C=n.memo(e=>{let{title:t,value:a,loading:r,description:n,color:o="success",onClick:s=null}=e;return(0,b.jsx)(x.fv,{lg:"4",md:"6",sm:"12",children:(0,b.jsx)(x.Zp,{className:"mb-2",style:{minHeight:"150px",cursor:s?"pointer":"default"},onClick:s,children:(0,b.jsx)(x.bw,{className:"d-flex flex-column justify-content-between",children:r?(0,b.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"120px"},children:(0,b.jsx)("div",{className:"spinner-border text-success"})}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h6",{className:"text-muted mb-1",children:t}),(0,b.jsx)("h3",{className:"text-".concat(o," mb-0"),children:a})]}),(0,b.jsx)("small",{className:"text-muted mt-1",children:n})]})})})})}),N=n.memo(e=>{let{title:t,value:a,icon:r,color:n,loading:o,description:s,onClick:i=null}=e;return(0,b.jsx)(x.fv,{lg:"4",md:"6",sm:"12",children:(0,b.jsx)(x.Zp,{className:"mb-2",style:{minHeight:"150px",cursor:i&&"pointer"},onClick:i,children:(0,b.jsx)(x.bw,{className:"d-flex flex-column justify-content-between",children:o?(0,b.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"120px"},children:(0,b.jsx)("div",{className:"spinner-border spinner-border-sm text-primary"})}):(0,b.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h6",{className:"text-muted mb-1",children:t}),(0,b.jsx)("h2",{className:"text-".concat(n," mb-0"),children:a}),(0,b.jsx)("small",{className:"text-muted mt-1 d-block",children:s})]}),(0,b.jsx)("div",{className:"avatar bg-light-".concat(n," p-50"),children:(0,b.jsx)(r,{size:24,className:"text-".concat(n)})})]})})})})}),_=()=>{var e;const{skin:t}=(0,f.h)(),a=(0,y.gL)(),s=(0,n.useMemo)(()=>{try{return"COMERCIAL"===String((null===a||void 0===a?void 0:a.role)||"").toUpperCase()}catch(e){return!1}},[a]),[w,_]=(0,n.useState)([new Date(Date.now()-2592e6),new Date]),[O,k]=(0,n.useState)(s&&null!==(e=null===a||void 0===a?void 0:a.id)&&void 0!==e?e:""),[P,S]=(0,n.useState)([]),[E,z]=(0,n.useState)([]),[M,T]=(0,n.useState)({producersCount:0,goalAchievedCount:0,birthdayCount:0}),[D,F]=(0,n.useState)({totalClientes:0,variacaoFaturamento:{valor:0,percentual:0},novosClientes:0,churn:0,churnRevenueLoss:0,churnCount:0}),[Y,L]=(0,n.useState)({active_clients:0,new_clients_revenue:0}),[I,R]=(0,n.useState)([]),[q,B]=(0,n.useState)(0),[H,Q]=(0,n.useState)([]),[W,U]=(0,n.useState)(0),[Z,X]=(0,n.useState)({active:!1,new:!1}),[J,V]=(0,n.useState)({revenue:!1,clients:!1,producers:!1,churn:!1}),[$,G]=(0,n.useState)({searchName:"",awardAchieved:!1,birthdayInPeriod:!1}),[K,ee]=(0,n.useState)($),[te,ae]=(0,n.useState)({page:0,perPage:10,totalChurn:0}),[re,ne]=(0,n.useState)({page:0,perPage:10,total:0}),[oe,se]=(0,n.useState)({page:0,perPage:10,total:0}),[ie,le]=(0,n.useState)(!1),[ce,de]=(0,n.useState)([]),[ue,me]=(0,n.useState)(!1),[pe,ge]=(0,n.useState)(!1),[he,xe]=(0,n.useState)(!1),[ve,fe]=(0,n.useState)(!1),[ye,be]=(0,n.useState)(!1),[we,je]=(0,n.useState)({revenue:[],goals:[],birthdays:[]}),[Ae,Ce]=(0,n.useState)({revenue:!1,goals:!1,birthdays:!1,activeClients:!1,newClients:!1,churn:!1}),Ne=(0,n.useCallback)(e=>e>=1e6?"R$ ".concat((e/1e6).toFixed(1)," mi"):e>=1e3?"R$ ".concat((e/1e3).toFixed(0)," mil"):j(e),[]);(0,n.useEffect)(()=>{if(s)return;(async()=>{try{var e;const t=await v.F.get("/client-wallet/managers",{headers:{"Cache-Control":"no-cache",Pragma:"no-cache",Expires:"0"}}),a=Array.isArray(null===(e=t.data)||void 0===e?void 0:e.managers)?t.data.managers:[];S(a)}catch(t){console.error("Erro ao buscar gerentes:",t),S([])}})()},[s]);const _e=(0,n.useCallback)(async()=>{V(e=>(0,r.A)((0,r.A)({},e),{},{revenue:!0}));try{const e={start_date:w[0].toISOString().slice(0,10),end_date:w[1].toISOString().slice(0,10)};O&&(e.manager_id=O);const{data:t}=await v.F.get("/client-wallet/revenue",{params:e});F(e=>{var a,n;return(0,r.A)((0,r.A)({},e),{},{variacaoFaturamento:{valor:null!==(a=t.total_revenue)&&void 0!==a?a:0,percentual:null!==(n=t.mom_percentage)&&void 0!==n?n:0}})})}catch(e){console.error("Erro ao buscar faturamento:",e)}finally{V(e=>(0,r.A)((0,r.A)({},e),{},{revenue:!1}))}},[w,O]),Oe=(0,n.useCallback)(async()=>{V(e=>(0,r.A)((0,r.A)({},e),{},{clients:!0}));try{var e,t;const a={};O&&(a.manager_id=O);const{data:r}=await v.F.get("/client-wallet/clients/cards",{params:a});L({active_clients:null!==(e=r.active_clients)&&void 0!==e?e:0,new_clients_revenue:null!==(t=r.new_clients_revenue)&&void 0!==t?t:0})}catch(a){console.error("Erro ao buscar cards de clientes:",a)}finally{V(e=>(0,r.A)((0,r.A)({},e),{},{clients:!1}))}},[O]),ke=(0,n.useCallback)(async()=>{try{V(e=>(0,r.A)((0,r.A)({},e),{},{churn:!0}));const e=i()(w[0]).startOf("day"),t=i()(w[1]).startOf("day"),a=i()().startOf("day"),n=t.isAfter(a)?a:t,o=n.diff(e,"days")+1,s=e.clone().subtract(1,"day").endOf("day"),l=s.clone().subtract(o-1,"days").startOf("day"),c={start_date:e.format("YYYY-MM-DD"),end_date:n.format("YYYY-MM-DD"),prev_start_date:l.format("YYYY-MM-DD"),prev_end_date:s.format("YYYY-MM-DD")};O&&(c.manager_id=O);const{data:d}=await v.F.get("/client-wallet/churn/card",{params:c});F(e=>{var t,a,n;return(0,r.A)((0,r.A)({},e),{},{churn:null!==(t=d.churnRevenueLoss)&&void 0!==t?t:0,churnRevenueLoss:null!==(a=d.churnRevenueLoss)&&void 0!==a?a:0,churnCount:null!==(n=d.churnCount)&&void 0!==n?n:0})})}catch(e){console.error("Erro ao buscar churn card:",e)}finally{V(e=>(0,r.A)((0,r.A)({},e),{},{churn:!1}))}},[w,O]),Pe=(0,n.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;try{Ce(e=>(0,r.A)((0,r.A)({},e),{},{churn:!0}));const a=i()(w[0]).startOf("day"),n=i()(w[1]).startOf("day"),o=i()().startOf("day"),s=n.isAfter(o)?o:n,l=s.diff(a,"days")+1,c=a.clone().subtract(1,"day").endOf("day"),d=c.clone().subtract(l-1,"days").startOf("day"),u={page:e,size:t,start_date:a.format("YYYY-MM-DD"),end_date:s.format("YYYY-MM-DD"),prev_start_date:d.format("YYYY-MM-DD"),prev_end_date:c.format("YYYY-MM-DD")};O&&(u.manager_id=O);const{data:m}=await v.F.get("/client-wallet/churn/list",{params:u});de(m.items),ae(e=>(0,r.A)((0,r.A)({},e),{},{page:m.page,perPage:m.size,totalChurn:m.totalItems}))}catch(a){console.error("Erro ao buscar lista paginada de churn:",a),de([])}finally{Ce(e=>(0,r.A)((0,r.A)({},e),{},{churn:!1}))}},[w,O]),Se=(0,n.useCallback)(async()=>{try{const e={start_date:w[0].toISOString().slice(0,10),end_date:w[1].toISOString().slice(0,10)};O&&(e.manager_id=O);const{data:t}=await v.F.get("/client-wallet/producers/summary",{params:e});T({producersCount:t.total_producers||0,goalAchievedCount:t.goal_achieved_count||0,birthdayCount:t.birthday_count||0})}catch(e){console.error("Erro ao buscar resumo de produtores:",e),T({producersCount:0,goalAchievedCount:0,birthdayCount:0})}},[w,O]),Ee=(0,n.useCallback)(async(e,t)=>{V(e=>(0,r.A)((0,r.A)({},e),{},{producers:!0}));try{const a={start_date:w[0].toISOString().slice(0,10),end_date:w[1].toISOString().slice(0,10),page:e,size:t};O&&(a.manager_id=O),K.searchName.trim()&&(a.search=K.searchName.trim()),K.awardAchieved&&(a.award_achieved="true"),K.birthdayInPeriod&&(a.birthday_in_period="true");const{data:n}=await v.F.get("/client-wallet/producers/list",{params:a});z(n.producers||[]),T(e=>(0,r.A)((0,r.A)({},e),{},{producersCount:n.total||0}))}catch(a){console.error("Erro ao buscar produtores:",a),z([])}finally{V(e=>(0,r.A)((0,r.A)({},e),{},{producers:!1}))}},[w[0],w[1],O,K.searchName,K.awardAchieved,K.birthdayInPeriod]);(0,n.useEffect)(()=>{(async()=>{await Promise.all([_e(),Oe(),Se(),ke()])})()},[w,O]),(0,n.useEffect)(()=>{const e=setTimeout(()=>ee($),500);return()=>clearTimeout(e)},[$]),(0,n.useEffect)(()=>{ae(e=>(0,r.A)((0,r.A)({},e),{},{page:0}))},[K,w,O]),(0,n.useEffect)(()=>{Ee(te.page,te.perPage)},[te,K,w,O]);const ze=(0,n.useCallback)(e=>{2===e.length&&_(e)},[]),Me=(0,n.useCallback)(async()=>{Ce(e=>(0,r.A)((0,r.A)({},e),{},{revenue:!0}));try{const e={start_date:w[0].toISOString().slice(0,10),end_date:w[1].toISOString().slice(0,10),page:0,size:1e3};O&&(e.manager_id=O);const{data:t}=await v.F.get("/client-wallet/producers/list",{params:e});je(e=>(0,r.A)((0,r.A)({},e),{},{revenue:(t.producers||[]).sort((e,t)=>t.period_revenue-e.period_revenue)}))}catch(e){console.error("Erro ao buscar produtores do faturamento:",e),je(e=>(0,r.A)((0,r.A)({},e),{},{revenue:[]}))}finally{Ce(e=>(0,r.A)((0,r.A)({},e),{},{revenue:!1}))}},[w,O]),Te=(0,n.useCallback)(async()=>{Ce(e=>(0,r.A)((0,r.A)({},e),{},{goals:!0}));try{const e={start_date:w[0].toISOString().slice(0,10),end_date:w[1].toISOString().slice(0,10),page:0,size:1e3,award_achieved:"true"};O&&(e.manager_id=O);const{data:t}=await v.F.get("/client-wallet/producers/list",{params:e});je(e=>(0,r.A)((0,r.A)({},e),{},{goals:t.producers||[]}))}catch(e){console.error("Erro ao buscar produtores que bateram meta:",e),je(e=>(0,r.A)((0,r.A)({},e),{},{goals:[]}))}finally{Ce(e=>(0,r.A)((0,r.A)({},e),{},{goals:!1}))}},[w,O]),De=(0,n.useCallback)(async()=>{Ce(e=>(0,r.A)((0,r.A)({},e),{},{birthdays:!0}));try{const e={start_date:w[0].toISOString().slice(0,10),end_date:w[1].toISOString().slice(0,10),page:0,size:1e3,birthday_in_period:"true"};O&&(e.manager_id=O);const{data:t}=await v.F.get("/client-wallet/producers/list",{params:e});je(e=>(0,r.A)((0,r.A)({},e),{},{birthdays:t.producers||[]}))}catch(e){console.error("Erro ao buscar aniversariantes:",e),je(e=>(0,r.A)((0,r.A)({},e),{},{birthdays:[]}))}finally{Ce(e=>(0,r.A)((0,r.A)({},e),{},{birthdays:!1}))}},[w,O]),Fe=(0,n.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;X(e=>(0,r.A)((0,r.A)({},e),{},{active:!0}));try{var a,n;const r={page:e,size:t};O&&(r.manager_id=O);const{data:o}=await v.F.get("/client-wallet/clients/active",{params:r});R(null!==(a=o.items)&&void 0!==a?a:[]),B(null!==(n=o.totalItems)&&void 0!==n?n:0)}catch(o){console.error("Erro ao buscar clientes ativos:",o),R([])}finally{X(e=>(0,r.A)((0,r.A)({},e),{},{active:!1}))}},[O]),Ye=(0,n.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;X(e=>(0,r.A)((0,r.A)({},e),{},{new:!0}));try{var a,n;const r={page:e,size:t};O&&(r.manager_id=O);const{data:o}=await v.F.get("/client-wallet/clients/new",{params:r});Q(null!==(a=o.items)&&void 0!==a?a:[]),U(null!==(n=o.totalItems)&&void 0!==n?n:0)}catch(o){console.error("Erro ao buscar novos clientes:",o),Q([])}finally{X(e=>(0,r.A)((0,r.A)({},e),{},{new:!1}))}},[O]),Le=(0,n.useCallback)(()=>{me(!0),Me()},[Me]),Ie=(0,n.useCallback)(()=>{ge(!0),Te()},[Te]),Re=(0,n.useCallback)(()=>{xe(!0),De()},[De]),qe=(0,n.useCallback)(()=>{fe(!0),Fe()},[Fe]),Be=(0,n.useCallback)(()=>{be(!0),Ye()},[Ye]),He=(0,n.useMemo)(()=>[{name:"Nome",cell:e=>(0,b.jsxs)("div",{className:"px-1 d-flex flex-column justify-content-center",style:{minWidth:180,lineHeight:1.3},children:[(0,b.jsx)(h.N_,{to:"/producer/".concat(e.user_uuid||e.id),className:"font-weight-bold text-truncate d-block",style:{textDecoration:"none",color:"inherit",cursor:"pointer"},title:e.name,onClick:e=>e.stopPropagation(),onMouseEnter:e=>{e.currentTarget.style.textDecoration="underline",e.currentTarget.style.color="var(--primary)"},onMouseLeave:e=>{e.currentTarget.style.textDecoration="none",e.currentTarget.style.color="inherit"},children:e.name}),(0,b.jsxs)("div",{className:"d-flex flex-wrap mt-25",children:[e.goal_status.goal_achieved_in_period&&(0,b.jsx)(x.Ex,{color:"success",pill:!0,className:"mr-50 mb-25",children:"Meta batida no per\xedodo"}),e.birthday_in_period&&(0,b.jsx)(x.Ex,{color:"warning",pill:!0,className:"mb-25",children:"Aniversariante"})]})]}),grow:1.2},{name:"Email",selector:e=>e.email,sortable:!0,cell:e=>(0,b.jsx)("span",{className:"px-1 text-truncate d-block",style:{maxWidth:200},title:e.email,children:e.email}),grow:1},{name:"Telefone",cell:e=>(0,b.jsx)("span",{className:"px-1 text-nowrap",children:(0,y.Xu)(e.phone)}),grow:.6},{name:"Anivers\xe1rio",selector:e=>e.birth_date,sortable:!0,center:!0,grow:.4},{name:"Faturamento",right:!0,cell:e=>(0,b.jsx)("div",{className:"px-1 text-nowrap",children:(0,b.jsx)("strong",{children:Ne(e.period_revenue)})}),grow:.8},{name:"Status de Meta",cell:e=>{const{next_goal:t,percentage_achieved:a,goal_achieved:r}=e.goal_status,n=r,o=Ne(t),s=Ne(e.total_revenue||0);return(0,b.jsxs)("div",{className:"meta-status",children:[(0,b.jsxs)("div",{className:"meta-header",children:[(0,b.jsxs)("small",{className:"".concat(n?"text-success":"text-muted"),children:[a.toFixed(0),"% at\xe9 ",o]}),(0,b.jsx)("small",{className:"text-light",children:s})]}),(0,b.jsx)("div",{className:"meta-progress",children:(0,b.jsx)("div",{className:"meta-bar",style:{width:"".concat(Math.min(a,100),"%"),background:n?"linear-gradient(90deg, #28c76f 0%, #a0ffcc 100%)":"linear-gradient(90deg, #7367f0 0%, #a099ff 100%)"}})})]})},grow:1.2}],[Ne]),Qe=(0,n.useMemo)(()=>[{name:"Nome",cell:e=>(0,b.jsx)("div",{className:"px-1 d-flex flex-column justify-content-center",style:{minWidth:180,lineHeight:1.3},children:(0,b.jsx)(h.N_,{to:"/producer/".concat(e.user_uuid||e.id||e.uuid),className:"font-weight-bold text-truncate d-block",style:{textDecoration:"none",color:"inherit",cursor:"pointer"},title:e.name||"",onClick:e=>e.stopPropagation(),onMouseEnter:e=>{e.currentTarget.style.textDecoration="underline",e.currentTarget.style.color="var(--primary)"},onMouseLeave:e=>{e.currentTarget.style.textDecoration="none",e.currentTarget.style.color="inherit"},children:e.name||"-"})}),grow:1},{name:"Email",selector:e=>e.email||"",sortable:!0,cell:e=>(0,b.jsx)("span",{className:"px-1 text-truncate d-block",style:{maxWidth:200},title:e.email||"",children:e.email||"-"}),grow:1},{name:"Telefone",cell:e=>(0,b.jsx)("span",{className:"px-1 text-nowrap",children:e.phone?(0,y.Xu)(e.phone):"-"}),grow:1},{name:"Faturamento Atual",right:!0,cell:e=>(0,b.jsx)("span",{className:"px-1 text-nowrap",children:Ne(e.current_revenue||0)}),grow:1},{name:"Faturamento Anterior",right:!0,cell:e=>(0,b.jsx)("span",{className:"px-1 text-nowrap",children:Ne(e.prev_revenue||0)}),grow:1},{name:"Queda %",right:!0,cell:e=>{const t=e.prev_revenue||0,a=e.current_revenue||0,r=t>0?((a-t)/t*100).toFixed(1):"0.0",n=Number(r)<0;return(0,b.jsxs)("span",{className:"px-1 text-nowrap ".concat(n?"text-danger":"text-success"),children:[r,"%"]})},grow:.8}],[Ne]),We=[{name:"Nome",selector:e=>e.name,cell:e=>(0,b.jsx)(h.N_,{to:"/producer/".concat(e.user_uuid||e.id),className:"font-weight-bold",children:e.name}),grow:1.2},{name:"Email",selector:e=>e.email,grow:1},{name:"Telefone",cell:e=>(0,y.Xu)(e.phone),grow:.6},{name:"\xdaltima Venda",cell:e=>i()(e.last_sale_date).format("DD/MM/YYYY"),grow:.6,right:!0},{name:"Total de Vendas",selector:e=>e.total_sales,right:!0,grow:.5}],Ue=[{name:"Nome",selector:e=>e.name,cell:e=>(0,b.jsx)(h.N_,{to:"/producer/".concat(e.user_uuid||e.id),className:"font-weight-bold",children:e.name}),grow:1.2},{name:"Email",selector:e=>e.email,grow:1},{name:"Telefone",cell:e=>(0,y.Xu)(e.phone),grow:.6},{name:"Criado em",cell:e=>i()(e.created_at).format("DD/MM/YYYY"),grow:.6,right:!0},{name:"Faturamento",cell:e=>Ne(e.new_client_revenue||0),grow:.6,right:!0}];return(0,b.jsxs)("div",{className:"mt-2",children:[(0,b.jsx)(x.Zp,{children:(0,b.jsxs)(x.aR,{className:"d-flex align-items-center justify-content-between flex-wrap",children:[(0,b.jsx)("h4",{className:"mb-0",children:"Dashboard da Carteira"}),(0,b.jsxs)("div",{className:"d-flex align-items-center gap-2 flex-wrap",children:[!s&&(0,b.jsxs)("div",{className:"d-flex align-items-center mr-2",children:[(0,b.jsx)(x.JU,{className:"mb-0 mr-1",children:"Gerente:"}),(0,b.jsxs)(x.pd,{type:"select",value:O,onChange:e=>k(e.target.value),style:{width:200},children:[(0,b.jsx)("option",{value:"",children:"Todos os gerentes"}),P.map(e=>(0,b.jsx)("option",{value:e.id,children:e.email},e.id))]})]}),(0,b.jsxs)("div",{className:"d-flex align-items-center",children:[(0,b.jsx)(l.A,{size:15,className:"mr-1"}),(0,b.jsx)(g.A,{className:"form-control",style:{width:250},value:w,onChange:ze,options:{mode:"range",dateFormat:"d/m/Y",defaultDate:[new Date(Date.now()-2592e6),new Date]}})]})]})]})}),(0,b.jsxs)(x.fI,{className:"justify-content-center",children:[(0,b.jsx)(A,{loading:J.revenue,icon:D.variacaoFaturamento.percentual>=0?c.A:d.A,title:D.variacaoFaturamento.percentual>=0?"Aumento de Faturamento (MoM)":"Queda de Faturamento (MoM)",value:Math.abs(D.variacaoFaturamento.valor),percentage:D.variacaoFaturamento.percentual,onClick:Le}),(0,b.jsx)(C,{title:"Metas Batidas no Per\xedodo",value:M.goalAchievedCount,loading:J.producers,description:1===M.goalAchievedCount?"Produtor que bateu a meta no per\xedodo":"Produtores que bateram a meta no per\xedodo",onClick:Ie}),(0,b.jsx)(C,{title:"Aniversariantes no Per\xedodo",value:M.birthdayCount,loading:J.producers,description:"Produtores que fazem anivers\xe1rio no per\xedodo selecionado",onClick:Re})]}),(0,b.jsxs)(x.fI,{className:"justify-content-center",children:[(0,b.jsx)(N,{title:"Clientes Ativos",value:Y.active_clients,icon:u.A,color:"primary",loading:J.clients,description:"Clientes ativos na carteira que realizaram venda",onClick:qe}),(0,b.jsx)(N,{title:"Novos Clientes",value:Ne(Y.new_clients_revenue),icon:m.A,color:"info",loading:J.clients,description:"Faturamento de novos clientes",onClick:Be}),(0,b.jsx)(N,{title:"Churn",value:Ne(D.churn),icon:p.A,color:"danger",loading:J.churn,description:"Clientes que j\xe1 tiveram vendas mas nos \xfaltimos 30 dias n\xe3o venderam (".concat(D.churnCount,")"),onClick:()=>{le(!0),Pe(0,10)}})]}),(0,b.jsxs)(x.Zp,{className:"mt-2",children:[(0,b.jsx)(x.aR,{children:(0,b.jsx)("h4",{className:"mb-0",children:"Produtores da Carteira"})}),(0,b.jsxs)(x.bw,{children:[(0,b.jsxs)(x.fI,{className:"mb-3",children:[(0,b.jsxs)(x.fv,{md:"4",children:[(0,b.jsx)(x.JU,{children:"Busca:"}),(0,b.jsx)(x.pd,{value:$.searchName,onChange:e=>G(t=>(0,r.A)((0,r.A)({},t),{},{searchName:e.target.value})),placeholder:"Nome, email ou telefone..."})]}),(0,b.jsxs)(x.fv,{md:"8",children:[(0,b.jsx)(x.JU,{children:"Filtros:"}),(0,b.jsxs)(x.pd,{type:"select",value:[$.awardAchieved?"award":null,$.birthdayInPeriod?"birthday":null].filter(Boolean).join(","),onChange:e=>{const t=e.target.value;G((0,r.A)((0,r.A)({},$),{},{awardAchieved:t.includes("award"),birthdayInPeriod:t.includes("birthday")}))},children:[(0,b.jsx)("option",{value:"",children:"Todos os produtores"}),(0,b.jsx)("option",{value:"award",children:"Apenas quem bateu meta"}),(0,b.jsx)("option",{value:"birthday",children:"Apenas aniversariantes"}),(0,b.jsx)("option",{value:"award,birthday",children:"Meta + Anivers\xe1rio"})]})]})]}),(0,b.jsx)(o.Ay,{columns:He,data:E,progressPending:J.producers,pagination:!0,paginationServer:!0,paginationTotalRows:M.producersCount,onChangeRowsPerPage:(e,t)=>ae(a=>(0,r.A)((0,r.A)({},a),{},{perPage:e,page:t-1})),onChangePage:e=>ae(t=>(0,r.A)((0,r.A)({},t),{},{page:e-1})),paginationComponentOptions:{rowsPerPageText:"Linhas por p\xe1gina:",rangeSeparatorText:"de"},noDataComponent:"Nenhum produtor encontrado",theme:"dark"===t?"solarized":"solarizedLight",conditionalRowStyles:[{when:e=>e.goal_status.goal_achieved_in_period,style:{backgroundColor:"rgba(40, 199, 111, 0.12)",boxShadow:"inset 4px 0 0 0 #28c76f",borderRadius:"6px"}},{when:e=>e.birthday_in_period&&!e.goal_status.goal_achieved_in_period,style:{backgroundColor:"rgba(255, 193, 7, 0.12)",boxShadow:"inset 4px 0 0 0 #ffc107",borderRadius:"6px"}}]})]})]}),ie&&(0,b.jsxs)(x.aF,{isOpen:ie,toggle:()=>le(!ie),size:"lg",centered:!0,children:[(0,b.jsx)(x.rQ,{toggle:()=>le(!ie),children:"Churn"}),(0,b.jsxs)(x.cw,{children:[(0,b.jsx)("p",{className:"mb-2",children:"Clientes em churn - Clientes que j\xe1 tiveram vendas mas nos \xfaltimos 30 dias o saldo de vendas \xe9 zero:"}),(0,b.jsx)(o.Ay,{className:"mb-2",columns:Qe,data:ce,progressPending:Ae.churn,pagination:!0,paginationServer:!0,paginationTotalRows:te.totalChurn,onChangePage:e=>Pe(e-1,te.perPage),onChangeRowsPerPage:(e,t)=>Pe(t-1,e),paginationComponentOptions:{rowsPerPageText:"Linhas por p\xe1gina:",rangeSeparatorText:"de"},noDataComponent:"Nenhum cliente em churn encontrado",theme:"dark"===t?"solarized":"solarizedLight"})]})]}),ue&&(0,b.jsxs)(x.aF,{isOpen:ue,toggle:()=>me(!1),size:"xl",centered:!0,children:[(0,b.jsx)(x.rQ,{toggle:()=>me(!1),children:"Aumento de Faturamento (MoM)"}),(0,b.jsxs)(x.cw,{children:[(0,b.jsx)("p",{className:"mb-2",children:"Lista de produtores ordenados por faturamento no per\xedodo:"}),(0,b.jsx)(o.Ay,{className:"mb-2",columns:He,data:we.revenue,progressPending:Ae.revenue,pagination:!0,paginationRowsPerPageOptions:[10,25,50,100],paginationComponentOptions:{rowsPerPageText:"Linhas por p\xe1gina:",rangeSeparatorText:"de"},noDataComponent:"Nenhum produtor encontrado",theme:"dark"===t?"solarized":"solarizedLight"})]})]}),pe&&(0,b.jsxs)(x.aF,{isOpen:pe,toggle:()=>ge(!1),size:"xl",centered:!0,children:[(0,b.jsx)(x.rQ,{toggle:()=>ge(!1),children:"Metas Batidas no Per\xedodo"}),(0,b.jsxs)(x.cw,{children:[(0,b.jsx)("p",{className:"mb-2",children:"Produtores que bateram alguma meta no per\xedodo selecionado:"}),(0,b.jsx)(o.Ay,{className:"mb-2",columns:He,data:we.goals,progressPending:Ae.goals,pagination:!0,paginationRowsPerPageOptions:[10,25,50,100],paginationComponentOptions:{rowsPerPageText:"Linhas por p\xe1gina:",rangeSeparatorText:"de"},noDataComponent:"Nenhum produtor encontrado",theme:"dark"===t?"solarized":"solarizedLight"})]})]}),he&&(0,b.jsxs)(x.aF,{isOpen:he,toggle:()=>xe(!1),size:"xl",centered:!0,children:[(0,b.jsx)(x.rQ,{toggle:()=>xe(!1),children:"Aniversariantes no Per\xedodo"}),(0,b.jsxs)(x.cw,{children:[(0,b.jsx)("p",{className:"mb-2",children:"Produtores que fazem anivers\xe1rio no per\xedodo selecionado:"}),(0,b.jsx)(o.Ay,{className:"mb-2",columns:He,data:we.birthdays,progressPending:Ae.birthdays,pagination:!0,paginationRowsPerPageOptions:[10,25,50,100],paginationComponentOptions:{rowsPerPageText:"Linhas por p\xe1gina:",rangeSeparatorText:"de"},noDataComponent:"Nenhum aniversariante encontrado",theme:"dark"===t?"solarized":"solarizedLight"})]})]}),ve&&(0,b.jsxs)(x.aF,{isOpen:ve,toggle:()=>fe(!1),size:"xl",centered:!0,children:[(0,b.jsx)(x.rQ,{toggle:()=>fe(!1),children:"Clientes Ativos"}),(0,b.jsxs)(x.cw,{children:[(0,b.jsx)("p",{className:"mb-2",children:"Clientes que venderam nos \xfaltimos 30 dias:"}),(0,b.jsx)(o.Ay,{columns:We,data:I,progressPending:Z.active,pagination:!0,paginationServer:!0,paginationTotalRows:q,onChangePage:e=>Fe(e-1,re.perPage),onChangeRowsPerPage:(e,t)=>Fe(t-1,e),noDataComponent:"Nenhum cliente ativo encontrado",theme:"dark"===t?"solarized":"solarizedLight"})]})]}),ye&&(0,b.jsxs)(x.aF,{isOpen:ye,toggle:()=>be(!1),size:"xl",centered:!0,children:[(0,b.jsx)(x.rQ,{toggle:()=>be(!1),children:"Novos Clientes"}),(0,b.jsxs)(x.cw,{children:[(0,b.jsx)("p",{className:"mb-2",children:"Clientes criados nos \xfaltimos 30 dias:"}),(0,b.jsx)(o.Ay,{columns:Ue,data:H,progressPending:Z.new,pagination:!0,paginationServer:!0,paginationTotalRows:W,onChangePage:e=>Ye(e-1,oe.perPage),onChangeRowsPerPage:(e,t)=>Ye(t-1,e),noDataComponent:"Nenhum novo cliente encontrado",theme:"dark"===t?"solarized":"solarizedLight"})]})]})]})}},67968:(e,t,a)=>{a.d(t,{A:()=>c});var r=a(9950),n=a(5393),o=a.n(n);function s(){return s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},s.apply(this,arguments)}function i(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var l=(0,r.forwardRef)(function(e,t){var a=e.color,n=void 0===a?"currentColor":a,o=e.size,l=void 0===o?24:o,c=i(e,["color","size"]);return r.createElement("svg",s({ref:t,xmlns:"http://www.w3.org/2000/svg",width:l,height:l,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c),r.createElement("path",{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),r.createElement("circle",{cx:"8.5",cy:"7",r:"4"}),r.createElement("line",{x1:"23",y1:"11",x2:"17",y2:"11"}))});l.propTypes={color:o().string,size:o().oneOfType([o().string,o().number])},l.displayName="UserMinus";const c=l},87772:(e,t,a)=>{a.d(t,{A:()=>c});var r=a(9950),n=a(5393),o=a.n(n);function s(){return s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},s.apply(this,arguments)}function i(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var l=(0,r.forwardRef)(function(e,t){var a=e.color,n=void 0===a?"currentColor":a,o=e.size,l=void 0===o?24:o,c=i(e,["color","size"]);return r.createElement("svg",s({ref:t,xmlns:"http://www.w3.org/2000/svg",width:l,height:l,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c),r.createElement("polyline",{points:"23 18 13.5 8.5 8.5 13.5 1 6"}),r.createElement("polyline",{points:"17 18 23 18 23 12"}))});l.propTypes={color:o().string,size:o().oneOfType([o().string,o().number])},l.displayName="TrendingDown";const c=l},94300:()=>{},98664:(e,t,a)=>{a.d(t,{A:()=>c});var r=a(9950),n=a(5393),o=a.n(n);function s(){return s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},s.apply(this,arguments)}function i(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var l=(0,r.forwardRef)(function(e,t){var a=e.color,n=void 0===a?"currentColor":a,o=e.size,l=void 0===o?24:o,c=i(e,["color","size"]);return r.createElement("svg",s({ref:t,xmlns:"http://www.w3.org/2000/svg",width:l,height:l,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c),r.createElement("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),r.createElement("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),r.createElement("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),r.createElement("line",{x1:"3",y1:"10",x2:"21",y2:"10"}))});l.propTypes={color:o().string,size:o().oneOfType([o().string,o().number])},l.displayName="Calendar";const c=l}}]);