"use strict";(self.webpackChunksixbase_backoffice=self.webpackChunksixbase_backoffice||[]).push([[573],{10573:(e,s,o)=>{o.r(s),o.d(s,{default:()=>a});var l=o(9950),r=o(35203),c=o(45530),i=o(12449),t=o(44414);function a(){const[e,s]=(0,l.useState)(""),[o,a]=(0,l.useState)(!1),[n,d]=(0,l.useState)([]),[h,u]=(0,l.useState)(!1),[x,j]=(0,l.useState)(!1);return(0,t.jsxs)("section",{id:"sectionKYC",children:[(0,t.jsx)("h2",{className:"mb-2",children:"Bloqueios - Consulta de bloqueios ativos"}),(0,t.jsx)(r.Zp,{children:(0,t.jsx)(r.bw,{className:"filters",children:(0,t.jsxs)(r.gE,{className:"filters",children:[(0,t.jsx)(r.JU,{children:"BUSCAR POR: E-MAIL OU CPF DA COMPRA"}),(0,t.jsxs)("div",{className:"d-flex",children:[(0,t.jsx)(r.pd,{onChange:e=>{let{target:o}=e;return s(o.value)},value:e}),(0,t.jsx)("div",{className:"flex justify-end ml-2",children:(0,t.jsx)(r.$n,{color:"primary",onClick:async()=>{const s=/^\d{3}\.?\d{3}\.?\d{3}-?\d{2}$/.test(o=e)?"cpf":/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o)?"email":null;var o;if(s){a(!0);try{const{data:o}=await c.F.get("/blacklist/blocks?input=".concat(e,"&typeBlock=").concat(s));0===o.length?i.oR.error("Nenhum bloqueio encontrado."):(d(o),u(!0))}catch(l){console.error(l),i.oR.error("Erro ao buscar bloqueios.")}finally{a(!1)}}else i.oR.error("Digite um CPF ou E-mail v\xe1lido.")},disabled:o,children:o?(0,t.jsx)(r.y$,{size:"sm"}):"Buscar"})})]})]})})}),(0,t.jsxs)(r.aF,{isOpen:h,toggle:()=>u(!h),size:"lg",centered:!0,children:[(0,t.jsx)(r.rQ,{toggle:()=>u(!h),children:"Bloqueios Encontrados"}),(0,t.jsx)(r.cw,{children:(0,t.jsxs)(r.XI,{bordered:!0,children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"ID"}),(0,t.jsx)("th",{children:"Tipo"}),(0,t.jsx)("th",{children:"Criado em"})]})}),(0,t.jsx)("tbody",{children:n.map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:e.id}),(0,t.jsx)("td",{children:e.blockType}),(0,t.jsx)("td",{children:new Date(e.created_at).toLocaleString()})]},e.id))})]})}),(0,t.jsxs)(r.jl,{children:[(0,t.jsx)(r.$n,{color:"danger",onClick:async()=>{j(!0);try{const e=n.map(e=>e.id);await c.F.delete("/blacklist/blocks",{data:{ids:e}}),i.oR.success("Bloqueios removidos com sucesso!"),u(!1),d([])}catch(e){console.error(e),i.oR.error("Erro ao remover bloqueios.")}finally{j(!1)}},disabled:x,children:x?"Removendo...":"Remover todos os bloqueios"}),(0,t.jsx)(r.$n,{color:"secondary",onClick:()=>u(!1),children:"Fechar"})]})]})]})}}}]);